(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();document.addEventListener("DOMContentLoaded",function(){let t,e;const n=document.querySelector(".nav-toggle"),o=document.querySelector(".nav-menu");console.log("NavToggle found:",n),console.log("NavMenu found:",o),n&&o&&(n.addEventListener("click",function(v){console.log("NavToggle clicked"),v.preventDefault(),v.stopPropagation(),o.classList.contains("active")?(o.classList.remove("active"),n.classList.remove("active"),document.body.style.overflow=""):(o.classList.add("active"),n.classList.add("active"),document.body.style.overflow="hidden"),console.log("Menu is now:",o.classList.contains("active")?"open":"closed")}),document.querySelectorAll(".nav-menu a").forEach(v=>{v.addEventListener("click",f=>{console.log("Nav link clicked"),o.classList.remove("active"),n.classList.remove("active"),document.body.style.overflow=""})}),document.addEventListener("click",function(v){!o.contains(v.target)&&!n.contains(v.target)&&o.classList.contains("active")&&(console.log("Closing menu - clicked outside"),o.classList.remove("active"),n.classList.remove("active"),document.body.style.overflow="")}),window.addEventListener("resize",function(){window.innerWidth>768&&(o.classList.remove("active"),n.classList.remove("active"),document.body.style.overflow="")}),document.querySelectorAll(".dropdown").forEach(v=>{const f=v.querySelector(".dropdown-toggle"),E=v.querySelector(".dropdown-menu");f&&E&&f.addEventListener("click",function(C){window.innerWidth<=768&&(C.preventDefault(),E.style.display=E.style.display==="block"?"none":"block")})})),document.querySelectorAll('a[href^="#"]').forEach(y=>{y.addEventListener("click",function(_){const v=this.getAttribute("href");if(v&&v!=="#"&&v.length>1){_.preventDefault();const f=document.querySelector(v);f&&f.scrollIntoView({behavior:"smooth",block:"start"})}})});let r=0;const i=document.querySelector(".header");window.addEventListener("scroll",function(){clearTimeout(t),t=setTimeout(function(){const y=window.pageYOffset||document.documentElement.scrollTop;y>r&&y>100?i.style.transform="translateY(-100%)":i.style.transform="translateY(0)",r=y},10)});function s(){document.querySelectorAll("video").forEach(_=>{const v=_.getBoundingClientRect(),f=v.top>=-100&&v.bottom<=window.innerHeight+100;!f&&!_.paused?_.pause():f&&_.paused&&_.play().catch(E=>console.log("Video play failed:",E))})}window.addEventListener("scroll",function(){clearTimeout(e),e=setTimeout(s,100)}),document.querySelectorAll("video").forEach(y=>{y.addEventListener("error",function(){console.log("Error loading video:",this.src),this.style.display="none"}),y.addEventListener("loadeddata",function(){this.play().catch(_=>console.log("Auto-play prevented:",_))})}),document.querySelectorAll(".contact-form").forEach(y=>{y.addEventListener("submit",function(_){_.preventDefault();const v=new FormData(this),f=v.get("nombre")||"",E=v.get("apellido")||"",C=v.get("email")||"",M=v.get("telefono")||"",I=v.get("motivo")||"",w=v.get("mensaje")||"";let S=`*Nueva consulta desde SER AGRO*

`;S+=`*Nombre:* ${f} ${E}
`,S+=`*Email:* ${C}
`,S+=`*Teléfono:* ${M}
`,S+=`*Motivo:* ${I}
`,w&&(S+=`*Mensaje:* ${w}
`);const L=`https://api.whatsapp.com/send?phone=5493465432688&text=${encodeURIComponent(S)}`,A=this.querySelector('button[type="submit"]'),q=A.textContent;A.textContent="✓ Enviando...",A.style.background="#4CAF50",setTimeout(()=>{window.open(L,"_blank"),this.reset(),A.textContent=q,A.style.background="",alert("¡Formulario enviado! Te redirigimos a WhatsApp para completar el envío.")},1e3)})});const p={threshold:.1,rootMargin:"0px 0px -50px 0px"},g=new IntersectionObserver(function(y){y.forEach(_=>{_.isIntersecting&&(_.target.style.opacity="1",_.target.style.transform="translateY(0)")})},p);document.querySelectorAll(".feature-card, .adapt-item, .operation-card, .ext-feature").forEach(y=>{y.style.opacity="0",y.style.transform="translateY(20px)",y.style.transition="opacity 0.6s ease, transform 0.6s ease",g.observe(y)})});const Ke={webhookUrl:"https://primary-production-396f31.up.railway.app/webhook/mavilda-chat",position:"bottom-right",primaryColor:"#2E7D32",secondaryColor:"#1B5E20",autoGreeting:!0};let an=!1,Gn=null,zr=!1;function Rs(){return"session_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}function Fs(){document.body.insertAdjacentHTML("beforeend",`
        <div id="mavilda-chat-container">
            <!-- Ventana de chat -->
            <div id="mavilda-chat-window" style="display: none;">
                <div id="mavilda-chat-header">
                    <div class="header-content">
                        <img src="/imagenes/mavilda-logo.png" alt="Mavilda" class="chat-logo">
                        <div class="header-text">
                            <strong>Mavilda</strong>
                            <span>Ingeniera Agrónoma</span>
                        </div>
                    </div>
                    <button id="mavilda-chat-close" aria-label="Cerrar chat">✕</button>
                </div>

                <div id="mavilda-chat-messages"></div>

                <div id="mavilda-chat-input-container">
                    <input 
                        type="text" 
                        id="mavilda-chat-input" 
                        placeholder="Escribí tu mensaje..."
                        autocomplete="off"
                    />
                    <button id="mavilda-chat-send" aria-label="Enviar mensaje">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="white">
                            <path d="M2 10L18 2L12 18L10 12L2 10Z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    `)}function qs(){const t=`
        #mavilda-chat-container {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            z-index: 100000;
        }

        #mavilda-chat-window {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 380px;
            max-width: calc(100vw - 40px);
            height: 600px;
            max-height: calc(100vh - 120px);
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            z-index: 100000;
            overflow: hidden;
        }

        #mavilda-chat-header {
            background: ${Ke.primaryColor};
            color: white;
            padding: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-content {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .chat-logo {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: white;
            padding: 4px;
            object-fit: contain;
        }

        .header-text {
            display: flex;
            flex-direction: column;
        }

        .header-text strong {
            font-size: 16px;
        }

        .header-text span {
            font-size: 12px;
            opacity: 0.9;
        }

        #mavilda-chat-close {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.2s;
        }

        #mavilda-chat-close:hover {
            background: rgba(255,255,255,0.1);
        }

        #mavilda-chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
            background: #f5f5f5;
        }

        .chat-message {
            margin-bottom: 12px;
            display: flex;
            flex-direction: column;
        }

        .chat-message.user {
            align-items: flex-end;
        }

        .chat-message.bot {
            align-items: flex-start;
        }

        .message-bubble {
            max-width: 80%;
            padding: 10px 14px;
            border-radius: 16px;
            word-wrap: break-word;
            line-height: 1.4;
        }

        .chat-message.user .message-bubble {
            background: ${Ke.primaryColor};
            color: white;
            border-bottom-right-radius: 4px;
        }

        .chat-message.bot .message-bubble {
            background: white;
            color: #333;
            border-bottom-left-radius: 4px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .message-bubble strong {
            font-weight: 600;
        }

        .message-bubble ul, .message-bubble ol {
            margin: 8px 0;
            padding-left: 20px;
        }

        .message-bubble li {
            margin: 4px 0;
        }

        #mavilda-chat-input-container {
            display: flex;
            padding: 12px;
            background: white;
            border-top: 1px solid #e0e0e0;
            gap: 8px;
        }

        #mavilda-chat-input {
            flex: 1;
            padding: 10px 14px;
            border: 1px solid #ddd;
            border-radius: 20px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.2s;
        }

        #mavilda-chat-input:focus {
            border-color: ${Ke.primaryColor};
        }

        #mavilda-chat-send {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: ${Ke.primaryColor};
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        #mavilda-chat-send:hover {
            background: ${Ke.secondaryColor};
            transform: scale(1.05);
        }

        #mavilda-chat-send:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .typing-indicator {
            display: flex;
            gap: 4px;
            padding: 10px 14px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #999;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-10px);
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            #mavilda-chat-window {
                width: calc(100vw - 32px);
                height: calc(100vh - 180px);
                max-height: 280px;
                left: 50%;
                right: auto;
                transform: translateX(-50%);
                bottom: calc(90px + env(safe-area-inset-bottom, 0px));
            }
        }
    `,e=document.createElement("style");e.textContent=t,document.head.appendChild(e)}function St(t,e=!1){const n=document.getElementById("mavilda-chat-messages"),o=document.createElement("div");o.className=`chat-message ${e?"user":"bot"}`;const r=document.createElement("div");r.className="message-bubble",r.innerHTML=Vs(t),o.appendChild(r),n.appendChild(o),n.scrollTop=n.scrollHeight}function Vs(t){return t=t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),t=t.replace(/^[•\-]\s/gm,"• "),t=t.replace(/\n/g,"<br>"),t}function Us(){const t=document.getElementById("mavilda-chat-messages"),e=document.createElement("div");e.className="chat-message bot",e.id="typing-indicator";const n=document.createElement("div");n.className="typing-indicator",n.innerHTML='<div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>',e.appendChild(n),t.appendChild(e),t.scrollTop=t.scrollHeight}function Wr(){const t=document.getElementById("typing-indicator");t&&t.remove()}async function Yn(t){if(!t.trim())return;const e=document.getElementById("mavilda-chat-input"),n=document.getElementById("mavilda-chat-send");t!=="Hola"&&St(t,!0),e.disabled=!0,n.disabled=!0,Us();try{const r=await(await fetch(Ke.webhookUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t,sessionId:Gn})})).json();Wr(),r.output?St(r.output):r.response?St(r.response):St("Lo siento, hubo un error. ¿Podrías intentar de nuevo?")}catch(o){console.error("Error al enviar mensaje:",o),Wr(),St("Ups, hubo un problema de conexión. Por favor intentá de nuevo.")}finally{e.value="",e.disabled=!1,n.disabled=!1,e.focus()}}function Bs(){!zr&&Ke.autoGreeting&&(zr=!0,setTimeout(()=>{Yn("Hola")},500))}function $s(){const t=document.getElementById("mavilda-chat-window");an||(an=!0,t.style.display="flex",document.getElementById("mavilda-chat-input").focus(),Bs())}function $o(){const t=document.getElementById("mavilda-chat-window");an&&(an=!1,t.style.display="none",window.UnifiedContact&&typeof window.UnifiedContact.show=="function"&&window.UnifiedContact.show())}function Js(){const t=document.getElementById("mavilda-chat-close"),e=document.getElementById("mavilda-chat-input"),n=document.getElementById("mavilda-chat-send");t.addEventListener("click",$o),n.addEventListener("click",()=>{const o=e.value;o.trim()&&Yn(o)}),e.addEventListener("keypress",o=>{if(o.key==="Enter"&&!o.shiftKey){o.preventDefault();const r=e.value;r.trim()&&Yn(r)}})}function Hr(){Gn=Rs(),Fs(),qs(),Js(),console.log("✅ Mavilda Chat Widget cargado correctamente"),console.log("Session ID:",Gn)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Hr):Hr();window.MavildaChat={open:$s,close:$o};function Gs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ys(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function o(){var r=!1;try{r=this instanceof o}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(o){var r=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(n,o,r.get?r:{enumerable:!0,get:function(){return t[o]}})}),n}var st={};function Kr(t,e){if(t==null)return{};var n,o,r=(function(s,l){if(s==null)return{};var d={};for(var p in s)if({}.hasOwnProperty.call(s,p)){if(l.indexOf(p)!==-1)continue;d[p]=s[p]}return d})(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G(t){return G=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(t)}function Jo(t){var e=(function(n,o){if(G(n)!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,o);if(G(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)})(t,"string");return G(e)=="symbol"?e:e+""}function Qr(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Jo(o.key),o)}}function de(t,e,n){return e&&Qr(t.prototype,e),n&&Qr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function vn(t,e){if(e&&(G(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n})(t)}function we(t){return we=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},we(t)}function Dt(t,e){return Dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},Dt(t,e)}function yn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dt(t,e)}function Ce(t,e,n){return(e=Jo(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xr(t,e,n,o,r,i,s){try{var l=t[i](s),d=l.value}catch(p){return void n(p)}l.done?e(d):Promise.resolve(d).then(o,r)}function F(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function s(d){Xr(i,o,r,s,l,"next",d)}function l(d){Xr(i,o,r,s,l,"throw",d)}s(void 0)}))}}function Zr(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function ie(t,e){return(function(n){if(Array.isArray(n))return n})(t)||(function(n,o){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,l,d,p=[],g=!0,b=!1;try{if(l=(r=r.call(n)).next,o===0){if(Object(r)!==r)return;g=!1}else for(;!(g=(i=l.call(r)).done)&&(p.push(i.value),p.length!==o);g=!0);}catch(y){b=!0,s=y}finally{try{if(!g&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(b)throw s}}return p}})(t,e)||(function(n,o){if(n){if(typeof n=="string")return Zr(n,o);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zr(n,o):void 0}})(t,e)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function zs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ei,qt={exports:{}},zn=(function(){if(ei)return qt.exports;ei=1;var t,e=typeof Reflect=="object"?Reflect:null,n=e&&typeof e.apply=="function"?e.apply:function(f,E,C){return Function.prototype.apply.call(f,E,C)};t=e&&typeof e.ownKeys=="function"?e.ownKeys:Object.getOwnPropertySymbols?function(f){return Object.getOwnPropertyNames(f).concat(Object.getOwnPropertySymbols(f))}:function(f){return Object.getOwnPropertyNames(f)};var o=Number.isNaN||function(f){return f!=f};function r(){r.init.call(this)}qt.exports=r,qt.exports.once=function(f,E){return new Promise((function(C,M){function I(S){f.removeListener(E,w),M(S)}function w(){typeof f.removeListener=="function"&&f.removeListener("error",I),C([].slice.call(arguments))}v(f,E,w,{once:!0}),E!=="error"&&(function(S,T,L){typeof S.on=="function"&&v(S,"error",T,L)})(f,I,{once:!0})}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var i=10;function s(f){if(typeof f!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof f)}function l(f){return f._maxListeners===void 0?r.defaultMaxListeners:f._maxListeners}function d(f,E,C,M){var I,w,S,T;if(s(C),(w=f._events)===void 0?(w=f._events=Object.create(null),f._eventsCount=0):(w.newListener!==void 0&&(f.emit("newListener",E,C.listener?C.listener:C),w=f._events),S=w[E]),S===void 0)S=w[E]=C,++f._eventsCount;else if(typeof S=="function"?S=w[E]=M?[C,S]:[S,C]:M?S.unshift(C):S.push(C),(I=l(f))>0&&S.length>I&&!S.warned){S.warned=!0;var L=new Error("Possible EventEmitter memory leak detected. "+S.length+" "+String(E)+" listeners added. Use emitter.setMaxListeners() to increase limit");L.name="MaxListenersExceededWarning",L.emitter=f,L.type=E,L.count=S.length,T=L,console&&console.warn&&console.warn(T)}return f}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(f,E,C){var M={fired:!1,wrapFn:void 0,target:f,type:E,listener:C},I=p.bind(M);return I.listener=C,M.wrapFn=I,I}function b(f,E,C){var M=f._events;if(M===void 0)return[];var I=M[E];return I===void 0?[]:typeof I=="function"?C?[I.listener||I]:[I]:C?(function(w){for(var S=new Array(w.length),T=0;T<S.length;++T)S[T]=w[T].listener||w[T];return S})(I):_(I,I.length)}function y(f){var E=this._events;if(E!==void 0){var C=E[f];if(typeof C=="function")return 1;if(C!==void 0)return C.length}return 0}function _(f,E){for(var C=new Array(E),M=0;M<E;++M)C[M]=f[M];return C}function v(f,E,C,M){if(typeof f.on=="function")M.once?f.once(E,C):f.on(E,C);else{if(typeof f.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof f);f.addEventListener(E,(function I(w){M.once&&f.removeEventListener(E,I),C(w)}))}}return Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(f){if(typeof f!="number"||f<0||o(f))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+f+".");i=f}}),r.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(f){if(typeof f!="number"||f<0||o(f))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+f+".");return this._maxListeners=f,this},r.prototype.getMaxListeners=function(){return l(this)},r.prototype.emit=function(f){for(var E=[],C=1;C<arguments.length;C++)E.push(arguments[C]);var M=f==="error",I=this._events;if(I!==void 0)M=M&&I.error===void 0;else if(!M)return!1;if(M){var w;if(E.length>0&&(w=E[0]),w instanceof Error)throw w;var S=new Error("Unhandled error."+(w?" ("+w.message+")":""));throw S.context=w,S}var T=I[f];if(T===void 0)return!1;if(typeof T=="function")n(T,this,E);else{var L=T.length,A=_(T,L);for(C=0;C<L;++C)n(A[C],this,E)}return!0},r.prototype.addListener=function(f,E){return d(this,f,E,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(f,E){return d(this,f,E,!0)},r.prototype.once=function(f,E){return s(E),this.on(f,g(this,f,E)),this},r.prototype.prependOnceListener=function(f,E){return s(E),this.prependListener(f,g(this,f,E)),this},r.prototype.removeListener=function(f,E){var C,M,I,w,S;if(s(E),(M=this._events)===void 0)return this;if((C=M[f])===void 0)return this;if(C===E||C.listener===E)--this._eventsCount==0?this._events=Object.create(null):(delete M[f],M.removeListener&&this.emit("removeListener",f,C.listener||E));else if(typeof C!="function"){for(I=-1,w=C.length-1;w>=0;w--)if(C[w]===E||C[w].listener===E){S=C[w].listener,I=w;break}if(I<0)return this;I===0?C.shift():(function(T,L){for(;L+1<T.length;L++)T[L]=T[L+1];T.pop()})(C,I),C.length===1&&(M[f]=C[0]),M.removeListener!==void 0&&this.emit("removeListener",f,S||E)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(f){var E,C,M;if((C=this._events)===void 0)return this;if(C.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):C[f]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete C[f]),this;if(arguments.length===0){var I,w=Object.keys(C);for(M=0;M<w.length;++M)(I=w[M])!=="removeListener"&&this.removeAllListeners(I);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(E=C[f])=="function")this.removeListener(f,E);else if(E!==void 0)for(M=E.length-1;M>=0;M--)this.removeListener(f,E[M]);return this},r.prototype.listeners=function(f){return b(this,f,!0)},r.prototype.rawListeners=function(f){return b(this,f,!1)},r.listenerCount=function(f,E){return typeof f.listenerCount=="function"?f.listenerCount(E):y.call(f,E)},r.prototype.listenerCount=y,r.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]},qt.exports})(),Vt=zs(zn),ti=Object.prototype.hasOwnProperty;function ni(t,e,n){for(n of t.keys())if(ae(n,e))return n}function ae(t,e){var n,o,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((o=t.length)===e.length)for(;o--&&ae(t[o],e[o]););return o===-1}if(n===Set){if(t.size!==e.size)return!1;for(o of t)if((r=o)&&typeof r=="object"&&!(r=ni(e,r))||!e.has(r))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(o of t)if((r=o[0])&&typeof r=="object"&&!(r=ni(e,r))||!ae(o[1],e.get(r)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((o=t.byteLength)===e.byteLength)for(;o--&&t.getInt8(o)===e.getInt8(o););return o===-1}if(ArrayBuffer.isView(t)){if((o=t.byteLength)===e.byteLength)for(;o--&&t[o]===e[o];);return o===-1}if(!n||typeof t=="object"){for(n in o=0,t)if(ti.call(t,n)&&++o&&!ti.call(e,n)||!(n in e)||!ae(t[n],e[n]))return!1;return Object.keys(e).length===o}}return t!=t&&e!=e}const Ws={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},Go={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},Q={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},oe={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},xe={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class O{static getFirstMatch(e,n){const o=n.match(e);return o&&o.length>0&&o[1]||""}static getSecondMatch(e,n){const o=n.match(e);return o&&o.length>1&&o[2]||""}static matchAndReturnConst(e,n,o){if(e.test(n))return o}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const n=e.split(".").splice(0,2).map((o=>parseInt(o,10)||0));if(n.push(0),n[0]===10)switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const n=e.split(".").splice(0,2).map((o=>parseInt(o,10)||0));if(n.push(0),!(n[0]===1&&n[1]<5))return n[0]===1&&n[1]<6?"Cupcake":n[0]===1&&n[1]>=6?"Donut":n[0]===2&&n[1]<2?"Eclair":n[0]===2&&n[1]===2?"Froyo":n[0]===2&&n[1]>2?"Gingerbread":n[0]===3?"Honeycomb":n[0]===4&&n[1]<1?"Ice Cream Sandwich":n[0]===4&&n[1]<4?"Jelly Bean":n[0]===4&&n[1]>=4?"KitKat":n[0]===5?"Lollipop":n[0]===6?"Marshmallow":n[0]===7?"Nougat":n[0]===8?"Oreo":n[0]===9?"Pie":void 0}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,n,o=!1){const r=O.getVersionPrecision(e),i=O.getVersionPrecision(n);let s=Math.max(r,i),l=0;const d=O.map([e,n],(p=>{const g=s-O.getVersionPrecision(p),b=p+new Array(g+1).join(".0");return O.map(b.split("."),(y=>new Array(20-y.length).join("0")+y)).reverse()}));for(o&&(l=s-Math.min(r,i)),s-=1;s>=l;){if(d[0][s]>d[1][s])return 1;if(d[0][s]===d[1][s]){if(s===l)return 0;s-=1}else if(d[0][s]<d[1][s])return-1}}static map(e,n){const o=[];let r;if(Array.prototype.map)return Array.prototype.map.call(e,n);for(r=0;r<e.length;r+=1)o.push(n(e[r]));return o}static find(e,n){let o,r;if(Array.prototype.find)return Array.prototype.find.call(e,n);for(o=0,r=e.length;o<r;o+=1){const i=e[o];if(n(i,o))return i}}static assign(e,...n){const o=e;let r,i;if(Object.assign)return Object.assign(e,...n);for(r=0,i=n.length;r<i;r+=1){const s=n[r];typeof s=="object"&&s!==null&&Object.keys(s).forEach((l=>{o[l]=s[l]}))}return e}static getBrowserAlias(e){return Ws[e]}static getBrowserTypeByAlias(e){return Go[e]||""}}const z=/version\/(\d+(\.?_?\d+)+)/i,Hs=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},n=O.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||O.getFirstMatch(z,t);return n&&(e.version=n),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},n=O.getFirstMatch(z,t)||O.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},n=O.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||O.getFirstMatch(z,t);return n&&(e.version=n),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},n=O.getFirstMatch(z,t)||O.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},n=O.getFirstMatch(z,t)||O.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},n=O.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||O.getFirstMatch(z,t);return n&&(e.version=n),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},n=O.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||O.getFirstMatch(z,t);return n&&(e.version=n),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},n=O.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||O.getFirstMatch(z,t);return n&&(e.version=n),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},n=O.getFirstMatch(z,t)||O.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},n=O.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||O.getFirstMatch(z,t);return n&&(e.version=n),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},n=O.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||O.getFirstMatch(z,t);return n&&(e.version=n),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},n=O.getFirstMatch(z,t)||O.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},n=O.getFirstMatch(z,t)||O.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},n=O.getFirstMatch(z,t)||O.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},n=O.getFirstMatch(z,t)||O.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},n=O.getFirstMatch(z,t)||O.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},n=O.getFirstMatch(z,t)||O.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},n=O.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||O.getFirstMatch(z,t);return n&&(e.version=n),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},n=O.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||O.getFirstMatch(z,t);return n&&(e.version=n),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},n=O.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},n=O.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},n=O.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},n=O.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},n=O.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},n=O.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return n&&(e.version=n),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},n=O.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},n=O.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},n=O.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},n=O.getFirstMatch(z,t)||O.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},n=O.getFirstMatch(z,t)||O.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},n=O.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},n=O.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||O.getFirstMatch(z,t);return n&&(e.version=n),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},n=O.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||O.getFirstMatch(z,t);return n&&(e.version=n),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},n=O.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},n=O.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},n=O.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},n=O.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||O.getFirstMatch(z,t);return n&&(e.version=n),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},n=O.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},n=O.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e={name:"Android Browser"},n=O.getFirstMatch(z,t);return n&&(e.version=n),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},n=O.getFirstMatch(z,t);return n&&(e.version=n),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},n=O.getFirstMatch(z,t);return n&&(e.version=n),e}},{test:[/.*/i],describe(t){const e=t.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:O.getFirstMatch(e,t),version:O.getSecondMatch(e,t)}}}];var Ks=[{test:[/Roku\/DVP/],describe(t){const e=O.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:oe.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=O.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:oe.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=O.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),n=O.getWindowsVersionName(e);return{name:oe.Windows,version:e,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:oe.iOS},n=O.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return n&&(e.version=n),e}},{test:[/macintosh/i],describe(t){const e=O.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),n=O.getMacOSVersionName(e),o={name:oe.MacOS,version:e};return n&&(o.versionName=n),o}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=O.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:oe.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e=O.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),n=O.getAndroidVersionName(e),o={name:oe.Android,version:e};return n&&(o.versionName=n),o}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=O.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),n={name:oe.WebOS};return e&&e.length&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=O.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||O.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||O.getFirstMatch(/\bbb(\d+)/i,t);return{name:oe.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=O.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:oe.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=O.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:oe.Tizen,version:e}}},{test:[/linux/i],describe:()=>({name:oe.Linux})},{test:[/CrOS/],describe:()=>({name:oe.ChromeOS})},{test:[/PlayStation 4/],describe(t){const e=O.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:oe.PlayStation4,version:e}}}],Qs=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(t){const e=O.getFirstMatch(/(can-l01)/i,t)&&"Nova",n={type:Q.mobile,vendor:"Huawei"};return e&&(n.model=e),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:Q.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:Q.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:Q.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:Q.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:Q.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:Q.tablet})},{test(t){const e=t.test(/ipod|iphone/i),n=t.test(/like (ipod|iphone)/i);return e&&!n},describe(t){const e=O.getFirstMatch(/(ipod|iphone)/i,t);return{type:Q.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:Q.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:Q.mobile})},{test:t=>t.getBrowserName(!0)==="blackberry",describe:()=>({type:Q.mobile,vendor:"BlackBerry"})},{test:t=>t.getBrowserName(!0)==="bada",describe:()=>({type:Q.mobile})},{test:t=>t.getBrowserName()==="windows phone",describe:()=>({type:Q.mobile,vendor:"Microsoft"})},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe:()=>({type:Q.tablet})},{test:t=>t.getOSName(!0)==="android",describe:()=>({type:Q.mobile})},{test:t=>t.getOSName(!0)==="macos",describe:()=>({type:Q.desktop,vendor:"Apple"})},{test:t=>t.getOSName(!0)==="windows",describe:()=>({type:Q.desktop})},{test:t=>t.getOSName(!0)==="linux",describe:()=>({type:Q.desktop})},{test:t=>t.getOSName(!0)==="playstation 4",describe:()=>({type:Q.tv})},{test:t=>t.getOSName(!0)==="roku",describe:()=>({type:Q.tv})}],Xs=[{test:t=>t.getBrowserName(!0)==="microsoft edge",describe(t){if(/\sedg\//i.test(t))return{name:xe.Blink};const e=O.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:xe.EdgeHTML,version:e}}},{test:[/trident/i],describe(t){const e={name:xe.Trident},n=O.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:t=>t.test(/presto/i),describe(t){const e={name:xe.Presto},n=O.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=t.test(/gecko/i),n=t.test(/like gecko/i);return e&&!n},describe(t){const e={name:xe.Gecko},n=O.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:xe.Blink})},{test:[/(apple)?webkit/i],describe(t){const e={name:xe.WebKit},n=O.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}}];class ri{constructor(e,n=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},n!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=O.find(Hs,(n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some((o=>this.test(o)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=O.find(Ks,(n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some((o=>this.test(o)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:n}=this.getOS();return e?String(n).toLowerCase()||"":n||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:n}=this.getPlatform();return e?String(n).toLowerCase()||"":n||""}parsePlatform(){this.parsedResult.platform={};const e=O.find(Qs,(n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some((o=>this.test(o)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=O.find(Xs,(n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some((o=>this.test(o)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return O.assign({},this.parsedResult)}satisfies(e){const n={};let o=0;const r={};let i=0;if(Object.keys(e).forEach((s=>{const l=e[s];typeof l=="string"?(r[s]=l,i+=1):typeof l=="object"&&(n[s]=l,o+=1)})),o>0){const s=Object.keys(n),l=O.find(s,(p=>this.isOS(p)));if(l){const p=this.satisfies(n[l]);if(p!==void 0)return p}const d=O.find(s,(p=>this.isPlatform(p)));if(d){const p=this.satisfies(n[d]);if(p!==void 0)return p}}if(i>0){const s=Object.keys(r),l=O.find(s,(d=>this.isBrowser(d,!0)));if(l!==void 0)return this.compareVersion(r[l])}}isBrowser(e,n=!1){const o=this.getBrowserName().toLowerCase();let r=e.toLowerCase();const i=O.getBrowserTypeByAlias(r);return n&&i&&(r=i.toLowerCase()),r===o}compareVersion(e){let n=[0],o=e,r=!1;const i=this.getBrowserVersion();if(typeof i=="string")return e[0]===">"||e[0]==="<"?(o=e.substr(1),e[1]==="="?(r=!0,o=e.substr(2)):n=[],e[0]===">"?n.push(1):n.push(-1)):e[0]==="="?o=e.substr(1):e[0]==="~"&&(r=!0,o=e.substr(1)),n.indexOf(O.compareVersions(i,o,r))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,n=!1){return this.isBrowser(e,n)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some((n=>this.is(n)))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Zs{static getParser(e,n=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new ri(e,n)}static parse(e){return new ri(e).getResult()}static get BROWSER_MAP(){return Go}static get ENGINE_MAP(){return xe}static get OS_MAP(){return oe}static get PLATFORMS_MAP(){return Q}}function bn(){return Date.now()+Math.random().toString()}function Et(){throw new Error("Method must be implemented in subclass")}function Yo(t,e){return e!=null&&e.proxyUrl?e.proxyUrl+(e.proxyUrl.slice(-1)==="/"?"":"/")+t.substring(8):t}function sn(t){return t!=null&&t.callObjectBundleUrlOverride?t.callObjectBundleUrlOverride:Yo("https://c.daily.co/call-machine/versioned/".concat("0.84.0","/static/call-machine-object-bundle.js"),t)}function cn(t){try{new URL(t)}catch{return!1}return!0}const K=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Xe="8.55.0",Y=globalThis;function ln(t,e,n){const o=Y,r=o.__SENTRY__=o.__SENTRY__||{},i=r[Xe]=r[Xe]||{};return i[t]||(i[t]=e())}const ot=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Wn=["debug","info","warn","error","log","assert","trace"],un={};function xt(t){if(!("console"in Y))return t();const e=Y.console,n={},o=Object.keys(un);o.forEach((r=>{const i=un[r];n[r]=e[r],e[r]=i}));try{return t()}finally{o.forEach((r=>{e[r]=n[r]}))}}const V=ln("logger",(function(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return ot?Wn.forEach((n=>{e[n]=(...o)=>{t&&xt((()=>{Y.console[n](`Sentry Logger [${n}]:`,...o)}))}})):Wn.forEach((n=>{e[n]=()=>{}})),e})),Qe="?",ii=/\(error: (.*)\)/,oi=/captureMessage|captureException/;function Ut(t){return t[t.length-1]||{}}const ai="<anonymous>";function qe(t){try{return t&&typeof t=="function"&&t.name||ai}catch{return ai}}function si(t){const e=t.exception;if(e){const n=[];try{return e.values.forEach((o=>{o.stacktrace.frames&&n.push(...o.stacktrace.frames)})),n}catch{return}}}const Zt={},ci={};function Ze(t,e){Zt[t]=Zt[t]||[],Zt[t].push(e)}function et(t,e){if(!ci[t]){ci[t]=!0;try{e()}catch(n){ot&&V.error(`Error while instrumenting ${t}`,n)}}}function _e(t,e){const n=t&&Zt[t];if(n)for(const o of n)try{o(e)}catch(r){ot&&V.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${qe(o)}
Error:`,r)}}let Cn=null;function ec(){Cn=Y.onerror,Y.onerror=function(t,e,n,o,r){return _e("error",{column:o,error:r,line:n,msg:t,url:e}),!!Cn&&Cn.apply(this,arguments)},Y.onerror.__SENTRY_INSTRUMENTED__=!0}let Tn=null;function tc(){Tn=Y.onunhandledrejection,Y.onunhandledrejection=function(t){return _e("unhandledrejection",t),!Tn||Tn.apply(this,arguments)},Y.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function _n(){return Ar(Y),Y}function Ar(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||Xe,e[Xe]=e[Xe]||{}}const zo=Object.prototype.toString;function Or(t){switch(zo.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return tt(t,Error)}}function vt(t,e){return zo.call(t)===`[object ${e}]`}function Wo(t){return vt(t,"ErrorEvent")}function li(t){return vt(t,"DOMError")}function Pe(t){return vt(t,"String")}function Mr(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function Hn(t){return t===null||Mr(t)||typeof t!="object"&&typeof t!="function"}function pt(t){return vt(t,"Object")}function wn(t){return typeof Event<"u"&&tt(t,Event)}function Sn(t){return!!(t&&t.then&&typeof t.then=="function")}function tt(t,e){try{return t instanceof e}catch{return!1}}function Ho(t){return!(typeof t!="object"||t===null||!t.__isVue&&!t._isVue)}const Pr=Y;function Ko(t,e={}){if(!t)return"<unknown>";try{let n=t;const o=5,r=[];let i=0,s=0;const l=" > ",d=l.length;let p;const g=Array.isArray(e)?e:e.keyAttrs,b=!Array.isArray(e)&&e.maxStringLength||80;for(;n&&i++<o&&(p=nc(n,g),!(p==="html"||i>1&&s+r.length*d+p.length>=b));)r.push(p),s+=p.length,n=n.parentNode;return r.reverse().join(l)}catch{return"<unknown>"}}function nc(t,e){const n=t,o=[];if(!n||!n.tagName)return"";if(Pr.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}o.push(n.tagName.toLowerCase());const r=e&&e.length?e.filter((s=>n.getAttribute(s))).map((s=>[s,n.getAttribute(s)])):null;if(r&&r.length)r.forEach((s=>{o.push(`[${s[0]}="${s[1]}"]`)}));else{n.id&&o.push(`#${n.id}`);const s=n.className;if(s&&Pe(s)){const l=s.split(/\s+/);for(const d of l)o.push(`.${d}`)}}const i=["aria-label","type","name","title","alt"];for(const s of i){const l=n.getAttribute(s);l&&o.push(`[${s}="${l}"]`)}return o.join("")}function ut(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function ui(t,e){if(!Array.isArray(t))return"";const n=[];for(let o=0;o<t.length;o++){const r=t[o];try{Ho(r)?n.push("[VueViewModel]"):n.push(String(r))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function rc(t,e,n=!1){return!!Pe(t)&&(vt(e,"RegExp")?e.test(t):!!Pe(e)&&(n?t===e:t.includes(e)))}function Bt(t,e=[],n=!1){return e.some((o=>rc(t,o,n)))}function le(t,e,n){if(!(e in t))return;const o=t[e],r=n(o);typeof r=="function"&&Qo(r,o);try{t[e]=r}catch{ot&&V.log(`Failed to replace method "${e}" in object`,t)}}function nt(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{ot&&V.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function Qo(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,nt(t,"__sentry_original__",e)}catch{}}function Ir(t){return t.__sentry_original__}function Xo(t){if(Or(t))return{message:t.message,name:t.name,stack:t.stack,...pi(t)};if(wn(t)){const e={type:t.type,target:di(t.target),currentTarget:di(t.currentTarget),...pi(t)};return typeof CustomEvent<"u"&&tt(t,CustomEvent)&&(e.detail=t.detail),e}return t}function di(t){try{return e=t,typeof Element<"u"&&tt(e,Element)?Ko(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}var e}function pi(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}return{}}function fe(t){return Kn(t,new Map)}function Kn(t,e){if((function(n){if(!pt(n))return!1;try{const o=Object.getPrototypeOf(n).constructor.name;return!o||o==="Object"}catch{return!0}})(t)){const n=e.get(t);if(n!==void 0)return n;const o={};e.set(t,o);for(const r of Object.getOwnPropertyNames(t))t[r]!==void 0&&(o[r]=Kn(t[r],e));return o}if(Array.isArray(t)){const n=e.get(t);if(n!==void 0)return n;const o=[];return e.set(t,o),t.forEach((r=>{o.push(Kn(r,e))})),o}return t}function jt(){return Date.now()/1e3}const De=(function(){const{performance:t}=Y;if(!t||!t.now)return jt;const e=Date.now()-t.now(),n=t.timeOrigin==null?e:t.timeOrigin;return()=>(n+t.now())/1e3})();function me(){const t=Y,e=t.crypto||t.msCrypto;let n=()=>16*Math.random();try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(n=()=>{const o=new Uint8Array(1);return e.getRandomValues(o),o[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,(o=>(o^(15&n())>>o/4).toString(16)))}function Zo(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function Ne(t){const{message:e,event_id:n}=t;if(e)return e;const o=Zo(t);return o?o.type&&o.value?`${o.type}: ${o.value}`:o.type||o.value||n||"<unknown>":n||"<unknown>"}function Qn(t,e,n){const o=t.exception=t.exception||{},r=o.values=o.values||[],i=r[0]=r[0]||{};i.value||(i.value=e||""),i.type||(i.type="Error")}function ht(t,e){const n=Zo(t);if(!n)return;const o=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...o,...e},e&&"data"in e){const r={...o&&o.data,...e.data};n.mechanism.data=r}}function hi(t){if((function(e){try{return e.__sentry_captured__}catch{}})(t))return!0;try{nt(t,"__sentry_captured__",!0)}catch{}return!1}var Oe;function rt(t){return new he((e=>{e(t)}))}function dn(t){return new he(((e,n)=>{n(t)}))}(()=>{const{performance:t}=Y;!t||!t.now||(t.now(),t.timing&&t.timing.navigationStart)})(),(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(Oe||(Oe={}));class he{constructor(e){he.prototype.__init.call(this),he.prototype.__init2.call(this),he.prototype.__init3.call(this),he.prototype.__init4.call(this),this._state=Oe.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}then(e,n){return new he(((o,r)=>{this._handlers.push([!1,i=>{if(e)try{o(e(i))}catch(s){r(s)}else o(i)},i=>{if(n)try{o(n(i))}catch(s){r(s)}else r(i)}]),this._executeHandlers()}))}catch(e){return this.then((n=>n),e)}finally(e){return new he(((n,o)=>{let r,i;return this.then((s=>{i=!1,r=s,e&&e()}),(s=>{i=!0,r=s,e&&e()})).then((()=>{i?o(r):n(r)}))}))}__init(){this._resolve=e=>{this._setResult(Oe.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Oe.REJECTED,e)}}__init3(){this._setResult=(e,n)=>{this._state===Oe.PENDING&&(Sn(n)?n.then(this._resolve,this._reject):(this._state=e,this._value=n,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Oe.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((n=>{n[0]||(this._state===Oe.RESOLVED&&n[1](this._value),this._state===Oe.REJECTED&&n[2](this._value),n[0]=!0)}))}}}function ic(t){const e=De(),n={sid:me(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>(function(o){return fe({sid:`${o.sid}`,init:o.init,started:new Date(1e3*o.started).toISOString(),timestamp:new Date(1e3*o.timestamp).toISOString(),status:o.status,errors:o.errors,did:typeof o.did=="number"||typeof o.did=="string"?`${o.did}`:void 0,duration:o.duration,abnormal_mechanism:o.abnormal_mechanism,attrs:{release:o.release,environment:o.environment,ip_address:o.ipAddress,user_agent:o.userAgent}})})(n)};return t&&ft(n,t),n}function ft(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),t.did||e.did||(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||De(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:me()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function fi(){return me()}function Xn(){return me().substring(16)}function En(t,e,n=2){if(!e||typeof e!="object"||n<=0)return e;if(t&&e&&Object.keys(e).length===0)return t;const o={...t};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=En(o[r],e[r],n-1));return o}const Zn="_sentrySpan";function mi(t,e){e?nt(t,Zn,e):delete t[Zn]}function gi(t){return t[Zn]}class Dr{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:fi(),spanId:Xn()}}clone(){const e=new Dr;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,mi(e,gi(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&ft(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e,[o,r]=n instanceof Ve?[n.getScopeData(),n.getRequestSession()]:pt(n)?[e,e.requestSession]:[],{tags:i,extra:s,user:l,contexts:d,level:p,fingerprint:g=[],propagationContext:b}=o||{};return this._tags={...this._tags,...i},this._extra={...this._extra,...s},this._contexts={...this._contexts,...d},l&&Object.keys(l).length&&(this._user=l),p&&(this._level=p),g.length&&(this._fingerprint=g),b&&(this._propagationContext=b),r&&(this._requestSession=r),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,mi(this,void 0),this._attachments=[],this.setPropagationContext({traceId:fi()}),this._notifyScopeListeners(),this}addBreadcrumb(e,n){const o=typeof n=="number"?n:100;if(o<=0)return this;const r={timestamp:jt(),...e};return this._breadcrumbs.push(r),this._breadcrumbs.length>o&&(this._breadcrumbs=this._breadcrumbs.slice(-o),this._client&&this._client.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:gi(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=En(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext={spanId:Xn(),...e},this}getPropagationContext(){return this._propagationContext}captureException(e,n){const o=n&&n.event_id?n.event_id:me();if(!this._client)return V.warn("No client configured on scope - will not capture exception!"),o;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...n,event_id:o},this),o}captureMessage(e,n,o){const r=o&&o.event_id?o.event_id:me();if(!this._client)return V.warn("No client configured on scope - will not capture message!"),r;const i=new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:i,...o,event_id:r},this),r}captureEvent(e,n){const o=n&&n.event_id?n.event_id:me();return this._client?(this._client.captureEvent(e,{...n,event_id:o},this),o):(V.warn("No client configured on scope - will not capture event!"),o)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}const Ve=Dr;class oc{constructor(e,n){let o,r;o=e||new Ve,r=n||new Ve,this._stack=[{scope:o}],this._isolationScope=r}withScope(e){const n=this._pushScope();let o;try{o=e(n)}catch(r){throw this._popScope(),r}return Sn(o)?o.then((r=>(this._popScope(),r)),(r=>{throw this._popScope(),r})):(this._popScope(),o)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function mt(){const t=Ar(_n());return t.stack=t.stack||new oc(ln("defaultCurrentScope",(()=>new Ve)),ln("defaultIsolationScope",(()=>new Ve)))}function ac(t){return mt().withScope(t)}function sc(t,e){const n=mt();return n.withScope((()=>(n.getStackTop().scope=t,e(t))))}function vi(t){return mt().withScope((()=>t(mt().getIsolationScope())))}function Lr(t){const e=Ar(t);return e.acs?e.acs:{withIsolationScope:vi,withScope:ac,withSetScope:sc,withSetIsolationScope:(n,o)=>vi(o),getCurrentScope:()=>mt().getScope(),getIsolationScope:()=>mt().getIsolationScope()}}function at(){return Lr(_n()).getCurrentScope()}function Nt(){return Lr(_n()).getIsolationScope()}function re(){return at().getClient()}function cc(t){const e=t.getPropagationContext(),{traceId:n,spanId:o,parentSpanId:r}=e;return fe({trace_id:n,span_id:o,parent_span_id:r})}function lc(t){const e=t._sentryMetrics;if(!e)return;const n={};for(const[,[o,r]]of e)(n[o]||(n[o]=[])).push(fe(r));return n}const uc=/^sentry-/;function dc(t){const e=(function(o){if(!(!o||!Pe(o)&&!Array.isArray(o)))return Array.isArray(o)?o.reduce(((r,i)=>{const s=yi(i);return Object.entries(s).forEach((([l,d])=>{r[l]=d})),r}),{}):yi(o)})(t);if(!e)return;const n=Object.entries(e).reduce(((o,[r,i])=>(r.match(uc)&&(o[r.slice(7)]=i),o)),{});return Object.keys(n).length>0?n:void 0}function yi(t){return t.split(",").map((e=>e.split("=").map((n=>decodeURIComponent(n.trim()))))).reduce(((e,[n,o])=>(n&&o&&(e[n]=o),e)),{})}let bi=!1;function pc(t){const{spanId:e,traceId:n,isRemote:o}=t.spanContext();return fe({parent_span_id:o?e:xr(t).parent_span_id,span_id:o?Xn():e,trace_id:n})}function _i(t){return typeof t=="number"?wi(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?wi(t.getTime()):De()}function wi(t){return t>9999999999?t/1e3:t}function xr(t){if((function(e){return typeof e.getSpanJSON=="function"})(t))return t.getSpanJSON();try{const{spanId:e,traceId:n}=t.spanContext();if((function(o){const r=o;return!!(r.attributes&&r.startTime&&r.name&&r.endTime&&r.status)})(t)){const{attributes:o,startTime:r,name:i,endTime:s,parentSpanId:l,status:d}=t;return fe({span_id:e,trace_id:n,data:o,description:i,parent_span_id:l,start_timestamp:_i(r),timestamp:_i(s)||void 0,status:hc(d),op:o["sentry.op"],origin:o["sentry.origin"],_metrics_summary:lc(t)})}return{span_id:e,trace_id:n}}catch{return{}}}function hc(t){if(t&&t.code!==0)return t.code===1?"ok":t.message||"unknown_error"}function ea(t){return t._sentryRootSpan||t}function fc(){bi||(xt((()=>{console.warn("[Sentry] Deprecation warning: Returning null from `beforeSendSpan` will be disallowed from SDK version 9.0.0 onwards. The callback will only support mutating spans. To drop certain spans, configure the respective integrations directly.")})),bi=!0)}const jr="production";function ta(t,e){const n=e.getOptions(),{publicKey:o}=e.getDsn()||{},r=fe({environment:n.environment||jr,release:n.release,public_key:o,trace_id:t});return e.emit("createDsc",r),r}function mc(t){const e=re();if(!e)return{};const n=ea(t),o=n._frozenDsc;if(o)return o;const r=n.spanContext().traceState,i=r&&r.get("sentry.dsc"),s=i&&dc(i);if(s)return s;const l=ta(t.spanContext().traceId,e),d=xr(n),p=d.data||{},g=p["sentry.sample_rate"];g!=null&&(l.sample_rate=`${g}`);const b=p["sentry.source"],y=d.description;return b!=="url"&&y&&(l.transaction=y),(function(_){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const v=re(),f=v&&v.getOptions();return!!f&&(f.enableTracing||"tracesSampleRate"in f||"tracesSampler"in f)})()&&(l.sampled=String((function(_){const{traceFlags:v}=_.spanContext();return v===1})(n))),e.emit("createDsc",l,n),l}const gc=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function pn(t,e=!1){const{host:n,path:o,pass:r,port:i,projectId:s,protocol:l,publicKey:d}=t;return`${l}://${d}${e&&r?`:${r}`:""}@${n}${i?`:${i}`:""}/${o&&`${o}/`}${s}`}function Si(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function vc(t){const e=typeof t=="string"?(function(n){const o=gc.exec(n);if(!o)return void xt((()=>{console.error(`Invalid Sentry Dsn: ${n}`)}));const[r,i,s="",l="",d="",p=""]=o.slice(1);let g="",b=p;const y=b.split("/");if(y.length>1&&(g=y.slice(0,-1).join("/"),b=y.pop()),b){const _=b.match(/^\d+/);_&&(b=_[0])}return Si({host:l,pass:s,path:g,projectId:b,port:d,protocol:r,publicKey:i})})(t):Si(t);if(e&&(function(n){if(!ot)return!0;const{port:o,projectId:r,protocol:i}=n;return!(["protocol","publicKey","host","projectId"].find((s=>!n[s]&&(V.error(`Invalid Sentry Dsn: ${s} missing`),!0)))||(r.match(/^\d+$/)?(function(s){return s==="http"||s==="https"})(i)?o&&isNaN(parseInt(o,10))&&(V.error(`Invalid Sentry Dsn: Invalid port ${o}`),1):(V.error(`Invalid Sentry Dsn: Invalid protocol ${i}`),1):(V.error(`Invalid Sentry Dsn: Invalid projectId ${r}`),1)))})(e))return e}function Me(t,e=100,n=1/0){try{return er("",t,e,n)}catch(o){return{ERROR:`**non-serializable** (${o})`}}}function na(t,e=3,n=102400){const o=Me(t,e);return r=o,(function(i){return~-encodeURI(i).split(/%..|./).length})(JSON.stringify(r))>n?na(t,e-1,n):o;var r}function er(t,e,n=1/0,o=1/0,r=(function(){const i=typeof WeakSet=="function",s=i?new WeakSet:[];return[function(l){if(i)return!!s.has(l)||(s.add(l),!1);for(let d=0;d<s.length;d++)if(s[d]===l)return!0;return s.push(l),!1},function(l){if(i)s.delete(l);else for(let d=0;d<s.length;d++)if(s[d]===l){s.splice(d,1);break}}]})()){const[i,s]=r;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const l=(function(_,v){try{if(_==="domain"&&v&&typeof v=="object"&&v._events)return"[Domain]";if(_==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&v===global)return"[Global]";if(typeof window<"u"&&v===window)return"[Window]";if(typeof document<"u"&&v===document)return"[Document]";if(Ho(v))return"[VueViewModel]";if(pt(f=v)&&"nativeEvent"in f&&"preventDefault"in f&&"stopPropagation"in f)return"[SyntheticEvent]";if(typeof v=="number"&&!Number.isFinite(v))return`[${v}]`;if(typeof v=="function")return`[Function: ${qe(v)}]`;if(typeof v=="symbol")return`[${String(v)}]`;if(typeof v=="bigint")return`[BigInt: ${String(v)}]`;const E=(function(C){const M=Object.getPrototypeOf(C);return M?M.constructor.name:"null prototype"})(v);return/^HTML(\w*)Element$/.test(E)?`[HTMLElement: ${E}]`:`[object ${E}]`}catch(E){return`**non-serializable** (${E})`}var f})(t,e);if(!l.startsWith("[object "))return l;if(e.__sentry_skip_normalization__)return e;const d=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(d===0)return l.replace("object ","");if(i(e))return"[Circular ~]";const p=e;if(p&&typeof p.toJSON=="function")try{return er("",p.toJSON(),d-1,o,r)}catch{}const g=Array.isArray(e)?[]:{};let b=0;const y=Xo(e);for(const _ in y){if(!Object.prototype.hasOwnProperty.call(y,_))continue;if(b>=o){g[_]="[MaxProperties ~]";break}const v=y[_];g[_]=er(_,v,d-1,o,r),b++}return s(e),g}function Lt(t,e=[]){return[t,e]}function yc(t,e){const[n,o]=t;return[n,[...o,e]]}function Ei(t,e){const n=t[1];for(const o of n)if(e(o,o[0].type))return!0;return!1}function tr(t){return Y.__SENTRY__&&Y.__SENTRY__.encodePolyfill?Y.__SENTRY__.encodePolyfill(t):new TextEncoder().encode(t)}function bc(t){const[e,n]=t;let o=JSON.stringify(e);function r(i){typeof o=="string"?o=typeof i=="string"?o+i:[tr(o),i]:o.push(typeof i=="string"?tr(i):i)}for(const i of n){const[s,l]=i;if(r(`
${JSON.stringify(s)}
`),typeof l=="string"||l instanceof Uint8Array)r(l);else{let d;try{d=JSON.stringify(l)}catch{d=JSON.stringify(Me(l))}r(d)}}return typeof o=="string"?o:(function(i){const s=i.reduce(((p,g)=>p+g.length),0),l=new Uint8Array(s);let d=0;for(const p of i)l.set(p,d),d+=p.length;return l})(o)}function _c(t){const e=typeof t.data=="string"?tr(t.data):t.data;return[fe({type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),e]}const wc={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket",raw_security:"security"};function ki(t){return wc[t]}function ra(t){if(!t||!t.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function Sc(t,e,n,o){const r=ra(n),i=t.type&&t.type!=="replay_event"?t.type:"event";(function(l,d){d&&(l.sdk=l.sdk||{},l.sdk.name=l.sdk.name||d.name,l.sdk.version=l.sdk.version||d.version,l.sdk.integrations=[...l.sdk.integrations||[],...d.integrations||[]],l.sdk.packages=[...l.sdk.packages||[],...d.packages||[]])})(t,n&&n.sdk);const s=(function(l,d,p,g){const b=l.sdkProcessingMetadata&&l.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:l.event_id,sent_at:new Date().toISOString(),...d&&{sdk:d},...!!p&&g&&{dsn:pn(g)},...b&&{trace:fe({...b})}}})(t,r,o,e);return delete t.sdkProcessingMetadata,Lt(s,[[{type:i},t]])}function nr(t,e,n,o=0){return new he(((r,i)=>{const s=t[o];if(e===null||typeof s!="function")r(e);else{const l=s({...e},n);K&&s.id&&l===null&&V.log(`Event processor "${s.id}" dropped event`),Sn(l)?l.then((d=>nr(t,d,n,o+1).then(r))).then(null,i):nr(t,l,n,o+1).then(r).then(null,i)}}))}let $t,Ci,An;function Ec(t,e){const{fingerprint:n,span:o,breadcrumbs:r,sdkProcessingMetadata:i}=e;(function(s,l){const{extra:d,tags:p,user:g,contexts:b,level:y,transactionName:_}=l,v=fe(d);v&&Object.keys(v).length&&(s.extra={...v,...s.extra});const f=fe(p);f&&Object.keys(f).length&&(s.tags={...f,...s.tags});const E=fe(g);E&&Object.keys(E).length&&(s.user={...E,...s.user});const C=fe(b);C&&Object.keys(C).length&&(s.contexts={...C,...s.contexts}),y&&(s.level=y),_&&s.type!=="transaction"&&(s.transaction=_)})(t,e),o&&(function(s,l){s.contexts={trace:pc(l),...s.contexts},s.sdkProcessingMetadata={dynamicSamplingContext:mc(l),...s.sdkProcessingMetadata};const d=ea(l),p=xr(d).description;p&&!s.transaction&&s.type==="transaction"&&(s.transaction=p)})(t,o),(function(s,l){s.fingerprint=s.fingerprint?Array.isArray(s.fingerprint)?s.fingerprint:[s.fingerprint]:[],l&&(s.fingerprint=s.fingerprint.concat(l)),s.fingerprint&&!s.fingerprint.length&&delete s.fingerprint})(t,n),(function(s,l){const d=[...s.breadcrumbs||[],...l];s.breadcrumbs=d.length?d:void 0})(t,r),(function(s,l){s.sdkProcessingMetadata={...s.sdkProcessingMetadata,...l}})(t,i)}function Ti(t,e){const{extra:n,tags:o,user:r,contexts:i,level:s,sdkProcessingMetadata:l,breadcrumbs:d,fingerprint:p,eventProcessors:g,attachments:b,propagationContext:y,transactionName:_,span:v}=e;Jt(t,"extra",n),Jt(t,"tags",o),Jt(t,"user",r),Jt(t,"contexts",i),t.sdkProcessingMetadata=En(t.sdkProcessingMetadata,l,2),s&&(t.level=s),_&&(t.transactionName=_),v&&(t.span=v),d.length&&(t.breadcrumbs=[...t.breadcrumbs,...d]),p.length&&(t.fingerprint=[...t.fingerprint,...p]),g.length&&(t.eventProcessors=[...t.eventProcessors,...g]),b.length&&(t.attachments=[...t.attachments,...b]),t.propagationContext={...t.propagationContext,...y}}function Jt(t,e,n){t[e]=En(t[e],n,1)}function kc(t,e,n,o,r,i){const{normalizeDepth:s=3,normalizeMaxBreadth:l=1e3}=t,d={...e,event_id:e.event_id||n.event_id||me(),timestamp:e.timestamp||jt()},p=n.integrations||t.integrations.map((v=>v.name));(function(v,f){const{environment:E,release:C,dist:M,maxValueLength:I=250}=f;v.environment=v.environment||E||jr,!v.release&&C&&(v.release=C),!v.dist&&M&&(v.dist=M),v.message&&(v.message=ut(v.message,I));const w=v.exception&&v.exception.values&&v.exception.values[0];w&&w.value&&(w.value=ut(w.value,I));const S=v.request;S&&S.url&&(S.url=ut(S.url,I))})(d,t),(function(v,f){f.length>0&&(v.sdk=v.sdk||{},v.sdk.integrations=[...v.sdk.integrations||[],...f])})(d,p),r&&r.emit("applyFrameMetadata",e),e.type===void 0&&(function(v,f){const E=(function(C){const M=Y._sentryDebugIds;if(!M)return{};const I=Object.keys(M);return An&&I.length===Ci||(Ci=I.length,An=I.reduce(((w,S)=>{$t||($t={});const T=$t[S];if(T)w[T[0]]=T[1];else{const L=C(S);for(let A=L.length-1;A>=0;A--){const q=L[A],R=q&&q.filename,H=M[S];if(R&&H){w[R]=H,$t[S]=[R,H];break}}}return w}),{})),An})(f);try{v.exception.values.forEach((C=>{C.stacktrace.frames.forEach((M=>{E&&M.filename&&(M.debug_id=E[M.filename])}))}))}catch{}})(d,t.stackParser);const g=(function(v,f){if(!f)return v;const E=v?v.clone():new Ve;return E.update(f),E})(o,n.captureContext);n.mechanism&&ht(d,n.mechanism);const b=r?r.getEventProcessors():[],y=ln("globalScope",(()=>new Ve)).getScopeData();i&&Ti(y,i.getScopeData()),g&&Ti(y,g.getScopeData());const _=[...n.attachments||[],...y.attachments];return _.length&&(n.attachments=_),Ec(d,y),nr([...b,...y.eventProcessors],d,n).then((v=>(v&&(function(f){const E={};try{f.exception.values.forEach((M=>{M.stacktrace.frames.forEach((I=>{I.debug_id&&(I.abs_path?E[I.abs_path]=I.debug_id:I.filename&&(E[I.filename]=I.debug_id),delete I.debug_id)}))}))}catch{}if(Object.keys(E).length===0)return;f.debug_meta=f.debug_meta||{},f.debug_meta.images=f.debug_meta.images||[];const C=f.debug_meta.images;Object.entries(E).forEach((([M,I])=>{C.push({type:"sourcemap",code_file:M,debug_id:I})}))})(v),typeof s=="number"&&s>0?(function(f,E,C){if(!f)return null;const M={...f,...f.breadcrumbs&&{breadcrumbs:f.breadcrumbs.map((I=>({...I,...I.data&&{data:Me(I.data,E,C)}})))},...f.user&&{user:Me(f.user,E,C)},...f.contexts&&{contexts:Me(f.contexts,E,C)},...f.extra&&{extra:Me(f.extra,E,C)}};return f.contexts&&f.contexts.trace&&M.contexts&&(M.contexts.trace=f.contexts.trace,f.contexts.trace.data&&(M.contexts.trace.data=Me(f.contexts.trace.data,E,C))),f.spans&&(M.spans=f.spans.map((I=>({...I,...I.data&&{data:Me(I.data,E,C)}})))),f.contexts&&f.contexts.flags&&M.contexts&&(M.contexts.flags=Me(f.contexts.flags,3,C)),M})(v,s,l):v)))}function Ai(t,e){return at().captureEvent(t,e)}function Oi(t){const e=re(),n=Nt(),o=at(),{release:r,environment:i=jr}=e&&e.getOptions()||{},{userAgent:s}=Y.navigator||{},l=ic({release:r,environment:i,user:o.getUser()||n.getUser(),...s&&{userAgent:s},...t}),d=n.getSession();return d&&d.status==="ok"&&ft(d,{status:"exited"}),ia(),n.setSession(l),o.setSession(l),l}function ia(){const t=Nt(),e=at(),n=e.getSession()||t.getSession();n&&(function(o,r){let i={};o.status==="ok"&&(i={status:"exited"}),ft(o,i)})(n),oa(),t.setSession(),e.setSession()}function oa(){const t=Nt(),e=at(),n=re(),o=e.getSession()||t.getSession();o&&n&&n.captureSession(o)}function Mi(t=!1){t?ia():oa()}function Cc(t,e,n){return e||`${(function(o){return`${(function(r){const i=r.protocol?`${r.protocol}:`:"",s=r.port?`:${r.port}`:"";return`${i}//${r.host}${s}${r.path?`/${r.path}`:""}/api/`})(o)}${o.projectId}/envelope/`})(t)}?${(function(o,r){const i={sentry_version:"7"};return o.publicKey&&(i.sentry_key=o.publicKey),r&&(i.sentry_client=`${r.name}/${r.version}`),new URLSearchParams(i).toString()})(t,n)}`}const Pi=[];function Ii(t,e){for(const n of e)n&&n.afterAllSetup&&n.afterAllSetup(t)}function Di(t,e,n){if(n[e.name])K&&V.log(`Integration skipped because it was already installed: ${e.name}`);else{if(n[e.name]=e,Pi.indexOf(e.name)===-1&&typeof e.setupOnce=="function"&&(e.setupOnce(),Pi.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),typeof e.preprocessEvent=="function"){const o=e.preprocessEvent.bind(e);t.on("preprocessEvent",((r,i)=>o(r,i,t)))}if(typeof e.processEvent=="function"){const o=e.processEvent.bind(e),r=Object.assign(((i,s)=>o(i,s,t)),{id:e.name});t.addEventProcessor(r)}K&&V.log(`Integration installed: ${e.name}`)}}class be extends Error{constructor(e,n="warn"){super(e),this.message=e,this.logLevel=n}}const Li="Not capturing exception because it's already been captured.";class Tc{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=vc(e.dsn):K&&V.warn("No DSN provided, client will not send events."),this._dsn){const o=Cc(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:o})}const n=["enableTracing","tracesSampleRate","tracesSampler"].find((o=>o in e&&e[o]==null));n&&xt((()=>{console.warn(`[Sentry] Deprecation warning: \`${n}\` is set to undefined, which leads to tracing being enabled. In v9, a value of \`undefined\` will result in tracing being disabled.`)}))}captureException(e,n,o){const r=me();if(hi(e))return K&&V.log(Li),r;const i={event_id:r,...n};return this._process(this.eventFromException(e,i).then((s=>this._captureEvent(s,i,o)))),i.event_id}captureMessage(e,n,o,r){const i={event_id:me(),...o},s=Mr(e)?e:String(e),l=Hn(e)?this.eventFromMessage(s,n,i):this.eventFromException(e,i);return this._process(l.then((d=>this._captureEvent(d,i,r)))),i.event_id}captureEvent(e,n,o){const r=me();if(n&&n.originalException&&hi(n.originalException))return K&&V.log(Li),r;const i={event_id:r,...n},s=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,i,s||o)),i.event_id}captureSession(e){typeof e.release!="string"?K&&V.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),ft(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(e).then((o=>n.flush(e).then((r=>o&&r))))):rt(!0)}close(e){return this.flush(e).then((n=>(this.getOptions().enabled=!1,this.emit("close"),n)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some((({name:e})=>e.startsWith("Spotlight"))))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const n=this._integrations[e.name];Di(this,e,this._integrations),n||Ii(this,[e])}sendEvent(e,n={}){this.emit("beforeSendEvent",e,n);let o=Sc(e,this._dsn,this._options._metadata,this._options.tunnel);for(const i of n.attachments||[])o=yc(o,_c(i));const r=this.sendEnvelope(o);r&&r.then((i=>this.emit("afterSendEvent",e,i)),null)}sendSession(e){const n=(function(o,r,i,s){const l=ra(i);return Lt({sent_at:new Date().toISOString(),...l&&{sdk:l},...!!s&&r&&{dsn:pn(r)}},["aggregates"in o?[{type:"sessions"},o]:[{type:"session"},o.toJSON()]])})(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(n)}recordDroppedEvent(e,n,o){if(this._options.sendClientReports){const r=typeof o=="number"?o:1,i=`${e}:${n}`;K&&V.log(`Recording outcome: "${i}"${r>1?` (${r} times)`:""}`),this._outcomes[i]=(this._outcomes[i]||0)+r}}on(e,n){const o=this._hooks[e]=this._hooks[e]||[];return o.push(n),()=>{const r=o.indexOf(n);r>-1&&o.splice(r,1)}}emit(e,...n){const o=this._hooks[e];o&&o.forEach((r=>r(...n)))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,(n=>(K&&V.error("Error while sending envelope:",n),n))):(K&&V.error("Transport disabled"),rt({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=(function(n,o){const r={};return o.forEach((i=>{i&&Di(n,i,r)})),r})(this,e),Ii(this,e)}_updateSessionFromEvent(e,n){let o=n.level==="fatal",r=!1;const i=n.exception&&n.exception.values;if(i){r=!0;for(const l of i){const d=l.mechanism;if(d&&d.handled===!1){o=!0;break}}}const s=e.status==="ok";(s&&e.errors===0||s&&o)&&(ft(e,{...o&&{status:"crashed"},errors:e.errors||Number(r||o)}),this.captureSession(e))}_isClientDoneProcessing(e){return new he((n=>{let o=0;const r=setInterval((()=>{this._numProcessing==0?(clearInterval(r),n(!0)):(o+=1,e&&o>=e&&(clearInterval(r),n(!1)))}),1)}))}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,n,o=at(),r=Nt()){const i=this.getOptions(),s=Object.keys(this._integrations);return!n.integrations&&s.length>0&&(n.integrations=s),this.emit("preprocessEvent",e,n),e.type||r.setLastEventId(e.event_id||n.event_id),kc(i,e,n,o,this,r).then((l=>{if(l===null)return l;l.contexts={trace:cc(o),...l.contexts};const d=(function(p,g){const b=g.getPropagationContext();return b.dsc||ta(b.traceId,p)})(this,o);return l.sdkProcessingMetadata={dynamicSamplingContext:d,...l.sdkProcessingMetadata},l}))}_captureEvent(e,n={},o){return this._processEvent(e,n,o).then((r=>r.event_id),(r=>{K&&(r instanceof be&&r.logLevel==="log"?V.log(r.message):V.warn(r))}))}_processEvent(e,n,o){const r=this.getOptions(),{sampleRate:i}=r,s=ji(e),l=xi(e),d=e.type||"error",p=`before send for type \`${d}\``,g=i===void 0?void 0:(function(_){if(typeof _=="boolean")return Number(_);const v=typeof _=="string"?parseFloat(_):_;if(!(typeof v!="number"||isNaN(v)||v<0||v>1))return v;K&&V.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(_)} of type ${JSON.stringify(typeof _)}.`)})(i);if(l&&typeof g=="number"&&Math.random()>g)return this.recordDroppedEvent("sample_rate","error",e),dn(new be(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const b=d==="replay_event"?"replay":d,y=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,n,o,y).then((_=>{if(_===null)throw this.recordDroppedEvent("event_processor",b,e),new be("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return _;const v=(function(f,E,C,M){const{beforeSend:I,beforeSendTransaction:w,beforeSendSpan:S}=E;if(xi(C)&&I)return I(C,M);if(ji(C)){if(C.spans&&S){const T=[];for(const L of C.spans){const A=S(L);A?T.push(A):(fc(),f.recordDroppedEvent("before_send","span"))}C.spans=T}if(w){if(C.spans){const T=C.spans.length;C.sdkProcessingMetadata={...C.sdkProcessingMetadata,spanCountBeforeProcessing:T}}return w(C,M)}}return C})(this,r,_,n);return(function(f,E){const C=`${E} must return \`null\` or a valid event.`;if(Sn(f))return f.then((M=>{if(!pt(M)&&M!==null)throw new be(C);return M}),(M=>{throw new be(`${E} rejected with ${M}`)}));if(!pt(f)&&f!==null)throw new be(C);return f})(v,p)})).then((_=>{if(_===null){if(this.recordDroppedEvent("before_send",b,e),s){const E=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",E)}throw new be(`${p} returned \`null\`, will not send event.`,"log")}const v=o&&o.getSession();if(!s&&v&&this._updateSessionFromEvent(v,_),s){const E=(_.sdkProcessingMetadata&&_.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(_.spans?_.spans.length:0);E>0&&this.recordDroppedEvent("before_send","span",E)}const f=_.transaction_info;if(s&&f&&_.transaction!==e.transaction){const E="custom";_.transaction_info={...f,source:E}}return this.sendEvent(_,n),_})).then(null,(_=>{throw _ instanceof be?_:(this.captureException(_,{data:{__sentry__:!0},originalException:_}),new be(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${_}`))}))}_process(e){this._numProcessing++,e.then((n=>(this._numProcessing--,n)),(n=>(this._numProcessing--,n)))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map((([n,o])=>{const[r,i]=n.split(":");return{reason:r,category:i,quantity:o}}))}_flushOutcomes(){K&&V.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0)return void(K&&V.log("No outcomes to send"));if(!this._dsn)return void(K&&V.log("No dsn provided, will not send outcomes"));K&&V.log("Sending outcomes:",e);const n=(o=e,Lt((r=this._options.tunnel&&pn(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:i||jt(),discarded_events:o}]]));var o,r,i;this.sendEnvelope(n)}}function xi(t){return t.type===void 0}function ji(t){return t.type==="transaction"}function Ac(t){const e=[];function n(o){return e.splice(e.indexOf(o),1)[0]||Promise.resolve(void 0)}return{$:e,add:function(o){if(!(t===void 0||e.length<t))return dn(new be("Not adding Promise because buffer limit was reached."));const r=o();return e.indexOf(r)===-1&&e.push(r),r.then((()=>n(r))).then(null,(()=>n(r).then(null,(()=>{})))),r},drain:function(o){return new he(((r,i)=>{let s=e.length;if(!s)return r(!0);const l=setTimeout((()=>{o&&o>0&&r(!1)}),o);e.forEach((d=>{rt(d).then((()=>{--s||(clearTimeout(l),r(!0))}),i)}))}))}}}function Oc(t,{statusCode:e,headers:n},o=Date.now()){const r={...t},i=n&&n["x-sentry-rate-limits"],s=n&&n["retry-after"];if(i)for(const l of i.trim().split(",")){const[d,p,,,g]=l.split(":",5),b=parseInt(d,10),y=1e3*(isNaN(b)?60:b);if(p)for(const _ of p.split(";"))_==="metric_bucket"&&g&&!g.split(";").includes("custom")||(r[_]=o+y);else r.all=o+y}else s?r.all=o+(function(l,d=Date.now()){const p=parseInt(`${l}`,10);if(!isNaN(p))return 1e3*p;const g=Date.parse(`${l}`);return isNaN(g)?6e4:g-d})(s,o):e===429&&(r.all=o+6e4);return r}function Mc(t,e,n=Ac(t.bufferSize||64)){let o={};return{send:function(r){const i=[];if(Ei(r,((d,p)=>{const g=ki(p);if((function(b,y,_=Date.now()){return(function(v,f){return v[f]||v.all||0})(b,y)>_})(o,g)){const b=Ni(d,p);t.recordDroppedEvent("ratelimit_backoff",g,b)}else i.push(d)})),i.length===0)return rt({});const s=Lt(r[0],i),l=d=>{Ei(s,((p,g)=>{const b=Ni(p,g);t.recordDroppedEvent(d,ki(g),b)}))};return n.add((()=>e({body:bc(s)}).then((d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&K&&V.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),o=Oc(o,d),d)),(d=>{throw l("network_error"),d})))).then((d=>d),(d=>{if(d instanceof be)return K&&V.error("Skipped sending event because buffer is full."),l("queue_overflow"),rt({});throw d}))},flush:r=>n.drain(r)}}function Ni(t,e){if(e==="event"||e==="transaction")return Array.isArray(t)?t[1]:void 0}const Pc=100;function Ye(t,e){const n=re(),o=Nt();if(!n)return;const{beforeBreadcrumb:r=null,maxBreadcrumbs:i=Pc}=n.getOptions();if(i<=0)return;const s={timestamp:jt(),...t},l=r?xt((()=>r(s,e))):s;l!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",l,e),o.addBreadcrumb(l,i))}let Ri;const Fi=new WeakMap,Ic=()=>({name:"FunctionToString",setupOnce(){Ri=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=Ir(this),n=Fi.has(re())&&e!==void 0?e:this;return Ri.apply(n,t)}}catch{}},setup(t){Fi.set(t,!0)}}),Dc=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/],Lc=(t={})=>({name:"InboundFilters",processEvent(e,n,o){const r=o.getOptions(),i=(function(s={},l={}){return{allowUrls:[...s.allowUrls||[],...l.allowUrls||[]],denyUrls:[...s.denyUrls||[],...l.denyUrls||[]],ignoreErrors:[...s.ignoreErrors||[],...l.ignoreErrors||[],...s.disableErrorDefaults?[]:Dc],ignoreTransactions:[...s.ignoreTransactions||[],...l.ignoreTransactions||[]],ignoreInternal:s.ignoreInternal===void 0||s.ignoreInternal}})(t,r);return(function(s,l){return l.ignoreInternal&&(function(d){try{return d.exception.values[0].type==="SentryError"}catch{}return!1})(s)?(K&&V.warn(`Event dropped due to being internal Sentry Error.
Event: ${Ne(s)}`),!0):(function(d,p){return d.type||!p||!p.length?!1:(function(g){const b=[];g.message&&b.push(g.message);let y;try{y=g.exception.values[g.exception.values.length-1]}catch{}return y&&y.value&&(b.push(y.value),y.type&&b.push(`${y.type}: ${y.value}`)),b})(d).some((g=>Bt(g,p)))})(s,l.ignoreErrors)?(K&&V.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Ne(s)}`),!0):(function(d){return d.type||!d.exception||!d.exception.values||d.exception.values.length===0?!1:!d.message&&!d.exception.values.some((p=>p.stacktrace||p.type&&p.type!=="Error"||p.value))})(s)?(K&&V.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Ne(s)}`),!0):(function(d,p){if(d.type!=="transaction"||!p||!p.length)return!1;const g=d.transaction;return!!g&&Bt(g,p)})(s,l.ignoreTransactions)?(K&&V.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Ne(s)}`),!0):(function(d,p){if(!p||!p.length)return!1;const g=Gt(d);return!!g&&Bt(g,p)})(s,l.denyUrls)?(K&&V.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Ne(s)}.
Url: ${Gt(s)}`),!0):(function(d,p){if(!p||!p.length)return!0;const g=Gt(d);return!g||Bt(g,p)})(s,l.allowUrls)?!1:(K&&V.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Ne(s)}.
Url: ${Gt(s)}`),!0)})(e,i)?null:e}});function Gt(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch{}return e?(function(n=[]){for(let o=n.length-1;o>=0;o--){const r=n[o];if(r&&r.filename!=="<anonymous>"&&r.filename!=="[native code]")return r.filename||null}return null})(e):null}catch{return K&&V.error(`Cannot extract url for event ${Ne(t)}`),null}}function xc(t,e,n=250,o,r,i,s){if(!(i.exception&&i.exception.values&&s&&tt(s.originalException,Error)))return;const l=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;var d,p;l&&(i.exception.values=(d=rr(t,e,r,s.originalException,o,i.exception.values,l,0),p=n,d.map((g=>(g.value&&(g.value=ut(g.value,p)),g)))))}function rr(t,e,n,o,r,i,s,l){if(i.length>=n+1)return i;let d=[...i];if(tt(o[r],Error)){qi(s,l);const p=t(e,o[r]),g=d.length;Vi(p,r,g,l),d=rr(t,e,n,o[r],r,[p,...d],p,g)}return Array.isArray(o.errors)&&o.errors.forEach(((p,g)=>{if(tt(p,Error)){qi(s,l);const b=t(e,p),y=d.length;Vi(b,`errors[${g}]`,y,l),d=rr(t,e,n,p,r,[b,...d],b,y)}})),d}function qi(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function Vi(t,e,n,o){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:o}}function On(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",o=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:o,relative:e[5]+n+o}}function jc(){"console"in Y&&Wn.forEach((function(t){t in Y.console&&le(Y.console,t,(function(e){return un[t]=e,function(...n){_e("console",{args:n,level:t});const o=un[t];o&&o.apply(Y.console,n)}}))}))}function Nc(t){return t==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(t)?t:"log"}const Rc=()=>{let t;return{name:"Dedupe",processEvent(e){if(e.type)return e;try{if((function(n,o){return o?!!((function(r,i){const s=r.message,l=i.message;return!(!s&&!l||s&&!l||!s&&l||s!==l||!Bi(r,i)||!Ui(r,i))})(n,o)||(function(r,i){const s=$i(i),l=$i(r);return!(!s||!l||s.type!==l.type||s.value!==l.value||!Bi(r,i)||!Ui(r,i))})(n,o)):!1})(e,t))return K&&V.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}};function Ui(t,e){let n=si(t),o=si(e);if(!n&&!o)return!0;if(n&&!o||!n&&o||o.length!==n.length)return!1;for(let r=0;r<o.length;r++){const i=o[r],s=n[r];if(i.filename!==s.filename||i.lineno!==s.lineno||i.colno!==s.colno||i.function!==s.function)return!1}return!0}function Bi(t,e){let n=t.fingerprint,o=e.fingerprint;if(!n&&!o)return!0;if(n&&!o||!n&&o)return!1;try{return n.join("")===o.join("")}catch{return!1}}function $i(t){return t.exception&&t.exception.values&&t.exception.values[0]}function Ji(t){return t===void 0?void 0:t>=400&&t<500?"warning":t>=500?"error":void 0}const Mn=Y;function ir(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function Fc(){if(typeof EdgeRuntime=="string")return!0;if(!(function(){if(!("fetch"in Mn))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}})())return!1;if(ir(Mn.fetch))return!0;let t=!1;const e=Mn.document;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=ir(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){ot&&V.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}function qc(t,e){const n="fetch";Ze(n,t),et(n,(()=>(function(o,r=!1){r&&!Fc()||le(Y,"fetch",(function(i){return function(...s){const l=new Error,{method:d,url:p}=(function(b){if(b.length===0)return{method:"GET",url:""};if(b.length===2){const[_,v]=b;return{url:Gi(_),method:or(v,"method")?String(v.method).toUpperCase():"GET"}}const y=b[0];return{url:Gi(y),method:or(y,"method")?String(y.method).toUpperCase():"GET"}})(s),g={args:s,fetchData:{method:d,url:p},startTimestamp:1e3*De(),virtualError:l};return o||_e("fetch",{...g}),i.apply(Y,s).then((async b=>(o?o(b):_e("fetch",{...g,endTimestamp:1e3*De(),response:b}),b)),(b=>{throw _e("fetch",{...g,endTimestamp:1e3*De(),error:b}),Or(b)&&b.stack===void 0&&(b.stack=l.stack,nt(b,"framesToPop",1)),b}))}}))})(void 0,e)))}function or(t,e){return!!t&&typeof t=="object"&&!!t[e]}function Gi(t){return typeof t=="string"?t:t?or(t,"url")?t.url:t.toString?t.toString():"":""}const Yt=Y,Z=Y;let ar=0;function Yi(){return ar>0}function gt(t,e={}){if(!(function(o){return typeof o=="function"})(t))return t;try{const o=t.__sentry_wrapped__;if(o)return typeof o=="function"?o:t;if(Ir(t))return t}catch{return t}const n=function(...o){try{const r=o.map((i=>gt(i,e)));return t.apply(this,r)}catch(r){throw ar++,setTimeout((()=>{ar--})),(function(...i){const s=Lr(_n());if(i.length===2){const[l,d]=i;return l?s.withSetScope(l,d):s.withScope(d)}s.withScope(i[0])})((i=>{var s;i.addEventProcessor((l=>(e.mechanism&&(Qn(l,void 0),ht(l,e.mechanism)),l.extra={...l.extra,arguments:o},l))),s=r,at().captureException(s,void 0)})),r}};try{for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}catch{}Qo(n,t),nt(t,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>t.name})}catch{}return n}const kn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Nr(t,e){const n=Rr(t,e),o={type:Bc(e),value:$c(e)};return n.length&&(o.stacktrace={frames:n}),o.type===void 0&&o.value===""&&(o.value="Unrecoverable error caught"),o}function Vc(t,e,n,o){const r=re(),i=r&&r.getOptions().normalizeDepth,s=(function(p){for(const g in p)if(Object.prototype.hasOwnProperty.call(p,g)){const b=p[g];if(b instanceof Error)return b}})(e),l={__serialized__:na(e,i)};if(s)return{exception:{values:[Nr(t,s)]},extra:l};const d={exception:{values:[{type:wn(e)?e.constructor.name:o?"UnhandledRejection":"Error",value:Jc(e,{isUnhandledRejection:o})}]},extra:l};if(n){const p=Rr(t,n);p.length&&(d.exception.values[0].stacktrace={frames:p})}return d}function Pn(t,e){return{exception:{values:[Nr(t,e)]}}}function Rr(t,e){const n=e.stacktrace||e.stack||"",o=(function(i){return i&&Uc.test(i.message)?1:0})(e),r=(function(i){return typeof i.framesToPop=="number"?i.framesToPop:0})(e);try{return t(n,o,r)}catch{}return[]}const Uc=/Minified React error #\d+;/i;function aa(t){return typeof WebAssembly<"u"&&WebAssembly.Exception!==void 0&&t instanceof WebAssembly.Exception}function Bc(t){const e=t&&t.name;return!e&&aa(t)?t.message&&Array.isArray(t.message)&&t.message.length==2?t.message[0]:"WebAssembly.Exception":e}function $c(t){const e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:aa(t)&&Array.isArray(t.message)&&t.message.length==2?t.message[1]:e:"No error message"}function sr(t,e,n,o,r){let i;if(Wo(e)&&e.error)return Pn(t,e.error);if(li(e)||vt(e,"DOMException")){const s=e;if("stack"in e)i=Pn(t,e);else{const l=s.name||(li(s)?"DOMError":"DOMException"),d=s.message?`${l}: ${s.message}`:l;i=cr(t,d,n,o),Qn(i,d)}return"code"in s&&(i.tags={...i.tags,"DOMException.code":`${s.code}`}),i}return Or(e)?Pn(t,e):pt(e)||wn(e)?(i=Vc(t,e,n,r),ht(i,{synthetic:!0}),i):(i=cr(t,e,n,o),Qn(i,`${e}`),ht(i,{synthetic:!0}),i)}function cr(t,e,n,o){const r={};if(o&&n){const i=Rr(t,n);i.length&&(r.exception={values:[{value:e,stacktrace:{frames:i}}]}),ht(r,{synthetic:!0})}if(Mr(e)){const{__sentry_template_string__:i,__sentry_template_values__:s}=e;return r.logentry={message:i,params:s},r}return r.message=e,r}function Jc(t,{isUnhandledRejection:e}){const n=(function(r,i=40){const s=Object.keys(Xo(r));s.sort();const l=s[0];if(!l)return"[object has no keys]";if(l.length>=i)return ut(l,i);for(let d=s.length;d>0;d--){const p=s.slice(0,d).join(", ");if(!(p.length>i))return d===s.length?p:ut(p,i)}return""})(t),o=e?"promise rejection":"exception";return Wo(t)?`Event \`ErrorEvent\` captured as ${o} with message \`${t.message}\``:wn(t)?`Event \`${(function(r){try{const i=Object.getPrototypeOf(r);return i?i.constructor.name:void 0}catch{}})(t)}\` (type=${t.type}) captured as ${o}`:`Object captured as ${o} with keys: ${n}`}class Gc extends Tc{constructor(e){const n={parentSpanIsAlwaysRootSpan:!0,...e};(function(o,r,i=[r],s="npm"){const l=o._metadata||{};l.sdk||(l.sdk={name:`sentry.javascript.${r}`,packages:i.map((d=>({name:`${s}:@sentry/${d}`,version:Xe}))),version:Xe}),o._metadata=l})(n,"browser",["browser"],Z.SENTRY_SDK_SOURCE||"npm"),super(n),n.sendClientReports&&Z.document&&Z.document.addEventListener("visibilitychange",(()=>{Z.document.visibilityState==="hidden"&&this._flushOutcomes()}))}eventFromException(e,n){return(function(o,r,i,s){const l=sr(o,r,i&&i.syntheticException||void 0,s);return ht(l),l.level="error",i&&i.event_id&&(l.event_id=i.event_id),rt(l)})(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",o){return(function(r,i,s="info",l,d){const p=cr(r,i,l&&l.syntheticException||void 0,d);return p.level=s,l&&l.event_id&&(p.event_id=l.event_id),rt(p)})(this._options.stackParser,e,n,o,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(kn&&V.warn("SDK not enabled, will not capture user feedback."));const n=(function(o,{metadata:r,tunnel:i,dsn:s}){const l={event_id:o.event_id,sent_at:new Date().toISOString(),...r&&r.sdk&&{sdk:{name:r.sdk.name,version:r.sdk.version}},...!!i&&!!s&&{dsn:pn(s)}};return Lt(l,[(function(p){return[{type:"user_report"},p]})(o)])})(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(n)}_prepareEvent(e,n,o){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,o)}}const Yc=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,se=Y;let zi,In,Dn,zt;function zc(){if(!se.document)return;const t=_e.bind(null,"dom"),e=Wi(t,!0);se.document.addEventListener("click",e,!1),se.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach((n=>{const o=se[n],r=o&&o.prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(le(r,"addEventListener",(function(i){return function(s,l,d){if(s==="click"||s=="keypress")try{const p=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},g=p[s]=p[s]||{refCount:0};if(!g.handler){const b=Wi(t);g.handler=b,i.call(this,s,b,d)}g.refCount++}catch{}return i.call(this,s,l,d)}})),le(r,"removeEventListener",(function(i){return function(s,l,d){if(s==="click"||s=="keypress")try{const p=this.__sentry_instrumentation_handlers__||{},g=p[s];g&&(g.refCount--,g.refCount<=0&&(i.call(this,s,g.handler,d),g.handler=void 0,delete p[s]),Object.keys(p).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return i.call(this,s,l,d)}})))}))}function Wi(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const o=(function(i){try{return i.target}catch{return null}})(n);if((function(i,s){return i==="keypress"&&(!s||!s.tagName||s.tagName!=="INPUT"&&s.tagName!=="TEXTAREA"&&!s.isContentEditable)})(n.type,o))return;nt(n,"_sentryCaptured",!0),o&&!o._sentryId&&nt(o,"_sentryId",me());const r=n.type==="keypress"?"input":n.type;(function(i){if(i.type!==In)return!1;try{if(!i.target||i.target._sentryId!==Dn)return!1}catch{}return!0})(n)||(t({event:n,name:r,global:e}),In=n.type,Dn=o?o._sentryId:void 0),clearTimeout(zi),zi=se.setTimeout((()=>{Dn=void 0,In=void 0}),1e3)}}function sa(t){const e="history";Ze(e,t),et(e,Wc)}function Wc(){if(!(function(){const n=Yt.chrome,o=n&&n.app&&n.app.runtime,r="history"in Yt&&!!Yt.history.pushState&&!!Yt.history.replaceState;return!o&&r})())return;const t=se.onpopstate;function e(n){return function(...o){const r=o.length>2?o[2]:void 0;if(r){const i=zt,s=String(r);zt=s,_e("history",{from:i,to:s})}return n.apply(this,o)}}se.onpopstate=function(...n){const o=se.location.href,r=zt;if(zt=o,_e("history",{from:r,to:o}),t)try{return t.apply(this,n)}catch{}},le(se.history,"pushState",e),le(se.history,"replaceState",e)}const en={};function Hi(t){en[t]=void 0}const Tt="__sentry_xhr_v3__";function Hc(){if(!se.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(e,n,o){const r=new Error,i=1e3*De(),s=Pe(o[0])?o[0].toUpperCase():void 0,l=(function(p){if(Pe(p))return p;try{return p.toString()}catch{}})(o[1]);if(!s||!l)return e.apply(n,o);n[Tt]={method:s,url:l,request_headers:{}},s==="POST"&&l.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const d=()=>{const p=n[Tt];if(p&&n.readyState===4){try{p.status_code=n.status}catch{}_e("xhr",{endTimestamp:1e3*De(),startTimestamp:i,xhr:n,virtualError:r})}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply:(p,g,b)=>(d(),p.apply(g,b))}):n.addEventListener("readystatechange",d),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(p,g,b){const[y,_]=b,v=g[Tt];return v&&Pe(y)&&Pe(_)&&(v.request_headers[y.toLowerCase()]=_),p.apply(g,b)}}),e.apply(n,o)}}),t.send=new Proxy(t.send,{apply(e,n,o){const r=n[Tt];return r?(o[0]!==void 0&&(r.body=o[0]),_e("xhr",{startTimestamp:1e3*De(),xhr:n}),e.apply(n,o)):e.apply(n,o)}})}function Kc(t,e=(function(n){const o=en[n];if(o)return o;let r=se[n];if(ir(r))return en[n]=r.bind(se);const i=se.document;if(i&&typeof i.createElement=="function")try{const s=i.createElement("iframe");s.hidden=!0,i.head.appendChild(s);const l=s.contentWindow;l&&l[n]&&(r=l[n]),i.head.removeChild(s)}catch(s){Yc&&V.warn(`Could not create sandbox iframe for ${n} check, bailing to window.${n}: `,s)}return r&&(en[n]=r.bind(se))})("fetch")){let n=0,o=0;return Mc(t,(function(r){const i=r.body.length;n+=i,o++;const s={body:r.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:n<=6e4&&o<15,...t.fetchOptions};if(!e)return Hi("fetch"),dn("No fetch implementation available");try{return e(t.url,s).then((l=>(n-=i,o--,{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}})))}catch(l){return Hi("fetch"),n-=i,o--,dn(l)}}))}function Ln(t,e,n,o){const r={filename:t,function:e==="<anonymous>"?Qe:e,in_app:!0};return n!==void 0&&(r.lineno=n),o!==void 0&&(r.colno=o),r}const Qc=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Xc=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Zc=/\((\S*)(?::(\d+))(?::(\d+))\)/,el=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,tl=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,nl=(function(...t){const e=t.sort(((n,o)=>n[0]-o[0])).map((n=>n[1]));return(n,o=0,r=0)=>{const i=[],s=n.split(`
`);for(let l=o;l<s.length;l++){const d=s[l];if(d.length>1024)continue;const p=ii.test(d)?d.replace(ii,"$1"):d;if(!p.match(/\S*Error: /)){for(const g of e){const b=g(p);if(b){i.push(b);break}}if(i.length>=50+r)break}}return(function(l){if(!l.length)return[];const d=Array.from(l);return/sentryWrapped/.test(Ut(d).function||"")&&d.pop(),d.reverse(),oi.test(Ut(d).function||"")&&(d.pop(),oi.test(Ut(d).function||"")&&d.pop()),d.slice(0,50).map((p=>({...p,filename:p.filename||Ut(d).filename,function:p.function||Qe})))})(i.slice(r))}})([30,t=>{const e=Qc.exec(t);if(e){const[,o,r,i]=e;return Ln(o,Qe,+r,+i)}const n=Xc.exec(t);if(n){if(n[2]&&n[2].indexOf("eval")===0){const i=Zc.exec(n[2]);i&&(n[2]=i[1],n[3]=i[2],n[4]=i[3])}const[o,r]=Ki(n[1]||Qe,n[2]);return Ln(r,o,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],[50,t=>{const e=el.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const r=tl.exec(e[3]);r&&(e[1]=e[1]||"eval",e[3]=r[1],e[4]=r[2],e[5]="")}let n=e[3],o=e[1]||Qe;return[o,n]=Ki(o,n),Ln(n,o,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]),Ki=(t,e)=>{const n=t.indexOf("safari-extension")!==-1,o=t.indexOf("safari-web-extension")!==-1;return n||o?[t.indexOf("@")!==-1?t.split("@")[0]:Qe,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},Qi=1024,rl=(t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:"Breadcrumbs",setup(n){var o;e.console&&(function(r){const i="console";Ze(i,r),et(i,jc)})((function(r){return function(i){if(re()!==r)return;const s={category:"console",data:{arguments:i.args,logger:"console"},level:Nc(i.level),message:ui(i.args," ")};if(i.level==="assert"){if(i.args[0]!==!1)return;s.message=`Assertion failed: ${ui(i.args.slice(1)," ")||"console.assert"}`,s.data.arguments=i.args.slice(1)}Ye(s,{input:i.args,level:i.level})}})(n)),e.dom&&(o=(function(r,i){return function(s){if(re()!==r)return;let l,d,p=typeof i=="object"?i.serializeAttribute:void 0,g=typeof i=="object"&&typeof i.maxStringLength=="number"?i.maxStringLength:void 0;g&&g>Qi&&(kn&&V.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${g} was configured. Sentry will use 1024 instead.`),g=Qi),typeof p=="string"&&(p=[p]);try{const y=s.event,_=(function(v){return!!v&&!!v.target})(y)?y.target:y;l=Ko(_,{keyAttrs:p,maxStringLength:g}),d=(function(v){if(!Pr.HTMLElement)return null;let f=v;for(let E=0;E<5;E++){if(!f)return null;if(f instanceof HTMLElement){if(f.dataset.sentryComponent)return f.dataset.sentryComponent;if(f.dataset.sentryElement)return f.dataset.sentryElement}f=f.parentNode}return null})(_)}catch{l="<unknown>"}if(l.length===0)return;const b={category:`ui.${s.name}`,message:l};d&&(b.data={"ui.component_name":d}),Ye(b,{event:s.event,name:s.name,global:s.global})}})(n,e.dom),Ze("dom",o),et("dom",zc)),e.xhr&&(function(r){Ze("xhr",r),et("xhr",Hc)})((function(r){return function(i){if(re()!==r)return;const{startTimestamp:s,endTimestamp:l}=i,d=i.xhr[Tt];if(!s||!l||!d)return;const{method:p,url:g,status_code:b,body:y}=d,_={method:p,url:g,status_code:b},v={xhr:i.xhr,input:y,startTimestamp:s,endTimestamp:l};Ye({category:"xhr",data:_,type:"http",level:Ji(b)},v)}})(n)),e.fetch&&qc((function(r){return function(i){if(re()!==r)return;const{startTimestamp:s,endTimestamp:l}=i;if(l&&(!i.fetchData.url.match(/sentry_key/)||i.fetchData.method!=="POST"))if(i.error)Ye({category:"fetch",data:i.fetchData,level:"error",type:"http"},{data:i.error,input:i.args,startTimestamp:s,endTimestamp:l});else{const d=i.response,p={...i.fetchData,status_code:d&&d.status},g={input:i.args,response:d,startTimestamp:s,endTimestamp:l};Ye({category:"fetch",data:p,type:"http",level:Ji(p.status_code)},g)}}})(n)),e.history&&sa((function(r){return function(i){if(re()!==r)return;let s=i.from,l=i.to;const d=On(Z.location.href);let p=s?On(s):void 0;const g=On(l);p&&p.path||(p=d),d.protocol===g.protocol&&d.host===g.host&&(l=g.relative),d.protocol===p.protocol&&d.host===p.host&&(s=p.relative),Ye({category:"navigation",data:{from:s,to:l}})}})(n)),e.sentry&&n.on("beforeSendEvent",(function(r){return function(i){re()===r&&Ye({category:"sentry."+(i.type==="transaction"?"transaction":"event"),event_id:i.event_id,level:i.level,message:Ne(i)},{event:i})}})(n))}}},il=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],ol=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t};return{name:"BrowserApiErrors",setupOnce(){e.setTimeout&&le(Z,"setTimeout",Xi),e.setInterval&&le(Z,"setInterval",Xi),e.requestAnimationFrame&&le(Z,"requestAnimationFrame",al),e.XMLHttpRequest&&"XMLHttpRequest"in Z&&le(XMLHttpRequest.prototype,"send",sl);const n=e.eventTarget;n&&(Array.isArray(n)?n:il).forEach(cl)}}};function Xi(t){return function(...e){const n=e[0];return e[0]=gt(n,{mechanism:{data:{function:qe(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function al(t){return function(e){return t.apply(this,[gt(e,{mechanism:{data:{function:"requestAnimationFrame",handler:qe(t)},handled:!1,type:"instrument"}})])}}function sl(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((o=>{o in n&&typeof n[o]=="function"&&le(n,o,(function(r){const i={mechanism:{data:{function:o,handler:qe(r)},handled:!1,type:"instrument"}},s=Ir(r);return s&&(i.mechanism.data.handler=qe(s)),gt(r,i)}))})),t.apply(this,e)}}function cl(t){const e=Z[t],n=e&&e.prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(le(n,"addEventListener",(function(o){return function(r,i,s){try{typeof i.handleEvent=="function"&&(i.handleEvent=gt(i.handleEvent,{mechanism:{data:{function:"handleEvent",handler:qe(i),target:t},handled:!1,type:"instrument"}}))}catch{}return o.apply(this,[r,gt(i,{mechanism:{data:{function:"addEventListener",handler:qe(i),target:t},handled:!1,type:"instrument"}}),s])}})),le(n,"removeEventListener",(function(o){return function(r,i,s){try{const l=i.__sentry_wrapped__;l&&o.call(this,r,l,s)}catch{}return o.call(this,r,i,s)}})))}const ll=()=>({name:"BrowserSession",setupOnce(){Z.document!==void 0?(Oi({ignoreDuration:!0}),Mi(),sa((({from:t,to:e})=>{t!==void 0&&t!==e&&(Oi({ignoreDuration:!0}),Mi())}))):kn&&V.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.")}}),ul=(t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(n){e.onerror&&((function(o){(function(r){const i="error";Ze(i,r),et(i,ec)})((r=>{const{stackParser:i,attachStacktrace:s}=eo();if(re()!==o||Yi())return;const{msg:l,url:d,line:p,column:g,error:b}=r,y=(function(_,v,f,E){const C=_.exception=_.exception||{},M=C.values=C.values||[],I=M[0]=M[0]||{},w=I.stacktrace=I.stacktrace||{},S=w.frames=w.frames||[],T=E,L=f,A=Pe(v)&&v.length>0?v:(function(){try{return Pr.document.location.href}catch{return""}})();return S.length===0&&S.push({colno:T,filename:A,function:Qe,in_app:!0,lineno:L}),_})(sr(i,b||l,void 0,s,!1),d,p,g);y.level="error",Ai(y,{originalException:b,mechanism:{handled:!1,type:"onerror"}})}))})(n),Zi("onerror")),e.onunhandledrejection&&((function(o){(function(r){const i="unhandledrejection";Ze(i,r),et(i,tc)})((r=>{const{stackParser:i,attachStacktrace:s}=eo();if(re()!==o||Yi())return;const l=(function(p){if(Hn(p))return p;try{if("reason"in p)return p.reason;if("detail"in p&&"reason"in p.detail)return p.detail.reason}catch{}return p})(r),d=Hn(l)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(l)}`}]}}:sr(i,l,void 0,s,!0);d.level="error",Ai(d,{originalException:l,mechanism:{handled:!1,type:"onunhandledrejection"}})}))})(n),Zi("onunhandledrejection"))}}};function Zi(t){kn&&V.log(`Global Handler attached: ${t}`)}function eo(){const t=re();return t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const dl=()=>({name:"HttpContext",preprocessEvent(t){if(!Z.navigator&&!Z.location&&!Z.document)return;const e=t.request&&t.request.url||Z.location&&Z.location.href,{referrer:n}=Z.document||{},{userAgent:o}=Z.navigator||{},r={...t.request&&t.request.headers,...n&&{Referer:n},...o&&{"User-Agent":o}},i={...t.request,...e&&{url:e},headers:r};t.request=i}}),pl=(t={})=>{const e=t.limit||5,n=t.key||"cause";return{name:"LinkedErrors",preprocessEvent(o,r,i){const s=i.getOptions();xc(Nr,s.stackParser,s.maxValueLength,n,e,o,r)}}};var lr="new",to="loading",no="loaded",hn="joining-meeting",Fe="joined-meeting",je="left-meeting",Ae="error",hl="blocked",fl="off",ml="sendable",gl="loading",vl="interrupted",ca="playable",tn="unknown",la="full",yl="lobby",bl="none",ua="base",_l="*",wl="ejected",Sl="nbf-room",El="nbf-token",kl="exp-room",Cl="exp-token",ur="no-room",Tl="meeting-full",da="end-of-life",Al="not-allowed",pa="connection-error",Ol="cam-in-use",Ml="mic-in-use",Pl="cam-mic-in-use",Il="permissions",Dl="undefined-mediadevices",Ll="not-found",xl="constraints",jl="unknown",ha="iframe-ready-for-launch-config",fa="iframe-launch-config",ma="theme-updated",ga="loading",va="load-attempt-failed",dr="loaded",ya="started-camera",ba="camera-error",_a="joining-meeting",wa="joined-meeting",Sa="left-meeting",Ea="participant-joined",ka="participant-updated",Ca="participant-left",Ta="participant-counts-updated",Aa="access-state-updated",Oa="meeting-session-summary-updated",Ma="meeting-session-state-updated",Nl="meeting-session-data-error",Pa="waiting-participant-added",Ia="waiting-participant-updated",Da="waiting-participant-removed",La="track-started",xa="track-stopped",ja="transcription-started",Na="transcription-stopped",Ra="transcription-error",pr="recording-started",hr="recording-stopped",Fa="recording-stats",qa="recording-error",Va="recording-upload-completed",Ua="recording-data",Ba="app-message",$a="transcription-message",Ja="remote-media-player-started",Ga="remote-media-player-updated",Ya="remote-media-player-stopped",za="local-screen-share-started",Wa="local-screen-share-stopped",Ha="local-screen-share-canceled",Ka="active-speaker-change",Qa="active-speaker-mode-change",Xa="network-quality-change",Za="network-connection",es="cpu-load-change",ts="face-counts-updated",At="fullscreen",Ot="exited-fullscreen",ns="live-streaming-started",rs="live-streaming-updated",is="live-streaming-stopped",os="live-streaming-error",as="lang-updated",ss="receive-settings-updated",fr="input-settings-updated",mr="nonfatal-error",gr="error",xn=4096,ro=102400,jn="iframe-call-message",io="local-screen-start",oo="daily-method-update-live-streaming-endpoints",Wt="transmit-log",Ie="daily-custom-track",nn={NONE:"none",BGBLUR:"background-blur",BGIMAGE:"background-image",FACE_DETECTION:"face-detection"},cs={NONE:"none",NOISE_CANCELLATION:"noise-cancellation"},vr={PLAY:"play",PAUSE:"pause"},Nn=["jpg","png","jpeg"],Rl="add-endpoints",Fl="remove-endpoints",ao="sip-call-transfer";function ge(){return!$()&&typeof window<"u"&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""}function $(){return typeof navigator<"u"&&navigator.product&&navigator.product==="ReactNative"}function ls(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia}function ql(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)&&((function(t,e){if(!t||!e)return!0;switch(t){case"Chrome":return e.major>=75;case"Safari":return RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")&&!(e.major===13&&e.minor===0&&e.point===0);case"Firefox":return e.major>=67}return!0})(it(),fn())||$())}function so(){if($()||!document)return!1;var t=document.createElement("iframe");return!!t.requestFullscreen||!!t.webkitRequestFullscreen}var yr="none",Vl="software",Ul="hardware",Bl=(function(){try{var t,e=document.createElement("canvas"),n=!1;(t=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0}))||(n=!0,t=e.getContext("webgl2"));var o=t!=null;return e.remove(),o?n?Vl:Ul:yr}catch{return yr}})();function us(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return!$()&&Bl!==yr&&(t?(function(){return co()?!1:["Chrome","Firefox"].includes(it())})():(function(){if(co())return!1;var e=it();if(e==="Safari"){var n=qr();if(n.major<15||n.major===15&&n.minor<4)return!1}return e==="Chrome"?Fr().major>=77:e==="Firefox"?Vr().major>=97:["Chrome","Firefox","Safari"].includes(e)})())}function ds(){if($()||ps()||typeof AudioWorkletNode>"u")return!1;switch(it()){case"Chrome":case"Firefox":return!0;case"Safari":var t=fn();return t.major>17||t.major===17&&t.minor>=4}return!1}function Rn(){return ls()&&typeof MediaStreamTrack<"u"&&!(function(){var t,e=it();if(!ge())return!0;switch(e){case"Chrome":return(t=Fr()).major&&t.major>0&&t.major<75;case"Firefox":return(t=Vr()).major<91;case"Safari":return(t=qr()).major<13||t.major===13&&t.minor<1;default:return!0}})()}function ps(){return ge().match(/Linux; Android/)}function co(){var t,e=ge(),n=e.match(/Mac/)&&(!$()&&typeof window<"u"&&(t=window)!==null&&t!==void 0&&(t=t.navigator)!==null&&t!==void 0&&t.maxTouchPoints?window.navigator.maxTouchPoints:0)>=5;return!!(e.match(/Mobi/)||e.match(/Android/)||n)||!!ge().match(/DailyAnd\//)||void 0}function it(){if(typeof window<"u"){var t=ge();return hs()?"Safari":t.indexOf("Edge")>-1?"Edge":t.match(/Chrome\//)?"Chrome":t.indexOf("Safari")>-1||fs()?"Safari":t.indexOf("Firefox")>-1?"Firefox":t.indexOf("MSIE")>-1||t.indexOf(".NET")>-1?"IE":"Unknown Browser"}}function fn(){switch(it()){case"Chrome":return Fr();case"Safari":return qr();case"Firefox":return Vr();case"Edge":return(function(){var t=0,e=0;if(typeof window<"u"){var n=ge().match(/Edge\/(\d+).(\d+)/);if(n)try{t=parseInt(n[1]),e=parseInt(n[2])}catch{}}return{major:t,minor:e}})()}}function Fr(){var t=0,e=0,n=0,o=0,r=!1;if(typeof window<"u"){var i=ge(),s=i.match(/Chrome\/(\d+).(\d+).(\d+).(\d+)/);if(s)try{t=parseInt(s[1]),e=parseInt(s[2]),n=parseInt(s[3]),o=parseInt(s[4]),r=i.indexOf("OPR/")>-1}catch{}}return{major:t,minor:e,build:n,patch:o,opera:r}}function hs(){return!!ge().match(/iPad|iPhone|iPod/i)&&ls()}function fs(){return ge().indexOf("AppleWebKit/605.1.15")>-1}function qr(){var t=0,e=0,n=0;if(typeof window<"u"){var o=ge().match(/Version\/(\d+).(\d+)(.(\d+))?/);if(o)try{t=parseInt(o[1]),e=parseInt(o[2]),n=parseInt(o[4])}catch{}else(hs()||fs())&&(t=14,e=0,n=3)}return{major:t,minor:e,point:n}}function Vr(){var t=0,e=0;if(typeof window<"u"){var n=ge().match(/Firefox\/(\d+).(\d+)/);if(n)try{t=parseInt(n[1]),e=parseInt(n[2])}catch{}}return{major:t,minor:e}}var ms=(function(){return de((function t(){ue(this,t)}),[{key:"addListenerForMessagesFromCallMachine",value:function(t,e,n){Et()}},{key:"addListenerForMessagesFromDailyJs",value:function(t,e,n){Et()}},{key:"sendMessageToCallMachine",value:function(t,e,n,o){Et()}},{key:"sendMessageToDailyJs",value:function(t,e){Et()}},{key:"removeListener",value:function(t){Et()}}])})();function lo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.push.apply(n,o)}return n}function Fn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lo(Object(n),!0).forEach((function(o){Ce(t,o,n[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lo(Object(n)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))}))}return t}function gs(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(gs=function(){return!!t})()}var $l=(function(){function t(){var e,n,o,r;return ue(this,t),n=this,o=we(o=t),(e=vn(n,gs()?Reflect.construct(o,[],we(n).constructor):o.apply(n,r)))._wrappedListeners={},e._messageCallbacks={},e}return yn(t,ms),de(t,[{key:"addListenerForMessagesFromCallMachine",value:function(e,n,o){var r=this,i=function(s){if(s.data&&s.data.what==="iframe-call-message"&&(!s.data.callClientId||s.data.callClientId===n)&&(!s.data.from||s.data.from!=="module")){var l=Fn({},s.data);if(delete l.from,l.callbackStamp&&r._messageCallbacks[l.callbackStamp]){var d=l.callbackStamp;r._messageCallbacks[d].call(o,l),delete r._messageCallbacks[d]}delete l.what,delete l.callbackStamp,e.call(o,l)}};this._wrappedListeners[e]=i,window.addEventListener("message",i)}},{key:"addListenerForMessagesFromDailyJs",value:function(e,n,o){var r=function(i){var s;if(!(!i.data||i.data.what!==jn||!i.data.action||i.data.from&&i.data.from!=="module"||i.data.callClientId&&n&&i.data.callClientId!==n||i!=null&&(s=i.data)!==null&&s!==void 0&&s.callFrameId)){var l=i.data;e.call(o,l)}};this._wrappedListeners[e]=r,window.addEventListener("message",r)}},{key:"sendMessageToCallMachine",value:function(e,n,o,r){if(!o)throw new Error("undefined callClientId. Are you trying to use a DailyCall instance previously destroyed?");var i=Fn({},e);if(i.what=jn,i.from="module",i.callClientId=o,n){var s=bn();this._messageCallbacks[s]=n,i.callbackStamp=s}var l=r?r.contentWindow:window,d=this._callMachineTargetOrigin(r);d&&l.postMessage(i,d)}},{key:"sendMessageToDailyJs",value:function(e,n){e.what=jn,e.callClientId=n,e.from="embedded",window.postMessage(e,this._targetOriginFromWindowLocation())}},{key:"removeListener",value:function(e){var n=this._wrappedListeners[e];n&&(window.removeEventListener("message",n),delete this._wrappedListeners[e])}},{key:"forwardPackagedMessageToCallMachine",value:function(e,n,o){var r=Fn({},e);r.callClientId=o;var i=n?n.contentWindow:window,s=this._callMachineTargetOrigin(n);s&&i.postMessage(r,s)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(e,n){var o=function(r){if(r.data&&r.data.what==="iframe-call-message"&&(!r.data.callClientId||r.data.callClientId===n)&&(!r.data.from||r.data.from!=="module")){var i=r.data;e(i)}};return this._wrappedListeners[e]=o,window.addEventListener("message",o),e}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(e){var n=this._wrappedListeners[e];n&&(window.removeEventListener("message",n),delete this._wrappedListeners[e])}},{key:"_callMachineTargetOrigin",value:function(e){return e?e.src?new URL(e.src).origin:void 0:this._targetOriginFromWindowLocation()}},{key:"_targetOriginFromWindowLocation",value:function(){return window.location.protocol==="file:"?"*":window.location.origin}}])})();function uo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.push.apply(n,o)}return n}function vs(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(vs=function(){return!!t})()}var Jl=(function(){function t(){var e,n,o,r;return ue(this,t),n=this,o=we(o=t),e=vn(n,vs()?Reflect.construct(o,[],we(n).constructor):o.apply(n,r)),global.callMachineToDailyJsEmitter=global.callMachineToDailyJsEmitter||new zn.EventEmitter,global.dailyJsToCallMachineEmitter=global.dailyJsToCallMachineEmitter||new zn.EventEmitter,e._wrappedListeners={},e._messageCallbacks={},e}return yn(t,ms),de(t,[{key:"addListenerForMessagesFromCallMachine",value:function(e,n,o){this._addListener(e,global.callMachineToDailyJsEmitter,n,o,"received call machine message")}},{key:"addListenerForMessagesFromDailyJs",value:function(e,n,o){this._addListener(e,global.dailyJsToCallMachineEmitter,n,o,"received daily-js message")}},{key:"sendMessageToCallMachine",value:function(e,n,o){this._sendMessage(e,global.dailyJsToCallMachineEmitter,o,n,"sending message to call machine")}},{key:"sendMessageToDailyJs",value:function(e,n){this._sendMessage(e,global.callMachineToDailyJsEmitter,n,null,"sending message to daily-js")}},{key:"removeListener",value:function(e){var n=this._wrappedListeners[e];n&&(global.callMachineToDailyJsEmitter.removeListener("message",n),global.dailyJsToCallMachineEmitter.removeListener("message",n),delete this._wrappedListeners[e])}},{key:"_addListener",value:function(e,n,o,r,i){var s=this,l=function(d){if(d.callClientId===o){if(d.callbackStamp&&s._messageCallbacks[d.callbackStamp]){var p=d.callbackStamp;s._messageCallbacks[p].call(r,d),delete s._messageCallbacks[p]}e.call(r,d)}};this._wrappedListeners[e]=l,n.addListener("message",l)}},{key:"_sendMessage",value:function(e,n,o,r,i){var s=(function(d){for(var p=1;p<arguments.length;p++){var g=arguments[p]!=null?arguments[p]:{};p%2?uo(Object(g),!0).forEach((function(b){Ce(d,b,g[b])})):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(g)):uo(Object(g)).forEach((function(b){Object.defineProperty(d,b,Object.getOwnPropertyDescriptor(g,b))}))}return d})({},e);if(s.callClientId=o,r){var l=bn();this._messageCallbacks[l]=r,s.callbackStamp=l}n.emit("message",s)}}])})(),br="replace",_r="shallow-merge",po=[br,_r],Gl=(function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data,o=e.mergeStrategy,r=o===void 0?br:o;ue(this,t),t._validateMergeStrategy(r),t._validateData(n,r),this.mergeStrategy=r,this.data=n}return de(t,[{key:"isNoOp",value:function(){return t.isNoOpUpdate(this.data,this.mergeStrategy)}}],[{key:"isNoOpUpdate",value:function(e,n){return Object.keys(e).length===0&&n===_r}},{key:"_validateMergeStrategy",value:function(e){if(!po.includes(e))throw Error("Unrecognized mergeStrategy provided. Options are: [".concat(po,"]"))}},{key:"_validateData",value:function(e,n){if(!(function(l){if(l==null||G(l)!=="object")return!1;var d=Object.getPrototypeOf(l);return d==null||d===Object.prototype})(e))throw Error("Meeting session data must be a plain (map-like) object");var o;try{if(o=JSON.stringify(e),n===br){var r=JSON.parse(o);ae(r,e)||console.warn("The meeting session data provided will be modified when serialized.",r,e)}else if(n===_r){for(var i in e)if(Object.hasOwnProperty.call(e,i)&&e[i]!==void 0){var s=JSON.parse(JSON.stringify(e[i]));ae(e[i],s)||console.warn("At least one key in the meeting session data provided will be modified when serialized.",s,e[i])}}}catch(l){throw Error("Meeting session data must be serializable to JSON: ".concat(l))}if(o.length>ro)throw Error("Meeting session data is too large (".concat(o.length," characters). Maximum size suppported is ").concat(ro,"."))}}])})();function ys(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(ys=function(){return!!t})()}function wr(t){var e=typeof Map=="function"?new Map:void 0;return wr=function(n){if(n===null||!(function(r){try{return Function.toString.call(r).indexOf("[native code]")!==-1}catch{return typeof r=="function"}})(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,o)}function o(){return(function(r,i,s){if(ys())return Reflect.construct.apply(null,arguments);var l=[null];l.push.apply(l,i);var d=new(r.bind.apply(r,l));return s&&Dt(d,s.prototype),d})(n,arguments,we(this).constructor)}return o.prototype=Object.create(n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Dt(o,n)},wr(t)}function bs(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(bs=function(){return!!t})()}function ho(t){var e,n=(e=window._daily)===null||e===void 0?void 0:e.pendings;if(n){var o=n.indexOf(t);o!==-1&&n.splice(o,1)}}var Yl=(function(){return de((function t(e){ue(this,t),this._currentLoad=null,this._callClientId=e}),[{key:"load",value:function(){var t,e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;if(this.loaded)return window._daily.instances[this._callClientId].callMachine.reset(),void o(!0);t=this._callClientId,window._daily.pendings.push(t),this._currentLoad&&this._currentLoad.cancel(),this._currentLoad=new zl(n,(function(){o(!1)}),(function(i,s){s||ho(e._callClientId),r(i,s)})),this._currentLoad.start()}},{key:"cancel",value:function(){this._currentLoad&&this._currentLoad.cancel(),ho(this._callClientId)}},{key:"loaded",get:function(){return this._currentLoad&&this._currentLoad.succeeded}}])})(),zl=(function(){return de((function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;ue(this,t),this._attemptsRemaining=3,this._currentAttempt=null,this._dailyConfig=e,this._successCallback=n,this._failureCallback=o}),[{key:"start",value:function(){var t=this;if(!this._currentAttempt){var e=function(n){t._currentAttempt.cancelled||(t._attemptsRemaining--,t._failureCallback(n,t._attemptsRemaining>0),t._attemptsRemaining<=0||setTimeout((function(){t._currentAttempt.cancelled||(t._currentAttempt=new fo(t._dailyConfig,t._successCallback,e),t._currentAttempt.start())}),3e3))};this._currentAttempt=new fo(this._dailyConfig,this._successCallback,e),this._currentAttempt.start()}}},{key:"cancel",value:function(){this._currentAttempt&&this._currentAttempt.cancel()}},{key:"cancelled",get:function(){return this._currentAttempt&&this._currentAttempt.cancelled}},{key:"succeeded",get:function(){return this._currentAttempt&&this._currentAttempt.succeeded}}])})(),qn=(function(){function t(){return ue(this,t),e=this,o=arguments,n=we(n=t),vn(e,bs()?Reflect.construct(n,o||[],we(e).constructor):n.apply(e,o));var e,n,o}return yn(t,wr(Error)),de(t)})(),mn=2e4,fo=(function(){return de((function e(n,o,r){ue(this,e),this._loadAttemptImpl=$()||!n.avoidEval?new Wl(n,o,r):new Hl(n,o,r)}),[{key:"start",value:(t=F((function*(){return this._loadAttemptImpl.start()})),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(){this._loadAttemptImpl.cancel()}},{key:"cancelled",get:function(){return this._loadAttemptImpl.cancelled}},{key:"succeeded",get:function(){return this._loadAttemptImpl.succeeded}}]);var t})(),Wl=(function(){return de((function r(i,s,l){ue(this,r),this.cancelled=!1,this.succeeded=!1,this._networkTimedOut=!1,this._networkTimeout=null,this._iosCache=typeof iOSCallObjectBundleCache<"u"&&iOSCallObjectBundleCache,this._refetchHeaders=null,this._dailyConfig=i,this._successCallback=s,this._failureCallback=l}),[{key:"start",value:(o=F((function*(){var r=sn(this._dailyConfig);!(yield this._tryLoadFromIOSCache(r))&&this._loadFromNetwork(r)})),function(){return o.apply(this,arguments)})},{key:"cancel",value:function(){clearTimeout(this._networkTimeout),this.cancelled=!0}},{key:"_tryLoadFromIOSCache",value:(n=F((function*(r){if(!this._iosCache)return!1;try{var i=yield this._iosCache.get(r);return!!this.cancelled||!!i&&(i.code?(Function('"use strict";'+i.code)(),this.succeeded=!0,this._successCallback(),!0):(this._refetchHeaders=i.refetchHeaders,!1))}catch{return!1}})),function(r){return n.apply(this,arguments)})},{key:"_loadFromNetwork",value:(e=F((function*(r){var i=this;this._networkTimeout=setTimeout((function(){i._networkTimedOut=!0,i._failureCallback({msg:"Timed out (>".concat(mn," ms) when loading call object bundle ").concat(r),type:"timeout"})}),mn);try{var s=this._refetchHeaders?{headers:this._refetchHeaders}:{},l=yield fetch(r,s);if(clearTimeout(this._networkTimeout),this.cancelled||this._networkTimedOut)throw new qn;var d=yield this._getBundleCodeFromResponse(r,l);if(this.cancelled)throw new qn;Function('"use strict";'+d)(),this._iosCache&&this._iosCache.set(r,d,l.headers),this.succeeded=!0,this._successCallback()}catch(p){if(clearTimeout(this._networkTimeout),p instanceof qn||this.cancelled||this._networkTimedOut)return;this._failureCallback({msg:"Failed to load call object bundle ".concat(r,": ").concat(p),type:p.message})}})),function(r){return e.apply(this,arguments)})},{key:"_getBundleCodeFromResponse",value:(t=F((function*(r,i){if(i.ok)return yield i.text();if(this._iosCache&&i.status===304)return(yield this._iosCache.renew(r,i.headers)).code;throw new Error("Received ".concat(i.status," response"))})),function(r,i){return t.apply(this,arguments)})}]);var t,e,n,o})(),Hl=(function(){return de((function t(e,n,o){ue(this,t),this.cancelled=!1,this.succeeded=!1,this._dailyConfig=e,this._successCallback=n,this._failureCallback=o,this._attemptId=bn(),this._networkTimeout=null,this._scriptElement=null}),[{key:"start",value:function(){window._dailyCallMachineLoadWaitlist||(window._dailyCallMachineLoadWaitlist=new Set);var t=sn(this._dailyConfig);(typeof document>"u"?"undefined":G(document))==="object"?this._startLoading(t):this._failureCallback({msg:"Call object bundle must be loaded in a DOM/web context",type:"missing context"})}},{key:"cancel",value:function(){this._stopLoading(),this.cancelled=!0}},{key:"_startLoading",value:function(t){var e=this;this._signUpForCallMachineLoadWaitlist(),this._networkTimeout=setTimeout((function(){e._stopLoading(),e._failureCallback({msg:"Timed out (>".concat(mn," ms) when loading call object bundle ").concat(t),type:"timeout"})}),mn);var n=document.getElementsByTagName("head")[0],o=document.createElement("script");this._scriptElement=o,o.onload=function(){e._stopLoading(),e.succeeded=!0,e._successCallback()},o.onerror=function(r){e._stopLoading(),e._failureCallback({msg:"Failed to load call object bundle ".concat(r.target.src),type:r.message})},o.src=t,n.appendChild(o)}},{key:"_stopLoading",value:function(){this._withdrawFromCallMachineLoadWaitlist(),clearTimeout(this._networkTimeout),this._scriptElement&&(this._scriptElement.onload=null,this._scriptElement.onerror=null)}},{key:"_signUpForCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.add(this._attemptId)}},{key:"_withdrawFromCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.delete(this._attemptId)}}])})(),Ht=function(t,e,n){return Ql(t.local,e,n)===!0},Kl=function(t,e,n){return t.local.streams&&t.local.streams[e]&&t.local.streams[e].stream&&t.local.streams[e].stream["get".concat(n==="video"?"Video":"Audio","Tracks")]()[0]},lt=function(t,e,n,o){var r=Xl(t,e,n,o);return r&&r.pendingTrack},Ql=function(t,e,n){if(!t)return!1;var o=function(i){switch(i){case"avatar":return!0;case"staged":return i;default:return!!i}},r=t.public.subscribedTracks;return r&&r[e]?["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo"].indexOf(n)===-1&&r[e].custom?[!0,"staged"].includes(r[e].custom)?o(r[e].custom):o(r[e].custom[n]):o(r[e][n]):!r||o(r.ALL)},Xl=function(t,e,n,o){var r=Object.values(t.streams||{}).filter((function(i){return i.participantId===e&&i.type===n&&i.pendingTrack&&i.pendingTrack.kind===o})).sort((function(i,s){return new Date(s.starttime)-new Date(i.starttime)}));return r&&r[0]},Zl=function(t,e){var n=t.local.public.customTracks;if(n&&n[e])return n[e].track};function mo(t,e){for(var n=e.getState(),o=0,r=["cam","screen"];o<r.length;o++)for(var i=r[o],s=0,l=["video","audio"];s<l.length;s++){var d=l[s],p=i==="cam"?d:"screen".concat(d.charAt(0).toUpperCase()+d.slice(1)),g=t.tracks[p];if(g){var b=t.local?Kl(n,i,d):lt(n,t.session_id,i,d);g.state==="playable"&&(g.track=b),g.persistentTrack=b}}}function go(t,e){try{var n=e.getState();for(var o in t.tracks)if(!eu(o)){var r=t.tracks[o].kind;if(r){var i=t.tracks[o];if(i){var s=t.local?Zl(n,o):lt(n,t.session_id,o,r);i.state==="playable"&&(t.tracks[o].track=s),i.persistentTrack=s}}else console.error("unknown type for custom track")}}catch(l){console.error(l)}}function eu(t){return["video","audio","screenVideo","screenAudio"].includes(t)}function vo(t,e,n){var o=n.getState();if(t.local){if(t.audio)try{t.audioTrack=o.local.streams.cam.stream.getAudioTracks()[0],t.audioTrack||(t.audio=!1)}catch{}if(t.video)try{t.videoTrack=o.local.streams.cam.stream.getVideoTracks()[0],t.videoTrack||(t.video=!1)}catch{}if(t.screen)try{t.screenVideoTrack=o.local.streams.screen.stream.getVideoTracks()[0],t.screenAudioTrack=o.local.streams.screen.stream.getAudioTracks()[0],t.screenVideoTrack||t.screenAudioTrack||(t.screen=!1)}catch{}}else{var r=!0;try{var i=o.participants[t.session_id];i&&i.public&&i.public.rtcType&&i.public.rtcType.impl==="peer-to-peer"&&i.private&&!["connected","completed"].includes(i.private.peeringState)&&(r=!1)}catch(g){console.error(g)}if(!r)return t.audio=!1,t.audioTrack=!1,t.video=!1,t.videoTrack=!1,t.screen=!1,void(t.screenTrack=!1);try{if(o.streams,t.audio&&Ht(o,t.session_id,"cam-audio")){var s=lt(o,t.session_id,"cam","audio");s&&(e&&e.audioTrack&&e.audioTrack.id===s.id?t.audioTrack=s:s.muted||(t.audioTrack=s)),t.audioTrack||(t.audio=!1)}if(t.video&&Ht(o,t.session_id,"cam-video")){var l=lt(o,t.session_id,"cam","video");l&&(e&&e.videoTrack&&e.videoTrack.id===l.id?t.videoTrack=l:l.muted||(t.videoTrack=l)),t.videoTrack||(t.video=!1)}if(t.screen&&Ht(o,t.session_id,"screen-audio")){var d=lt(o,t.session_id,"screen","audio");d&&(e&&e.screenAudioTrack&&e.screenAudioTrack.id===d.id?t.screenAudioTrack=d:d.muted||(t.screenAudioTrack=d))}if(t.screen&&Ht(o,t.session_id,"screen-video")){var p=lt(o,t.session_id,"screen","video");p&&(e&&e.screenVideoTrack&&e.screenVideoTrack.id===p.id?t.screenVideoTrack=p:p.muted||(t.screenVideoTrack=p))}t.screenVideoTrack||t.screenAudioTrack||(t.screen=!1)}catch(g){console.error("unexpected error matching up tracks",g)}}}function tu(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=(function(d,p){if(d){if(typeof d=="string")return yo(d,p);var g={}.toString.call(d).slice(8,-1);return g==="Object"&&d.constructor&&(g=d.constructor.name),g==="Map"||g==="Set"?Array.from(d):g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?yo(d,p):void 0}})(t))||e){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(d){throw d},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,s=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var d=n.next();return s=d.done,d},e:function(d){l=!0,i=d},f:function(){try{s||n.return==null||n.return()}finally{if(l)throw i}}}}function yo(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var Ee=new Map,dt=null;function nu(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=(function(d,p){if(d){if(typeof d=="string")return bo(d,p);var g={}.toString.call(d).slice(8,-1);return g==="Object"&&d.constructor&&(g=d.constructor.name),g==="Map"||g==="Set"?Array.from(d):g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?bo(d,p):void 0}})(t))||e){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(d){throw d},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,s=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var d=n.next();return s=d.done,d},e:function(d){l=!0,i=d},f:function(){try{s||n.return==null||n.return()}finally{if(l)throw i}}}}function bo(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var ke=new Map,Pt=null;function ru(t){_s()?(function(e){Ee.has(e)||(Ee.set(e,{}),navigator.mediaDevices.enumerateDevices().then((function(n){Ee.has(e)&&(Ee.get(e).lastDevicesString=JSON.stringify(n),dt||(dt=(function(){var o=F((function*(){var r,i=yield navigator.mediaDevices.enumerateDevices(),s=tu(Ee.keys());try{for(s.s();!(r=s.n()).done;){var l=r.value,d=JSON.stringify(i);d!==Ee.get(l).lastDevicesString&&(Ee.get(l).lastDevicesString=d,l(i))}}catch(p){s.e(p)}finally{s.f()}}));return function(){return o.apply(this,arguments)}})(),navigator.mediaDevices.addEventListener("devicechange",dt)))})).catch((function(){})))})(t):(function(e){ke.has(e)||(ke.set(e,{}),navigator.mediaDevices.enumerateDevices().then((function(n){ke.has(e)&&(ke.get(e).lastDevicesString=JSON.stringify(n),Pt||(Pt=setInterval(F((function*(){var o,r=yield navigator.mediaDevices.enumerateDevices(),i=nu(ke.keys());try{for(i.s();!(o=i.n()).done;){var s=o.value,l=JSON.stringify(r);l!==ke.get(s).lastDevicesString&&(ke.get(s).lastDevicesString=l,s(r))}}catch(d){i.e(d)}finally{i.f()}})),3e3)))})))})(t)}function iu(t){_s()?(function(e){Ee.has(e)&&(Ee.delete(e),Ee.size===0&&dt&&(navigator.mediaDevices.removeEventListener("devicechange",dt),dt=null))})(t):(function(e){ke.has(e)&&(ke.delete(e),ke.size===0&&Pt&&(clearInterval(Pt),Pt=null))})(t)}function _s(){var t;return $()||((t=navigator.mediaDevices)===null||t===void 0?void 0:t.ondevicechange)!==void 0}var ou=new Set;function au(t,e){return t&&t.readyState==="live"&&!(function(n,o){return n.muted&&!ou.has(n.id)})(t)}function _o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.push.apply(n,o)}return n}function Le(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_o(Object(n),!0).forEach((function(o){Ce(t,o,n[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_o(Object(n)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))}))}return t}var Mt=Object.freeze({VIDEO:"video",AUDIO:"audio",SCREEN_VIDEO:"screenVideo",SCREEN_AUDIO:"screenAudio",CUSTOM_VIDEO:"customVideo",CUSTOM_AUDIO:"customAudio"}),su=Object.freeze({PARTICIPANTS:"participants",STREAMING:"streaming",TRANSCRIPTION:"transcription"}),It=Object.values(Mt),wo=["v","a","sv","sa","cv","ca"];Object.freeze(It.reduce((function(t,e,n){return t[e]=wo[n],t}),{})),Object.freeze(wo.reduce((function(t,e,n){return t[e]=It[n],t}),{}));var cu=[Mt.VIDEO,Mt.AUDIO,Mt.SCREEN_VIDEO,Mt.SCREEN_AUDIO],So=Object.values(su),Eo=["p","s","t"];Object.freeze(So.reduce((function(t,e,n){return t[e]=Eo[n],t}),{})),Object.freeze(Eo.reduce((function(t,e,n){return t[e]=So[n],t}),{}));var ws=(function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.base,o=e.byUserId,r=e.byParticipantId;ue(this,t),this.base=n,this.byUserId=o,this.byParticipantId=r}return de(t,[{key:"clone",value:function(){var e=new t;if(this.base instanceof ee?e.base=this.base.clone():e.base=this.base,this.byUserId!==void 0)for(var n in e.byUserId={},this.byUserId){var o=this.byUserId[n];e.byUserId[n]=o instanceof ee?o.clone():o}if(this.byParticipantId!==void 0)for(var r in e.byParticipantId={},this.byParticipantId){var i=this.byParticipantId[r];e.byParticipantId[r]=i instanceof ee?i.clone():i}return e}},{key:"toJSONObject",value:function(){var e={};if(typeof this.base=="boolean"?e.base=this.base:this.base instanceof ee&&(e.base=this.base.toJSONObject()),this.byUserId!==void 0)for(var n in e.byUserId={},this.byUserId){var o=this.byUserId[n];e.byUserId[n]=o instanceof ee?o.toJSONObject():o}if(this.byParticipantId!==void 0)for(var r in e.byParticipantId={},this.byParticipantId){var i=this.byParticipantId[r];e.byParticipantId[r]=i instanceof ee?i.toJSONObject():i}return e}},{key:"toMinifiedJSONObject",value:function(){var e={};if(this.base!==void 0&&(typeof this.base=="boolean"?e.b=this.base:e.b=this.base.toMinifiedJSONObject()),this.byUserId!==void 0)for(var n in e.u={},this.byUserId){var o=this.byUserId[n];e.u[n]=typeof o=="boolean"?o:o.toMinifiedJSONObject()}if(this.byParticipantId!==void 0)for(var r in e.p={},this.byParticipantId){var i=this.byParticipantId[r];e.p[r]=typeof i=="boolean"?i:i.toMinifiedJSONObject()}return e}},{key:"normalize",value:function(){return this.base instanceof ee&&(this.base=this.base.normalize()),this.byUserId&&(this.byUserId=Object.fromEntries(Object.entries(this.byUserId).map((function(e){var n=ie(e,2),o=n[0],r=n[1];return[o,r instanceof ee?r.normalize():r]})))),this.byParticipantId&&(this.byParticipantId=Object.fromEntries(Object.entries(this.byParticipantId).map((function(e){var n=ie(e,2),o=n[0],r=n[1];return[o,r instanceof ee?r.normalize():r]})))),this}}],[{key:"fromJSONObject",value:function(e){var n,o,r;if(e.base!==void 0&&(n=typeof e.base=="boolean"?e.base:ee.fromJSONObject(e.base)),e.byUserId!==void 0)for(var i in o={},e.byUserId){var s=e.byUserId[i];o[i]=typeof s=="boolean"?s:ee.fromJSONObject(s)}if(e.byParticipantId!==void 0)for(var l in r={},e.byParticipantId){var d=e.byParticipantId[l];r[l]=typeof d=="boolean"?d:ee.fromJSONObject(d)}return new t({base:n,byUserId:o,byParticipantId:r})}},{key:"fromMinifiedJSONObject",value:function(e){var n,o,r;if(e.b!==void 0&&(n=typeof e.b=="boolean"?e.b:ee.fromMinifiedJSONObject(e.b)),e.u!==void 0)for(var i in o={},e.u){var s=e.u[i];o[i]=typeof s=="boolean"?s:ee.fromMinifiedJSONObject(s)}if(e.p!==void 0)for(var l in r={},e.p){var d=e.p[l];r[l]=typeof d=="boolean"?d:ee.fromMinifiedJSONObject(d)}return new t({base:n,byUserId:o,byParticipantId:r})}},{key:"validateJSONObject",value:function(e){if(G(e)!=="object")return[!1,"canReceive must be an object"];for(var n=["base","byUserId","byParticipantId"],o=0,r=Object.keys(e);o<r.length;o++){var i=r[o];if(!n.includes(i))return[!1,"canReceive can only contain keys (".concat(n.join(", "),")")];if(i==="base"){var s=ie(ee.validateJSONObject(e.base,!0),2),l=s[0],d=s[1];if(!l)return[!1,d]}else{if(G(e[i])!=="object")return[!1,"invalid (non-object) value for field '".concat(i,"' in canReceive")];for(var p=0,g=Object.values(e[i]);p<g.length;p++){var b=g[p],y=ie(ee.validateJSONObject(b),2),_=y[0],v=y[1];if(!_)return[!1,v]}}}return[!0]}}])})(),ee=(function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.video,o=e.audio,r=e.screenVideo,i=e.screenAudio,s=e.customVideo,l=e.customAudio;ue(this,t),this.video=n,this.audio=o,this.screenVideo=r,this.screenAudio=i,this.customVideo=s,this.customAudio=l}return de(t,[{key:"clone",value:function(){var e=new t;return this.video!==void 0&&(e.video=this.video),this.audio!==void 0&&(e.audio=this.audio),this.screenVideo!==void 0&&(e.screenVideo=this.screenVideo),this.screenAudio!==void 0&&(e.screenAudio=this.screenAudio),this.customVideo!==void 0&&(e.customVideo=Le({},this.customVideo)),this.customAudio!==void 0&&(e.customAudio=Le({},this.customAudio)),e}},{key:"toJSONObject",value:function(){var e={};return this.video!==void 0&&(e.video=this.video),this.audio!==void 0&&(e.audio=this.audio),this.screenVideo!==void 0&&(e.screenVideo=this.screenVideo),this.screenAudio!==void 0&&(e.screenAudio=this.screenAudio),this.customVideo!==void 0&&(e.customVideo=Le({},this.customVideo)),this.customAudio!==void 0&&(e.customAudio=Le({},this.customAudio)),e}},{key:"toMinifiedJSONObject",value:function(){var e={};return this.video!==void 0&&(e.v=this.video),this.audio!==void 0&&(e.a=this.audio),this.screenVideo!==void 0&&(e.sv=this.screenVideo),this.screenAudio!==void 0&&(e.sa=this.screenAudio),this.customVideo!==void 0&&(e.cv=Le({},this.customVideo)),this.customAudio!==void 0&&(e.ca=Le({},this.customAudio)),e}},{key:"normalize",value:function(){function e(n,o){return n&&Object.keys(n).length===1&&n["*"]===o}return!(this.video!==!0||this.audio!==!0||this.screenVideo!==!0||this.screenAudio!==!0||!e(this.customVideo,!0)||!e(this.customAudio,!0))||(this.video!==!1||this.audio!==!1||this.screenVideo!==!1||this.screenAudio!==!1||!e(this.customVideo,!1)||!e(this.customAudio,!1))&&this}}],[{key:"fromBoolean",value:function(e){return new t({video:e,audio:e,screenVideo:e,screenAudio:e,customVideo:{"*":e},customAudio:{"*":e}})}},{key:"fromJSONObject",value:function(e){return new t({video:e.video,audio:e.audio,screenVideo:e.screenVideo,screenAudio:e.screenAudio,customVideo:e.customVideo!==void 0?Le({},e.customVideo):void 0,customAudio:e.customAudio!==void 0?Le({},e.customAudio):void 0})}},{key:"fromMinifiedJSONObject",value:function(e){return new t({video:e.v,audio:e.a,screenVideo:e.sv,screenAudio:e.sa,customVideo:e.cv,customAudio:e.ca})}},{key:"validateJSONObject",value:function(e,n){if(typeof e=="boolean")return[!0];if(G(e)!=="object")return[!1,"invalid (non-object, non-boolean) value in canReceive"];for(var o=Object.keys(e),r=0,i=o;r<i.length;r++){var s=i[r];if(!It.includes(s))return[!1,"invalid media type '".concat(s,"' in canReceive")];if(cu.includes(s)){if(typeof e[s]!="boolean")return[!1,"invalid (non-boolean) value for media type '".concat(s,"' in canReceive")]}else{if(G(e[s])!=="object")return[!1,"invalid (non-object) value for media type '".concat(s,"' in canReceive")];for(var l=0,d=Object.values(e[s]);l<d.length;l++)if(typeof d[l]!="boolean")return[!1,"invalid (non-boolean) value for entry within '".concat(s,"' in canReceive")];if(n&&e[s]["*"]===void 0)return[!1,`canReceive "base" permission must specify "*" as an entry within '`.concat(s,"'")]}}return n&&o.length!==It.length?[!1,'canReceive "base" permission must specify all media types: '.concat(It.join(", ")," (or be set to a boolean shorthand)")]:[!0]}}])})(),lu=["result"],uu=["preserveIframe"];function ko(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.push.apply(n,o)}return n}function N(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ko(Object(n),!0).forEach((function(o){Ce(t,o,n[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ko(Object(n)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))}))}return t}function Ss(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Ss=function(){return!!t})()}function Co(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=(function(d,p){if(d){if(typeof d=="string")return To(d,p);var g={}.toString.call(d).slice(8,-1);return g==="Object"&&d.constructor&&(g=d.constructor.name),g==="Map"||g==="Set"?Array.from(d):g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?To(d,p):void 0}})(t))||e){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(d){throw d},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,s=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var d=n.next();return s=d.done,d},e:function(d){l=!0,i=d},f:function(){try{s||n.return==null||n.return()}finally{if(l)throw i}}}}function To(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var ze={},Ao="video",du="voice",Oo=$()?{data:{}}:{data:{},topology:"none"},Mo={present:0,hidden:0},Es={maxBitrate:{min:1e5,max:25e5},maxFramerate:{min:1,max:30},scaleResolutionDownBy:{min:1,max:8}},Vn=Object.keys(Es),Po=["state","volume","simulcastEncodings"],Io={androidInCallNotification:{title:"string",subtitle:"string",iconName:"string",disableForCustomOverride:"boolean"},disableAutoDeviceManagement:{audio:"boolean",video:"boolean"}},gn={id:{iconPath:"string",iconPathDarkMode:"string",label:"string",tooltip:"string",visualState:"'default' | 'sidebar-open' | 'active'"}},Sr={id:{allow:"string",controlledBy:"'*' | 'owners' | string[]",csp:"string",iconURL:"string",label:"string",loading:"'eager' | 'lazy'",location:"'main' | 'sidebar'",name:"string",referrerPolicy:"string",sandbox:"string",src:"string",srcdoc:"string",shared:"string[] | 'owners' | boolean"}},We={customIntegrations:{validate:Is,help:Ms()},customTrayButtons:{validate:Ps,help:"customTrayButtons should be a dictionary of the type ".concat(JSON.stringify(gn))},url:{validate:function(t){return typeof t=="string"},help:"url should be a string"},baseUrl:{validate:function(t){return typeof t=="string"},help:"baseUrl should be a string"},token:{validate:function(t){return typeof t=="string"},help:"token should be a string",queryString:"t"},dailyConfig:{validate:function(t,e){try{return e.validateDailyConfig(t),!0}catch(n){console.error("Failed to validate dailyConfig",n)}return!1},help:"Unsupported dailyConfig. Check error logs for detailed info."},reactNativeConfig:{validate:function(t){return Ds(t,Io)},help:"reactNativeConfig should look like ".concat(JSON.stringify(Io),", all fields optional")},lang:{validate:function(t){return["da","de","en-us","en","es","fi","fr","it","jp","ka","nl","no","pl","pt","pt-BR","ru","sv","tr","user"].includes(t)},help:"language not supported. Options are: da, de, en-us, en, es, fi, fr, it, jp, ka, nl, no, pl, pt, pt-BR, ru, sv, tr, user"},userName:!0,userData:{validate:function(t){try{return ks(t),!0}catch(e){return console.error(e),!1}},help:"invalid userData type provided"},startVideoOff:!0,startAudioOff:!0,allowLocalVideo:!0,allowLocalAudio:!0,activeSpeakerMode:!0,showLeaveButton:!0,showLocalVideo:!0,showParticipantsBar:!0,showFullscreenButton:!0,showUserNameChangeUI:!0,iframeStyle:!0,customLayout:!0,cssFile:!0,cssText:!0,bodyClass:!0,videoSource:{validate:function(t,e){if(typeof t=="boolean")return e._preloadCache.allowLocalVideo=t,!0;var n;if(t instanceof MediaStreamTrack)e._sharedTracks.videoTrack=t,n={customTrack:Ie};else{if(delete e._sharedTracks.videoTrack,typeof t!="string")return console.error("videoSource must be a MediaStreamTrack, boolean, or a string"),!1;n={deviceId:t}}return e._updatePreloadCacheInputSettings({video:{settings:n}},!1),!0}},audioSource:{validate:function(t,e){if(typeof t=="boolean")return e._preloadCache.allowLocalAudio=t,!0;var n;if(t instanceof MediaStreamTrack)e._sharedTracks.audioTrack=t,n={customTrack:Ie};else{if(delete e._sharedTracks.audioTrack,typeof t!="string")return console.error("audioSource must be a MediaStreamTrack, boolean, or a string"),!1;n={deviceId:t}}return e._updatePreloadCacheInputSettings({audio:{settings:n}},!1),!0}},subscribeToTracksAutomatically:{validate:function(t,e){return e._preloadCache.subscribeToTracksAutomatically=t,!0}},theme:{validate:function(t){var e=["accent","accentText","background","backgroundAccent","baseText","border","mainAreaBg","mainAreaBgAccent","mainAreaText","supportiveText"],n=function(o){for(var r=0,i=Object.keys(o);r<i.length;r++){var s=i[r];if(!e.includes(s))return console.error('unsupported color "'.concat(s,'". Valid colors: ').concat(e.join(", "))),!1;if(!o[s].match(/^#[0-9a-f]{6}|#[0-9a-f]{3}$/i))return console.error("".concat(s,' theme color should be provided in valid hex color format. Received: "').concat(o[s],'"')),!1}return!0};return G(t)==="object"&&("light"in t&&"dark"in t||"colors"in t)?"light"in t&&"dark"in t?"colors"in t.light?"colors"in t.dark?n(t.light.colors)&&n(t.dark.colors):(console.error('Dark theme is missing "colors" property.',t),!1):(console.error('Light theme is missing "colors" property.',t),!1):n(t.colors):(console.error('Theme must contain either both "light" and "dark" properties, or "colors".',t),!1)},help:"unsupported theme configuration. Check error logs for detailed info."},layoutConfig:{validate:function(t){if("grid"in t){var e=t.grid;if("maxTilesPerPage"in e){if(!Number.isInteger(e.maxTilesPerPage))return console.error("grid.maxTilesPerPage should be an integer. You passed ".concat(e.maxTilesPerPage,".")),!1;if(e.maxTilesPerPage>49)return console.error("grid.maxTilesPerPage can't be larger than 49 without sacrificing browser performance. Please contact us at https://www.daily.co/contact to talk about your use case."),!1}if("minTilesPerPage"in e){if(!Number.isInteger(e.minTilesPerPage))return console.error("grid.minTilesPerPage should be an integer. You passed ".concat(e.minTilesPerPage,".")),!1;if(e.minTilesPerPage<1)return console.error("grid.minTilesPerPage can't be lower than 1."),!1;if("maxTilesPerPage"in e&&e.minTilesPerPage>e.maxTilesPerPage)return console.error("grid.minTilesPerPage can't be higher than grid.maxTilesPerPage."),!1}}return!0},help:"unsupported layoutConfig. Check error logs for detailed info."},receiveSettings:{validate:function(t){return Cs(t,{allowAllParticipantsKey:!1})},help:Os({allowAllParticipantsKey:!1})},sendSettings:{validate:function(t,e){return!!(function(n,o){try{return o.validateUpdateSendSettings(n),!0}catch(r){return console.error("Failed to validate send settings",r),!1}})(t,e)&&(e._preloadCache.sendSettings=t,!0)},help:"Invalid sendSettings provided. Check error logs for detailed info."},inputSettings:{validate:function(t,e){var n;return!!Ts(t)&&(e._inputSettings||(e._inputSettings={}),As(t,(n=e.properties)===null||n===void 0?void 0:n.dailyConfig,e._sharedTracks),e._updatePreloadCacheInputSettings(t,!0),!0)},help:Er()},layout:{validate:function(t){return t==="custom-v1"||t==="browser"||t==="none"},help:'layout may only be set to "custom-v1"',queryString:"layout"},emb:{queryString:"emb"},embHref:{queryString:"embHref"},dailyJsVersion:{queryString:"dailyJsVersion"},proxy:{queryString:"proxy"},strictMode:!0,allowMultipleCallInstances:!0},Kt={styles:{validate:function(t){for(var e in t)if(e!=="cam"&&e!=="screen")return!1;if(t.cam){for(var n in t.cam)if(n!=="div"&&n!=="video")return!1}if(t.screen){for(var o in t.screen)if(o!=="div"&&o!=="video")return!1}return!0},help:"styles format should be a subset of: { cam: {div: {}, video: {}}, screen: {div: {}, video: {}} }"},setSubscribedTracks:{validate:function(t,e){if(e._preloadCache.subscribeToTracksAutomatically)return!1;var n=[!0,!1,"staged"];if(n.includes(t)||!$()&&t==="avatar")return!0;var o=["audio","video","screenAudio","screenVideo","rmpAudio","rmpVideo"],r=function(i){var s=arguments.length>1&&arguments[1]!==void 0&&arguments[1];for(var l in i)if(l==="custom"){if(!n.includes(i[l])&&!r(i[l],!0))return!1}else{var d=!s&&!o.includes(l),p=!n.includes(i[l]);if(d||p)return!1}return!0};return r(t)},help:"setSubscribedTracks cannot be used when setSubscribeToTracksAutomatically is enabled, and should be of the form: "+"true".concat($()?"":" | 'avatar'"," | false | 'staged' | { [audio: true|false|'staged'], [video: true|false|'staged'], [screenAudio: true|false|'staged'], [screenVideo: true|false|'staged'] }")},setAudio:!0,setVideo:!0,setScreenShare:{validate:function(t){return t===!1},help:"setScreenShare must be false, as it's only meant for stopping remote participants' screen shares"},eject:!0,updatePermissions:{validate:function(t){for(var e=0,n=Object.entries(t);e<n.length;e++){var o=ie(n[e],2),r=o[0],i=o[1];switch(r){case"hasPresence":if(typeof i!="boolean")return!1;break;case"canSend":if(i instanceof Set||i instanceof Array||Array.isArray(i)){var s,l=["video","audio","screenVideo","screenAudio","customVideo","customAudio"],d=Co(i);try{for(d.s();!(s=d.n()).done;){var p=s.value;if(!l.includes(p))return!1}}catch(C){d.e(C)}finally{d.f()}}else if(typeof i!="boolean")return!1;(i instanceof Array||Array.isArray(i))&&(t.canSend=new Set(i));break;case"canReceive":var g=ie(ws.validateJSONObject(i),2),b=g[0],y=g[1];if(!b)return console.error(y),!1;break;case"canAdmin":if(i instanceof Set||i instanceof Array||Array.isArray(i)){var _,v=["participants","streaming","transcription"],f=Co(i);try{for(f.s();!(_=f.n()).done;){var E=_.value;if(!v.includes(E))return!1}}catch(C){f.e(C)}finally{f.f()}}else if(typeof i!="boolean")return!1;(i instanceof Array||Array.isArray(i))&&(t.canAdmin=new Set(i));break;default:return!1}}return!0},help:"updatePermissions can take hasPresence, canSend, canReceive, and canAdmin permissions. hasPresence must be a boolean. canSend can be a boolean or an Array or Set of media types (video, audio, screenVideo, screenAudio, customVideo, customAudio). canReceive must be an object specifying base, byUserId, and/or byParticipantId fields (see documentation for more details). canAdmin can be a boolean or an Array or Set of admin types (participants, streaming, transcription)."}};Promise.any||(Promise.any=(function(){var t=F((function*(e){return new Promise((function(n,o){var r=[];e.forEach((function(i){return Promise.resolve(i).then((function(s){n(s)})).catch((function(s){r.push(s),r.length===e.length&&o(r)}))}))}))}));return function(e){return t.apply(this,arguments)}})());var pu=(function(){function t(a){var u,c,h,m,k,P,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ue(this,t),h=this,m=we(m=t),Ce(c=vn(h,Ss()?Reflect.construct(m,[],we(h).constructor):m.apply(h,k)),"startListeningForDeviceChanges",(function(){ru(c.handleDeviceChange)})),Ce(c,"stopListeningForDeviceChanges",(function(){iu(c.handleDeviceChange)})),Ce(c,"handleDeviceChange",(function(U){U=U.map((function(J){return JSON.parse(JSON.stringify(J))})),c.emitDailyJSEvent({action:"available-devices-updated",availableDevices:U})})),Ce(c,"handleNativeAppStateChange",(function(){var U=F((function*(J){if(J==="destroyed")return console.warn("App has been destroyed before leaving the meeting. Cleaning up all the resources!"),void(yield c.destroy());var Se=J==="active";c.disableReactNativeAutoDeviceManagement("video")||(Se?c.camUnmutedBeforeLosingNativeActiveState&&c.setLocalVideo(!0):(c.camUnmutedBeforeLosingNativeActiveState=c.localVideo(),c.camUnmutedBeforeLosingNativeActiveState&&c.setLocalVideo(!1)))}));return function(J){return U.apply(this,arguments)}})()),Ce(c,"handleNativeAudioFocusChange",(function(U){c.disableReactNativeAutoDeviceManagement("audio")||(c._hasNativeAudioFocus=U,c.toggleParticipantAudioBasedOnNativeAudioFocus(),c._hasNativeAudioFocus?c.micUnmutedBeforeLosingNativeAudioFocus&&c.setLocalAudio(!0):(c.micUnmutedBeforeLosingNativeAudioFocus=c.localAudio(),c.setLocalAudio(!1)))})),Ce(c,"handleNativeSystemScreenCaptureStop",(function(){c.stopScreenShare()})),!Rn()&&!$())throw new Error("WebRTC not supported or suppressed");if(c.strictMode=D.strictMode===void 0||D.strictMode,c.allowMultipleCallInstances=(u=D.allowMultipleCallInstances)!==null&&u!==void 0&&u,Object.keys(ze).length&&(c._logDuplicateInstanceAttempt(),!c.allowMultipleCallInstances)){if(c.strictMode)throw new Error("Duplicate DailyIframe instances are not allowed");console.warn("Using strictMode: false to allow multiple call instances is now deprecated. Set `allowMultipleCallInstances: true`")}if(window._daily||(window._daily={pendings:[],instances:{}}),c.callClientId=bn(),ze[(P=c).callClientId]=P,window._daily.instances[c.callClientId]={},c._sharedTracks={},window._daily.instances[c.callClientId].tracks=c._sharedTracks,D.dailyJsVersion=t.version(),c._iframe=a,c._callObjectMode=D.layout==="none"&&!c._iframe,c._preloadCache={subscribeToTracksAutomatically:!0,outputDeviceId:null,inputSettings:null,sendSettings:null,videoTrackForNetworkConnectivityTest:null,videoTrackForConnectionQualityTest:null},D.showLocalVideo!==void 0?c._callObjectMode?console.error("showLocalVideo is not available in call object mode"):c._showLocalVideo=!!D.showLocalVideo:c._showLocalVideo=!0,D.showParticipantsBar!==void 0?c._callObjectMode?console.error("showParticipantsBar is not available in call object mode"):c._showParticipantsBar=!!D.showParticipantsBar:c._showParticipantsBar=!0,D.customIntegrations!==void 0?c._callObjectMode?console.error("customIntegrations is not available in call object mode"):c._customIntegrations=D.customIntegrations:c._customIntegrations={},D.customTrayButtons!==void 0?c._callObjectMode?console.error("customTrayButtons is not available in call object mode"):c._customTrayButtons=D.customTrayButtons:c._customTrayButtons={},D.activeSpeakerMode!==void 0?c._callObjectMode?console.error("activeSpeakerMode is not available in call object mode"):c._activeSpeakerMode=!!D.activeSpeakerMode:c._activeSpeakerMode=!1,D.receiveSettings?c._callObjectMode?c._receiveSettings=D.receiveSettings:console.error("receiveSettings is only available in call object mode"):c._receiveSettings={},c.validateProperties(D),c.properties=N({},D),c._inputSettings||(c._inputSettings={}),c._callObjectLoader=c._callObjectMode?new Yl(c.callClientId):null,c._callState=lr,c._isPreparingToJoin=!1,c._accessState={access:tn},c._meetingSessionSummary={},c._finalSummaryOfPrevSession={},c._meetingSessionState=$n(Oo,c._callObjectMode),c._nativeInCallAudioMode=Ao,c._participants={},c._isScreenSharing=!1,c._participantCounts=Mo,c._rmpPlayerState={},c._waitingParticipants={},c._network={threshold:"good",quality:100,networkState:"unknown",stats:{}},c._activeSpeaker={},c._localAudioLevel=0,c._isLocalAudioLevelObserverRunning=!1,c._remoteParticipantsAudioLevel={},c._isRemoteParticipantsAudioLevelObserverRunning=!1,c._maxAppMessageSize=xn,c._messageChannel=$()?new Jl:new $l,c._iframe&&(c._iframe.requestFullscreen?c._iframe.addEventListener("fullscreenchange",(function(){document.fullscreenElement===c._iframe?(c.emitDailyJSEvent({action:At}),c.sendMessageToCallMachine({action:At})):(c.emitDailyJSEvent({action:Ot}),c.sendMessageToCallMachine({action:Ot}))})):c._iframe.webkitRequestFullscreen&&c._iframe.addEventListener("webkitfullscreenchange",(function(){document.webkitFullscreenElement===c._iframe?(c.emitDailyJSEvent({action:At}),c.sendMessageToCallMachine({action:At})):(c.emitDailyJSEvent({action:Ot}),c.sendMessageToCallMachine({action:Ot}))}))),$()){var j=c.nativeUtils();j.addAudioFocusChangeListener&&j.removeAudioFocusChangeListener&&j.addAppStateChangeListener&&j.removeAppStateChangeListener&&j.addSystemScreenCaptureStopListener&&j.removeSystemScreenCaptureStopListener||console.warn("expected (add|remove)(AudioFocusChange|AppActiveStateChange|SystemScreenCaptureStop)Listener to be available in React Native"),c._hasNativeAudioFocus=!0,j.addAudioFocusChangeListener(c.handleNativeAudioFocusChange),j.addAppStateChangeListener(c.handleNativeAppStateChange),j.addSystemScreenCaptureStopListener(c.handleNativeSystemScreenCaptureStop)}return c._callObjectMode&&c.startListeningForDeviceChanges(),c._messageChannel.addListenerForMessagesFromCallMachine(c.handleMessageFromCallMachine,c.callClientId,c),c}return yn(t,Vt),de(t,[{key:"destroy",value:(Gr=F((function*(){var a;try{yield this.leave()}catch{}var u=this._iframe;if(u){var c=u.parentElement;c&&c.removeChild(u)}if(this._messageChannel.removeListener(this.handleMessageFromCallMachine),$()){var h=this.nativeUtils();h.removeAudioFocusChangeListener(this.handleNativeAudioFocusChange),h.removeAppStateChangeListener(this.handleNativeAppStateChange),h.removeSystemScreenCaptureStopListener(this.handleNativeSystemScreenCaptureStop)}this._callObjectMode&&this.stopListeningForDeviceChanges(),this.resetMeetingDependentVars(),this._destroyed=!0,this.emitDailyJSEvent({action:"call-instance-destroyed"}),delete ze[this.callClientId],!((a=window)===null||a===void 0||(a=a._daily)===null||a===void 0)&&a.instances&&delete window._daily.instances[this.callClientId],this.strictMode&&(this.callClientId=void 0)})),function(){return Gr.apply(this,arguments)})},{key:"isDestroyed",value:function(){return!!this._destroyed}},{key:"loadCss",value:function(a){var u=a.bodyClass,c=a.cssFile,h=a.cssText;return B(),this.sendMessageToCallMachine({action:"load-css",cssFile:this.absoluteUrl(c),bodyClass:u,cssText:h}),this}},{key:"iframe",value:function(){return B(),this._iframe}},{key:"meetingState",value:function(){return this._callState}},{key:"accessState",value:function(){return ye(this._callObjectMode,"accessState()"),this._accessState}},{key:"participants",value:function(){return this._participants}},{key:"participantCounts",value:function(){return this._participantCounts}},{key:"waitingParticipants",value:function(){return ye(this._callObjectMode,"waitingParticipants()"),this._waitingParticipants}},{key:"validateParticipantProperties",value:function(a,u){for(var c in u){if(!Kt[c])throw new Error("unrecognized updateParticipant property ".concat(c));if(Kt[c].validate&&!Kt[c].validate(u[c],this,this._participants[a]))throw new Error(Kt[c].help)}}},{key:"updateParticipant",value:function(a,u){return this._participants.local&&this._participants.local.session_id===a&&(a="local"),a&&u&&(this.validateParticipantProperties(a,u),this.sendMessageToCallMachine({action:"update-participant",id:a,properties:u})),this}},{key:"updateParticipants",value:function(a){var u=this._participants.local&&this._participants.local.session_id;for(var c in a)c===u&&(c="local"),c&&a[c]&&this.validateParticipantProperties(c,a[c]);return this.sendMessageToCallMachine({action:"update-participants",participants:a}),this}},{key:"updateWaitingParticipant",value:(Jr=F((function*(){var a=this,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ye(this._callObjectMode,"updateWaitingParticipant()"),W(this._callState,"updateWaitingParticipant()"),typeof u!="string"||G(c)!=="object")throw new Error("updateWaitingParticipant() must take an id string and a updates object");return new Promise((function(h,m){a.sendMessageToCallMachine({action:"daily-method-update-waiting-participant",id:u,updates:c},(function(k){k.error&&m(k.error),k.id||m(new Error("unknown error in updateWaitingParticipant()")),h({id:k.id})}))}))})),function(){return Jr.apply(this,arguments)})},{key:"updateWaitingParticipants",value:($r=F((function*(){var a=this,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ye(this._callObjectMode,"updateWaitingParticipants()"),W(this._callState,"updateWaitingParticipants()"),G(u)!=="object")throw new Error("updateWaitingParticipants() must take a mapping between ids and update objects");return new Promise((function(c,h){a.sendMessageToCallMachine({action:"daily-method-update-waiting-participants",updatesById:u},(function(m){m.error&&h(m.error),m.ids||h(new Error("unknown error in updateWaitingParticipants()")),c({ids:m.ids})}))}))})),function(){return $r.apply(this,arguments)})},{key:"requestAccess",value:(Br=F((function*(){var a=this,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=u.access,h=c===void 0?{level:la}:c,m=u.name,k=m===void 0?"":m;return ye(this._callObjectMode,"requestAccess()"),W(this._callState,"requestAccess()"),new Promise((function(P,D){a.sendMessageToCallMachine({action:"daily-method-request-access",access:h,name:k},(function(j){j.error&&D(j.error),j.access||D(new Error("unknown error in requestAccess()")),P({access:j.access,granted:j.granted})}))}))})),function(){return Br.apply(this,arguments)})},{key:"localAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.audio.state):null}},{key:"localVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.video.state):null}},{key:"setLocalAudio",value:function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return"forceDiscardTrack"in u&&($()?(console.warn("forceDiscardTrack option not supported in React Native; ignoring"),u={}):a&&(console.warn("forceDiscardTrack option only supported when calling setLocalAudio(false); ignoring"),u={})),this.sendMessageToCallMachine({action:"local-audio",state:a,options:u}),this}},{key:"localScreenAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenAudio.state):null}},{key:"localScreenVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenVideo.state):null}},{key:"updateScreenShare",value:function(a){if(this._isScreenSharing)return this.sendMessageToCallMachine({action:"local-screen-update",options:a}),this;console.warn("There is no screen share in progress. Try calling startScreenShare first.")}},{key:"setLocalVideo",value:function(a){return this.sendMessageToCallMachine({action:"local-video",state:a}),this}},{key:"_setAllowLocalAudio",value:function(a){if(this._preloadCache.allowLocalAudio=a,this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-allow-local-audio",state:a}),this}},{key:"_setAllowLocalVideo",value:function(a){if(this._preloadCache.allowLocalVideo=a,this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-allow-local-video",state:a}),this}},{key:"getReceiveSettings",value:(Ur=F((function*(a){var u=this,c=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).showInheritedValues,h=c!==void 0&&c;if(ye(this._callObjectMode,"getReceiveSettings()"),!this._callMachineInitialized)return this._receiveSettings;switch(G(a)){case"string":return new Promise((function(m){u.sendMessageToCallMachine({action:"get-single-participant-receive-settings",id:a,showInheritedValues:h},(function(k){m(k.receiveSettings)}))}));case"undefined":return this._receiveSettings;default:throw new Error('first argument to getReceiveSettings() must be a participant id (or "base"), or there should be no arguments')}})),function(a){return Ur.apply(this,arguments)})},{key:"updateReceiveSettings",value:($e=F((function*(a){var u=this;if(ye(this._callObjectMode,"updateReceiveSettings()"),!Cs(a,{allowAllParticipantsKey:!0}))throw new Error(Os({allowAllParticipantsKey:!0}));return W(this._callState,"updateReceiveSettings()","To specify receive settings earlier, use the receiveSettings config property."),new Promise((function(c){u.sendMessageToCallMachine({action:"update-receive-settings",receiveSettings:a},(function(h){c({receiveSettings:h.receiveSettings})}))}))})),function(a){return $e.apply(this,arguments)})},{key:"_prepInputSettingsForSharing",value:function(a,u){if(a){var c={};if(a.audio){var h,m,k;a.audio.settings&&(!Object.keys(a.audio.settings).length&&u||(c.audio={settings:N({},a.audio.settings)})),u&&(h=c.audio)!==null&&h!==void 0&&(h=h.settings)!==null&&h!==void 0&&h.customTrack&&(c.audio.settings={customTrack:this._sharedTracks.audioTrack});var P=((m=a.audio.processor)===null||m===void 0?void 0:m.type)==="none"&&((k=a.audio.processor)===null||k===void 0?void 0:k._isDefaultWhenNone);if(a.audio.processor&&!P){var D=N({},a.audio.processor);delete D._isDefaultWhenNone,c.audio=N(N({},c.audio),{},{processor:D})}}if(a.video){var j,U,J;a.video.settings&&(!Object.keys(a.video.settings).length&&u||(c.video={settings:N({},a.video.settings)})),u&&(j=c.video)!==null&&j!==void 0&&(j=j.settings)!==null&&j!==void 0&&j.customTrack&&(c.video.settings={customTrack:this._sharedTracks.videoTrack});var Se=((U=a.video.processor)===null||U===void 0?void 0:U.type)==="none"&&((J=a.video.processor)===null||J===void 0?void 0:J._isDefaultWhenNone);if(a.video.processor&&!Se){var Je=N({},a.video.processor);delete Je._isDefaultWhenNone,c.video=N(N({},c.video),{},{processor:Je})}}return c}}},{key:"getInputSettings",value:function(){var a=this;return B(),new Promise((function(u){u(a._getInputSettings())}))}},{key:"_getInputSettings",value:function(){var a,u,c,h,m,k,P={processor:{type:"none",_isDefaultWhenNone:!0}};this._inputSettings?(a=((c=this._inputSettings)===null||c===void 0?void 0:c.video)||P,u=((h=this._inputSettings)===null||h===void 0?void 0:h.audio)||P):(a=((m=this._preloadCache)===null||m===void 0||(m=m.inputSettings)===null||m===void 0?void 0:m.video)||P,u=((k=this._preloadCache)===null||k===void 0||(k=k.inputSettings)===null||k===void 0?void 0:k.audio)||P);var D={audio:u,video:a};return this._prepInputSettingsForSharing(D,!0)}},{key:"_updatePreloadCacheInputSettings",value:function(a,u){var c=this._inputSettings||{},h={};if(a.video){var m,k,P;h.video={},a.video.settings?(h.video.settings={},u||a.video.settings.customTrack||(P=c.video)===null||P===void 0||!P.settings?h.video.settings=a.video.settings:h.video.settings=N(N({},c.video.settings),a.video.settings),Object.keys(h.video.settings).length||delete h.video.settings):(m=c.video)!==null&&m!==void 0&&m.settings&&(h.video.settings=c.video.settings),a.video.processor?h.video.processor=a.video.processor:(k=c.video)!==null&&k!==void 0&&k.processor&&(h.video.processor=c.video.processor)}else c.video&&(h.video=c.video);if(a.audio){var D,j,U;h.audio={},a.audio.settings?(h.audio.settings={},u||a.audio.settings.customTrack||(U=c.audio)===null||U===void 0||!U.settings?h.audio.settings=a.audio.settings:h.audio.settings=N(N({},c.audio.settings),a.audio.settings),Object.keys(h.audio.settings).length||delete h.audio.settings):(D=c.audio)!==null&&D!==void 0&&D.settings&&(h.audio.settings=c.audio.settings),a.audio.processor?h.audio.processor=a.audio.processor:(j=c.audio)!==null&&j!==void 0&&j.processor&&(h.audio.processor=c.audio.processor)}else c.audio&&(h.audio=c.audio);this._maybeUpdateInputSettings(h)}},{key:"_devicesFromInputSettings",value:function(a){var u,c,h=(a==null||(u=a.video)===null||u===void 0||(u=u.settings)===null||u===void 0?void 0:u.deviceId)||null,m=(a==null||(c=a.audio)===null||c===void 0||(c=c.settings)===null||c===void 0?void 0:c.deviceId)||null,k=this._preloadCache.outputDeviceId||null;return{camera:h?{deviceId:h}:{},mic:m?{deviceId:m}:{},speaker:k?{deviceId:k}:{}}}},{key:"updateInputSettings",value:(Be=F((function*(a){var u=this;return B(),Ts(a)?a.video||a.audio?(As(a,this.properties.dailyConfig,this._sharedTracks),this._callObjectMode&&!this._callMachineInitialized?(this._updatePreloadCacheInputSettings(a,!0),this._getInputSettings()):new Promise((function(c,h){u.sendMessageToCallMachine({action:"update-input-settings",inputSettings:a},(function(m){if(m.error)h(m.error);else{if(m.returnPreloadCache)return u._updatePreloadCacheInputSettings(a,!0),void c(u._getInputSettings());u._maybeUpdateInputSettings(m.inputSettings),c(u._prepInputSettingsForSharing(m.inputSettings,!0))}}))}))):this._getInputSettings():(console.error(Er()),Promise.reject(Er()))})),function(a){return Be.apply(this,arguments)})},{key:"setBandwidth",value:function(a){var u=a.kbs,c=a.trackConstraints;if(B(),this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-bandwidth",kbs:u,trackConstraints:c}),this}},{key:"getDailyLang",value:function(){var a=this;if(B(),this._callMachineInitialized)return new Promise((function(u){a.sendMessageToCallMachine({action:"get-daily-lang"},(function(c){delete c.action,delete c.callbackStamp,u(c)}))}))}},{key:"setDailyLang",value:function(a){return B(),this.sendMessageToCallMachine({action:"set-daily-lang",lang:a}),this}},{key:"setProxyUrl",value:function(a){return this.sendMessageToCallMachine({action:"set-proxy-url",proxyUrl:a}),this}},{key:"setIceConfig",value:function(a){return this.sendMessageToCallMachine({action:"set-ice-config",iceConfig:a}),this}},{key:"meetingSessionSummary",value:function(){return[je,Ae].includes(this._callState)?this._finalSummaryOfPrevSession:this._meetingSessionSummary}},{key:"getMeetingSession",value:(te=F((function*(){var a=this;return console.warn("getMeetingSession() is deprecated: use meetingSessionSummary(), which will return immediately"),W(this._callState,"getMeetingSession()"),new Promise((function(u){a.sendMessageToCallMachine({action:"get-meeting-session"},(function(c){delete c.action,delete c.callbackStamp,u(c)}))}))})),function(){return te.apply(this,arguments)})},{key:"meetingSessionState",value:function(){return W(this._callState,"meetingSessionState"),this._meetingSessionState}},{key:"setMeetingSessionData",value:function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"replace";ye(this._callObjectMode,"setMeetingSessionData()"),W(this._callState,"setMeetingSessionData");try{(function(c,h){new Gl({data:c,mergeStrategy:h})})(a,u)}catch(c){throw console.error(c),c}try{this.sendMessageToCallMachine({action:"set-session-data",data:a,mergeStrategy:u})}catch(c){throw new Error("Error setting meeting session data: ".concat(c))}}},{key:"setUserName",value:function(a,u){var c=this;return this.properties.userName=a,new Promise((function(h){c.sendMessageToCallMachine({action:"set-user-name",name:a??"",thisMeetingOnly:$()||!!u&&!!u.thisMeetingOnly},(function(m){delete m.action,delete m.callbackStamp,h(m)}))}))}},{key:"setUserData",value:(x=F((function*(a){var u=this;try{ks(a)}catch(c){throw console.error(c),c}if(this.properties.userData=a,this._callMachineInitialized)return new Promise((function(c){try{u.sendMessageToCallMachine({action:"set-user-data",userData:a},(function(h){delete h.action,delete h.callbackStamp,c(h)}))}catch(h){throw new Error("Error setting user data: ".concat(h))}}))})),function(a){return x.apply(this,arguments)})},{key:"validateAudioLevelInterval",value:function(a){if(a&&(a<100||typeof a!="number"))throw new Error("The interval must be a number greater than or equal to 100 milliseconds.")}},{key:"startLocalAudioLevelObserver",value:function(a){var u=this;if(typeof AudioWorkletNode>"u"&&!$())throw new Error("startLocalAudioLevelObserver() is not supported on this browser");if(this.validateAudioLevelInterval(a),this._callMachineInitialized)return this._isLocalAudioLevelObserverRunning=!0,new Promise((function(c,h){u.sendMessageToCallMachine({action:"start-local-audio-level-observer",interval:a},(function(m){u._isLocalAudioLevelObserverRunning=!m.error,m.error?h({error:m.error}):c()}))}));this._preloadCache.localAudioLevelObserver={enabled:!0,interval:a}}},{key:"isLocalAudioLevelObserverRunning",value:function(){return this._isLocalAudioLevelObserverRunning}},{key:"stopLocalAudioLevelObserver",value:function(){this._preloadCache.localAudioLevelObserver=null,this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-local-audio-level-observer"})}},{key:"startRemoteParticipantsAudioLevelObserver",value:function(a){var u=this;if(this.validateAudioLevelInterval(a),this._callMachineInitialized)return this._isRemoteParticipantsAudioLevelObserverRunning=!0,new Promise((function(c,h){u.sendMessageToCallMachine({action:"start-remote-participants-audio-level-observer",interval:a},(function(m){u._isRemoteParticipantsAudioLevelObserverRunning=!m.error,m.error?h({error:m.error}):c()}))}));this._preloadCache.remoteParticipantsAudioLevelObserver={enabled:!0,interval:a}}},{key:"isRemoteParticipantsAudioLevelObserverRunning",value:function(){return this._isRemoteParticipantsAudioLevelObserverRunning}},{key:"stopRemoteParticipantsAudioLevelObserver",value:function(){this._preloadCache.remoteParticipantsAudioLevelObserver=null,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-remote-participants-audio-level-observer"})}},{key:"startCamera",value:(Ue=F((function*(){var a=this,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ye(this._callObjectMode,"startCamera()"),Un(this._callState,this._isPreparingToJoin,"startCamera()","Did you mean to use setLocalAudio() and/or setLocalVideo() instead?"),this.needsLoad())try{yield this.load(u)}catch(c){return Promise.reject(c)}else{if(this._didPreAuth){if(u.url&&u.url!==this.properties.url)return console.error("url in startCamera() is different than the one used in preAuth()"),Promise.reject();if(u.token&&u.token!==this.properties.token)return console.error("token in startCamera() is different than the one used in preAuth()"),Promise.reject()}this.validateProperties(u),this.properties=N(N({},this.properties),u)}return new Promise((function(c){a._preloadCache.inputSettings=a._prepInputSettingsForSharing(a._inputSettings,!1),a.sendMessageToCallMachine({action:"start-camera",properties:ct(a.properties,a.callClientId),preloadCache:ct(a._preloadCache,a.callClientId)},(function(h){c({camera:h.camera,mic:h.mic,speaker:h.speaker})}))}))})),function(){return Ue.apply(this,arguments)})},{key:"validateCustomTrack",value:function(a,u,c){if(c&&c.length>50)throw new Error("Custom track `trackName` must not be more than 50 characters");if(u&&u!=="music"&&u!=="speech"&&!(u instanceof Object))throw new Error("Custom track `mode` must be either `music` | `speech` | `DailyMicAudioModeSettings` or `undefined`");if(c&&["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo","customVideoDefaults"].includes(c))throw new Error("Custom track `trackName` must not match a track name already used by daily: cam-audio, cam-video, customVideoDefaults, screen-video, screen-audio, rmpAudio, rmpVideo");if(!(a instanceof MediaStreamTrack))throw new Error("Custom tracks provided must be instances of MediaStreamTrack")}},{key:"startCustomTrack",value:function(){var a=this,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{track,mode,trackName,ignoreAudioLevel};return B(),W(this._callState,"startCustomTrack()"),this.validateCustomTrack(u.track,u.mode,u.trackName),new Promise((function(c,h){a._sharedTracks.customTrack=u.track,u.track=Ie,a.sendMessageToCallMachine({action:"start-custom-track",properties:u},(function(m){m.error?h({error:m.error}):c(m.mediaTag)}))}))}},{key:"stopCustomTrack",value:function(a){var u=this;return B(),W(this._callState,"stopCustomTrack()"),new Promise((function(c){u.sendMessageToCallMachine({action:"stop-custom-track",mediaTag:a},(function(h){c(h.mediaTag)}))}))}},{key:"setCamera",value:function(a){var u=this;return kt(),Qt(this._callMachineInitialized,"setCamera()"),new Promise((function(c){u.sendMessageToCallMachine({action:"set-camera",cameraDeviceId:a},(function(h){c({device:h.device})}))}))}},{key:"setAudioDevice",value:(ve=F((function*(a){return kt(),this.nativeUtils().setAudioDevice(a),{deviceId:yield this.nativeUtils().getAudioDevice()}})),function(a){return ve.apply(this,arguments)})},{key:"cycleCamera",value:function(){var a=this,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise((function(c){a.sendMessageToCallMachine({action:"cycle-camera",properties:u},(function(h){c({device:h.device})}))}))}},{key:"cycleMic",value:function(){var a=this;return B(),new Promise((function(u){a.sendMessageToCallMachine({action:"cycle-mic"},(function(c){u({device:c.device})}))}))}},{key:"getCameraFacingMode",value:function(){var a=this;return kt(),new Promise((function(u){a.sendMessageToCallMachine({action:"get-camera-facing-mode"},(function(c){u(c.facingMode)}))}))}},{key:"setInputDevicesAsync",value:(H=F((function*(a){var u=this,c=a.audioDeviceId,h=a.videoDeviceId,m=a.audioSource,k=a.videoSource;if(B(),m!==void 0&&(c=m),k!==void 0&&(h=k),typeof c=="boolean"&&(this._setAllowLocalAudio(c),c=void 0),typeof h=="boolean"&&(this._setAllowLocalVideo(h),h=void 0),!c&&!h)return yield this.getInputDevices();var P={};return c&&(c instanceof MediaStreamTrack?(this._sharedTracks.audioTrack=c,c=Ie,P.audio={settings:{customTrack:c}}):(delete this._sharedTracks.audioTrack,P.audio={settings:{deviceId:c}})),h&&(h instanceof MediaStreamTrack?(this._sharedTracks.videoTrack=h,h=Ie,P.video={settings:{customTrack:h}}):(delete this._sharedTracks.videoTrack,P.video={settings:{deviceId:h}})),this._callObjectMode&&this.needsLoad()?(this._updatePreloadCacheInputSettings(P,!1),this._devicesFromInputSettings(this._inputSettings)):new Promise((function(D){u.sendMessageToCallMachine({action:"set-input-devices",audioDeviceId:c,videoDeviceId:h},(function(j){if(delete j.action,delete j.callbackStamp,j.returnPreloadCache)return u._updatePreloadCacheInputSettings(P,!1),void D(u._devicesFromInputSettings(u._inputSettings));D(j)}))}))})),function(a){return H.apply(this,arguments)})},{key:"setOutputDeviceAsync",value:(R=F((function*(a){var u=this,c=a.outputDeviceId;if(B(),!c||typeof c!="string")throw new Error("outputDeviceId must be provided and must be a valid device id");return this._preloadCache.outputDeviceId=c,this._callObjectMode&&this.needsLoad()?this._devicesFromInputSettings(this._inputSettings):new Promise((function(h,m){u.sendMessageToCallMachine({action:"set-output-device",outputDeviceId:c},(function(k){if(delete k.action,delete k.callbackStamp,k.error){var P=new Error(k.error.message);return P.type=k.error.type,void m(P)}k.returnPreloadCache?h(u._devicesFromInputSettings(u._inputSettings)):h(k)}))}))})),function(a){return R.apply(this,arguments)})},{key:"getInputDevices",value:(q=F((function*(){var a=this;return this._callObjectMode&&this.needsLoad()?this._devicesFromInputSettings(this._inputSettings):new Promise((function(u){a.sendMessageToCallMachine({action:"get-input-devices"},(function(c){c.returnPreloadCache?u(a._devicesFromInputSettings(a._inputSettings)):u({camera:c.camera,mic:c.mic,speaker:c.speaker})}))}))})),function(){return q.apply(this,arguments)})},{key:"nativeInCallAudioMode",value:function(){return kt(),this._nativeInCallAudioMode}},{key:"setNativeInCallAudioMode",value:function(a){if(kt(),[Ao,du].includes(a)){if(a!==this._nativeInCallAudioMode)return this._nativeInCallAudioMode=a,!this.disableReactNativeAutoDeviceManagement("audio")&&rn(this._callState,this._isPreparingToJoin)&&this.nativeUtils().setAudioMode(this._nativeInCallAudioMode),this}else console.error("invalid in-call audio mode specified: ",a)}},{key:"preAuth",value:(A=F((function*(){var a=this,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ye(this._callObjectMode,"preAuth()"),Un(this._callState,this._isPreparingToJoin,"preAuth()"),this.needsLoad()&&(yield this.load(u)),!u.url)throw new Error("preAuth() requires at least a url to be provided");return this.validateProperties(u),this.properties=N(N({},this.properties),u),new Promise((function(c,h){a._preloadCache.inputSettings=a._prepInputSettingsForSharing(a._inputSettings,!1),a.sendMessageToCallMachine({action:"daily-method-preauth",properties:ct(a.properties,a.callClientId),preloadCache:ct(a._preloadCache,a.callClientId)},(function(m){return m.error?h(m.error):m.access?(a._didPreAuth=!0,void c({access:m.access})):h(new Error("unknown error in preAuth()"))}))}))})),function(){return A.apply(this,arguments)})},{key:"load",value:(L=F((function*(a){var u=this;if(this.needsLoad()){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");if(a&&(this.validateProperties(a),this.properties=N(N({},this.properties),a)),!this._callObjectMode&&!this.properties.url)throw new Error("can't load iframe meeting because url property isn't set");return this._updateCallState(to),this.emitDailyJSEvent({action:ga}),this._callObjectMode?new Promise((function(c,h){u._callObjectLoader.cancel();var m=Date.now();u._callObjectLoader.load(u.properties.dailyConfig,(function(k){u._bundleLoadTime=k?"no-op":Date.now()-m,u._updateCallState(no),k&&u.emitDailyJSEvent({action:dr}),c()}),(function(k,P){if(u.emitDailyJSEvent({action:va}),!P){u._updateCallState(Ae),u.resetMeetingDependentVars();var D={action:gr,errorMsg:k.msg,error:{type:"connection-error",msg:"Failed to load call object bundle.",details:{on:"load",sourceError:k,bundleUrl:sn(u.properties.dailyConfig)}}};u._maybeSendToSentry(D),u.emitDailyJSEvent(D),h(k.msg)}}))})):(this._iframe.src=Yo(this.assembleMeetingUrl(),this.properties.dailyConfig),new Promise((function(c,h){u._loadedCallback=function(m){u._callState!==Ae?(u._updateCallState(no),(u.properties.cssFile||u.properties.cssText)&&u.loadCss(u.properties),c()):h(m)}})))}})),function(a){return L.apply(this,arguments)})},{key:"join",value:(T=F((function*(){var a=this,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._testCallInProgress&&this.stopTestCallQuality();var c=!1;if(this.needsLoad()){this.updateIsPreparingToJoin(!0);try{yield this.load(u)}catch(h){return this.updateIsPreparingToJoin(!1),Promise.reject(h)}}else{if(c=!(!this.properties.cssFile&&!this.properties.cssText),this._didPreAuth){if(u.url&&u.url!==this.properties.url)return console.error("url in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject();if(u.token&&u.token!==this.properties.token)return console.error("token in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject()}if(u.url&&!this._callObjectMode&&u.url&&u.url!==this.properties.url)return console.error("url in join() is different than the one used in load() (".concat(this.properties.url," -> ").concat(u.url,")")),this.updateIsPreparingToJoin(!1),Promise.reject();this.validateProperties(u),this.properties=N(N({},this.properties),u)}return u.showLocalVideo!==void 0&&(this._callObjectMode?console.error("showLocalVideo is not available in callObject mode"):this._showLocalVideo=!!u.showLocalVideo),u.showParticipantsBar!==void 0&&(this._callObjectMode?console.error("showParticipantsBar is not available in callObject mode"):this._showParticipantsBar=!!u.showParticipantsBar),this._callState===Fe||this._callState===hn?(console.warn("already joined meeting, call leave() before joining again"),void this.updateIsPreparingToJoin(!1)):(this._updateCallState(hn,!1),this.emitDailyJSEvent({action:_a}),this._preloadCache.inputSettings=this._prepInputSettingsForSharing(this._inputSettings||{},!1),this.sendMessageToCallMachine({action:"join-meeting",properties:ct(this.properties,this.callClientId),preloadCache:ct(this._preloadCache,this.callClientId)}),new Promise((function(h,m){a._joinedCallback=function(k,P){if(a._callState!==Ae){if(a._updateCallState(Fe),k)for(var D in k){if(a._callObjectMode){var j=a._callMachine().store;mo(k[D],j),go(k[D],j),vo(k[D],a._participants[D],j)}a._participants[D]=N({},k[D]),a.toggleParticipantAudioBasedOnNativeAudioFocus()}c&&a.loadCss(a.properties),h(k)}else m(P)}})))})),function(){return T.apply(this,arguments)})},{key:"leave",value:(S=F((function*(){var a=this;return this._testCallInProgress&&this.stopTestCallQuality(),new Promise((function(u){a._callState===je||a._callState===Ae?u():a._callObjectLoader&&!a._callObjectLoader.loaded?(a._callObjectLoader.cancel(),a._updateCallState(je),a.resetMeetingDependentVars(),a.emitDailyJSEvent({action:je}),u()):(a._resolveLeave=u,a.sendMessageToCallMachine({action:"leave-meeting"}))}))})),function(){return S.apply(this,arguments)})},{key:"startScreenShare",value:(w=F((function*(){var a=this,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Qt(this._callMachineInitialized,"startScreenShare()"),u.screenVideoSendSettings&&this._validateVideoSendSettings("screenVideo",u.screenVideoSendSettings),u.mediaStream&&(this._sharedTracks.screenMediaStream=u.mediaStream,u.mediaStream=Ie),typeof DailyNativeUtils<"u"&&DailyNativeUtils.isIOS!==void 0&&DailyNativeUtils.isIOS){var c=this.nativeUtils();if(yield c.isScreenBeingCaptured())return void this.emitDailyJSEvent({action:mr,type:"screen-share-error",errorMsg:"Could not start the screen sharing. The screen is already been captured!"});c.setSystemScreenCaptureStartCallback((function(){c.setSystemScreenCaptureStartCallback(null),a.sendMessageToCallMachine({action:io,captureOptions:u})})),c.presentSystemScreenCapturePrompt()}else this.sendMessageToCallMachine({action:io,captureOptions:u})})),function(){return w.apply(this,arguments)})},{key:"stopScreenShare",value:function(){Qt(this._callMachineInitialized,"stopScreenShare()"),this.sendMessageToCallMachine({action:"local-screen-stop"})}},{key:"startRecording",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=a.type;if(u&&u!=="cloud"&&u!=="raw-tracks"&&u!=="local")throw new Error("invalid type: ".concat(u,", allowed values 'cloud', 'raw-tracks', or 'local'"));this.sendMessageToCallMachine(N({action:"local-recording-start"},a))}},{key:"updateRecording",value:function(a){var u=a.layout,c=u===void 0?{preset:"default"}:u,h=a.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-recording",layout:c,instanceId:h})}},{key:"stopRecording",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(N({action:"local-recording-stop"},a))}},{key:"startLiveStreaming",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(N({action:"daily-method-start-live-streaming"},a))}},{key:"updateLiveStreaming",value:function(a){var u=a.layout,c=u===void 0?{preset:"default"}:u,h=a.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-live-streaming",layout:c,instanceId:h})}},{key:"addLiveStreamingEndpoints",value:function(a){var u=a.endpoints,c=a.instanceId;this.sendMessageToCallMachine({action:oo,endpointsOp:Rl,endpoints:u,instanceId:c})}},{key:"removeLiveStreamingEndpoints",value:function(a){var u=a.endpoints,c=a.instanceId;this.sendMessageToCallMachine({action:oo,endpointsOp:Fl,endpoints:u,instanceId:c})}},{key:"stopLiveStreaming",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(N({action:"daily-method-stop-live-streaming"},a))}},{key:"validateDailyConfig",value:function(a){a.camSimulcastEncodings&&(console.warn("camSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide camera simulcast settings."),this.validateSimulcastEncodings(a.camSimulcastEncodings)),a.screenSimulcastEncodings&&console.warn("screenSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide screen simulcast settings."),ps()&&a.noAutoDefaultDeviceChange&&console.warn("noAutoDefaultDeviceChange is not supported on Android, and will be ignored.")}},{key:"validateSimulcastEncodings",value:function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(a){if(!(a instanceof Array||Array.isArray(a)))throw new Error("encodings must be an Array");if(!No(a.length,1,3))throw new Error("encodings must be an Array with between 1 to ".concat(3," layers"));for(var h=0;h<a.length;h++){var m=a[h];for(var k in this._validateEncodingLayerHasValidProperties(m),m)if(Vn.includes(k)){if(typeof m[k]!="number")throw new Error("".concat(k," must be a number"));if(u){var P=u[k],D=P.min,j=P.max;if(!No(m[k],D,j))throw new Error("".concat(k," value not in range. valid range: ").concat(D," to ").concat(j))}}else if(!["active","scalabilityMode"].includes(k))throw new Error("Invalid key ".concat(k,", valid keys are:")+Object.values(Vn));if(c&&!m.hasOwnProperty("maxBitrate"))throw new Error("maxBitrate is not specified")}}}},{key:"startRemoteMediaPlayer",value:(I=F((function*(a){var u=this,c=a.url,h=a.settings,m=h===void 0?{state:vr.PLAY}:h;try{(function(k){if(typeof k!="string")throw new Error('url parameter must be "string" type')})(c),jo(m),(function(k){for(var P in k)if(!Po.includes(P))throw new Error("Invalid key ".concat(P,", valid keys are: ").concat(Po));k.simulcastEncodings&&this.validateSimulcastEncodings(k.simulcastEncodings,Es,!0)})(m)}catch(k){throw console.error("invalid argument Error: ".concat(k)),console.error(`startRemoteMediaPlayer arguments must be of the form:
  { url: "playback url",
  settings?:
  {state: "play"|"pause", simulcastEncodings?: [{}] } }`),k}return new Promise((function(k,P){u.sendMessageToCallMachine({action:"daily-method-start-remote-media-player",url:c,settings:m},(function(D){D.error?P({error:D.error,errorMsg:D.errorMsg}):k({session_id:D.session_id,remoteMediaPlayerState:{state:D.state,settings:D.settings}})}))}))})),function(a){return I.apply(this,arguments)})},{key:"stopRemoteMediaPlayer",value:(M=F((function*(a){var u=this;if(typeof a!="string")throw new Error(" remotePlayerID must be of type string");return new Promise((function(c,h){u.sendMessageToCallMachine({action:"daily-method-stop-remote-media-player",session_id:a},(function(m){m.error?h({error:m.error,errorMsg:m.errorMsg}):c()}))}))})),function(a){return M.apply(this,arguments)})},{key:"updateRemoteMediaPlayer",value:(C=F((function*(a){var u=this,c=a.session_id,h=a.settings;try{jo(h)}catch(m){throw console.error("invalid argument Error: ".concat(m)),console.error(`updateRemoteMediaPlayer arguments must be of the form:
  session_id: "participant session",
  { settings?: {state: "play"|"pause"} }`),m}return new Promise((function(m,k){u.sendMessageToCallMachine({action:"daily-method-update-remote-media-player",session_id:c,settings:h},(function(P){P.error?k({error:P.error,errorMsg:P.errorMsg}):m({session_id:P.session_id,remoteMediaPlayerState:{state:P.state,settings:P.settings}})}))}))})),function(a){return C.apply(this,arguments)})},{key:"startTranscription",value:function(a){W(this._callState,"startTranscription()"),this.sendMessageToCallMachine(N({action:"daily-method-start-transcription"},a))}},{key:"updateTranscription",value:function(a){if(W(this._callState,"updateTranscription()"),!a)throw new Error("updateTranscription Error: options is mandatory");if(G(a)!=="object")throw new Error("updateTranscription Error: options must be object type");if(a.participants&&!Array.isArray(a.participants))throw new Error("updateTranscription Error: participants must be an array");this.sendMessageToCallMachine(N({action:"daily-method-update-transcription"},a))}},{key:"stopTranscription",value:function(a){if(W(this._callState,"stopTranscription()"),a&&G(a)!=="object")throw new Error("stopTranscription Error: options must be object type");if(a&&!a.instanceId)throw new Error('"instanceId" not provided');this.sendMessageToCallMachine(N({action:"daily-method-stop-transcription"},a))}},{key:"startDialOut",value:(E=F((function*(a){var u=this;W(this._callState,"startDialOut()");var c=function(P){if(P){if(!Array.isArray(P))throw new Error("Error starting dial out: audio codec must be an array");if(P.length<=0)throw new Error("Error starting dial out: audio codec array specified but empty");P.forEach((function(D){if(typeof D!="string")throw new Error("Error starting dial out: audio codec must be a string");if(D!=="OPUS"&&D!=="PCMU"&&D!=="PCMA"&&D!=="G722")throw new Error("Error starting dial out: audio codec must be one of OPUS, PCMU, PCMA, G722")}))}};if(!a.sipUri&&!a.phoneNumber)throw new Error("Error starting dial out: either a sip uri or phone number must be provided");if(a.sipUri&&a.phoneNumber)throw new Error("Error starting dial out: only one of sip uri or phone number must be provided");if(a.sipUri){if(typeof a.sipUri!="string")throw new Error("Error starting dial out: sipUri must be a string");if(!a.sipUri.startsWith("sip:"))throw new Error("Error starting dial out: Invalid SIP URI, must start with 'sip:'");if(a.video&&typeof a.video!="boolean")throw new Error("Error starting dial out: video must be a boolean value");(function(P){if(P&&(c(P.audio),P.video)){if(!Array.isArray(P.video))throw new Error("Error starting dial out: video codec must be an array");if(P.video.length<=0)throw new Error("Error starting dial out: video codec array specified but empty");P.video.forEach((function(D){if(typeof D!="string")throw new Error("Error starting dial out: video codec must be a string");if(D!=="H264"&&D!=="VP8")throw new Error("Error starting dial out: video codec must be H264 or VP8")}))}})(a.codecs)}if(a.phoneNumber){if(typeof a.phoneNumber!="string")throw new Error("Error starting dial out: phoneNumber must be a string");if(!/^\+\d{1,}$/.test(a.phoneNumber))throw new Error("Error starting dial out: Invalid phone number, must be valid phone number as per E.164");a.codecs&&c(a.codecs.audio)}if(a.callerId){if(typeof a.callerId!="string")throw new Error("Error starting dial out: callerId must be a string");if(a.sipUri)throw new Error("Error starting dial out: callerId not allowed with sipUri")}if(a.displayName){if(typeof a.displayName!="string")throw new Error("Error starting dial out: displayName must be a string");if(a.displayName.length>=200)throw new Error("Error starting dial out: displayName length must be less than 200")}if(a.userId){if(typeof a.userId!="string")throw new Error("Error starting dial out: userId must be a string");if(a.userId.length>36)throw new Error("Error starting dial out: userId length must be less than or equal to 36")}if(Do(a),a.permissions&&a.permissions.canReceive){var h=ie(ws.validateJSONObject(a.permissions.canReceive),2),m=h[0],k=h[1];if(!m)throw new Error(k)}return new Promise((function(P,D){u.sendMessageToCallMachine(N({action:"dialout-start"},a),(function(j){j.error?D(j.error):P(j)}))}))})),function(a){return E.apply(this,arguments)})},{key:"stopDialOut",value:function(a){var u=this;return W(this._callState,"stopDialOut()"),new Promise((function(c,h){u.sendMessageToCallMachine(N({action:"dialout-stop"},a),(function(m){m.error?h(m.error):c(m)}))}))}},{key:"sipCallTransfer",value:(f=F((function*(a){var u=this;if(W(this._callState,"sipCallTransfer()"),!a)throw new Error("sipCallTransfer() requires a sessionId and toEndPoint");return a.useSipRefer=!1,xo(a,"sipCallTransfer"),Do(a),new Promise((function(c,h){u.sendMessageToCallMachine(N({action:ao},a),(function(m){m.error?h(m.error):c(m)}))}))})),function(a){return f.apply(this,arguments)})},{key:"sipRefer",value:(v=F((function*(a){var u=this;if(W(this._callState,"sipRefer()"),!a)throw new Error("sessionId and toEndPoint are mandatory parameter");return a.useSipRefer=!0,xo(a,"sipRefer"),new Promise((function(c,h){u.sendMessageToCallMachine(N({action:ao},a),(function(m){m.error?h(m.error):c(m)}))}))})),function(a){return v.apply(this,arguments)})},{key:"sendDTMF",value:(_=F((function*(a){var u=this;return W(this._callState,"sendDTMF()"),(function(c){var h=c.sessionId,m=c.tones;if(!h||!m)throw new Error("sessionId and tones are mandatory parameter");if(typeof h!="string"||typeof m!="string")throw new Error("sessionId and tones should be of string type");if(m.length>20)throw new Error("tones string must be upto 20 characters");var k=/[^0-9A-D*#]/g,P=m.match(k);if(P&&P[0])throw new Error("".concat(P[0]," is not valid DTMF tone"))})(a),new Promise((function(c,h){u.sendMessageToCallMachine(N({action:"send-dtmf"},a),(function(m){m.error?h(m.error):c(m)}))}))})),function(a){return _.apply(this,arguments)})},{key:"getNetworkStats",value:function(){var a=this;return this._callState!==Fe?Promise.resolve(N({stats:{latest:{}}},this._network)):new Promise((function(u){a.sendMessageToCallMachine({action:"get-calc-stats"},(function(c){u(N(N({},a._network),{},{stats:c.stats}))}))}))}},{key:"testWebsocketConnectivity",value:(y=F((function*(){var a=this;if(Bn(this._testCallInProgress,"testWebsocketConnectivity()"),this.needsLoad())try{yield this.load()}catch(u){return Promise.reject(u)}return new Promise((function(u,c){a.sendMessageToCallMachine({action:"test-websocket-connectivity"},(function(h){h.error?c(h.error):u(h.results)}))}))})),function(){return y.apply(this,arguments)})},{key:"abortTestWebsocketConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-websocket-connectivity"})}},{key:"_validateVideoTrackForNetworkTests",value:function(a){return a?a instanceof MediaStreamTrack?!!au(a)||(console.error("Video track is not playable. This test needs a live video track."),!1):(console.error("Video track needs to be of type `MediaStreamTrack`."),!1):(console.error("Missing video track. You must provide a video track in order to run this test."),!1)}},{key:"testCallQuality",value:(b=F((function*(){var a=this;B(),ye(this._callObjectMode,"testCallQuality()"),Qt(this._callMachineInitialized,"testCallQuality()",null,!0),Un(this._callState,this._isPreparingToJoin,"testCallQuality()");var u=this._testCallAlreadyInProgress,c=function(m){u||(a._testCallInProgress=m)};if(c(!0),this.needsLoad())try{var h=this._callState;yield this.load(),this._callState=h}catch(m){return c(!1),Promise.reject(m)}return new Promise((function(m){a.sendMessageToCallMachine({action:"test-call-quality",dailyJsVersion:a.properties.dailyJsVersion},(function(k){var P=k.results,D=P.result,j=Kr(P,lu);if(D==="failed"){var U,J=N({},j);(U=j.error)!==null&&U!==void 0&&U.details?(j.error.details=JSON.parse(j.error.details),J.error=N(N({},J.error),{},{details:N({},J.error.details)}),J.error.details.duringTest="testCallQuality"):(J.error=J.error?N({},J.error):{},J.error.details={duringTest:"testCallQuality"}),a._maybeSendToSentry(J)}c(!1),m(N({result:D},j))}))}))})),function(){return b.apply(this,arguments)})},{key:"stopTestCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-call-quality"})}},{key:"testConnectionQuality",value:(g=F((function*(a){var u;$()?(console.warn("testConnectionQuality() is deprecated: use testPeerToPeerCallQuality() instead"),u=yield this.testPeerToPeerCallQuality(a)):(console.warn("testConnectionQuality() is deprecated: use testCallQuality() instead"),u=yield this.testCallQuality());var c={result:u.result,secondsElapsed:u.secondsElapsed};return u.data&&(c.data={maxRTT:u.data.maxRoundTripTime,packetLoss:u.data.avgRecvPacketLoss}),c})),function(a){return g.apply(this,arguments)})},{key:"testPeerToPeerCallQuality",value:(p=F((function*(a){var u=this;if(Bn(this._testCallInProgress,"testPeerToPeerCallQuality()"),this.needsLoad())try{yield this.load()}catch(m){return Promise.reject(m)}var c=a.videoTrack,h=a.duration;if(!this._validateVideoTrackForNetworkTests(c))throw new Error("Video track error");return this._sharedTracks.videoTrackForConnectionQualityTest=c,new Promise((function(m,k){u.sendMessageToCallMachine({action:"test-p2p-call-quality",duration:h},(function(P){P.error?k(P.error):m(P.results)}))}))})),function(a){return p.apply(this,arguments)})},{key:"stopTestConnectionQuality",value:function(){$()?(console.warn("stopTestConnectionQuality() is deprecated: use testPeerToPeerCallQuality() and stopTestPeerToPeerCallQuality() instead"),this.stopTestPeerToPeerCallQuality()):(console.warn("stopTestConnectionQuality() is deprecated: use testCallQuality() and stopTestCallQuality() instead"),this.stopTestCallQuality())}},{key:"stopTestPeerToPeerCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-p2p-call-quality"})}},{key:"testNetworkConnectivity",value:(d=F((function*(a){var u=this;if(Bn(this._testCallInProgress,"testNetworkConnectivity()"),this.needsLoad())try{yield this.load()}catch(c){return Promise.reject(c)}if(!this._validateVideoTrackForNetworkTests(a))throw new Error("Video track error");return this._sharedTracks.videoTrackForNetworkConnectivityTest=a,new Promise((function(c,h){u.sendMessageToCallMachine({action:"test-network-connectivity"},(function(m){m.error?h(m.error):c(m.results)}))}))})),function(a){return d.apply(this,arguments)})},{key:"abortTestNetworkConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-network-connectivity"})}},{key:"getCpuLoadStats",value:function(){var a=this;return new Promise((function(u){a._callState===Fe?a.sendMessageToCallMachine({action:"get-cpu-load-stats"},(function(c){u(c.cpuStats)})):u({cpuLoadState:void 0,cpuLoadStateReason:void 0,stats:{}})}))}},{key:"_validateEncodingLayerHasValidProperties",value:function(a){var u;if(!(((u=Object.keys(a))===null||u===void 0?void 0:u.length)>0))throw new Error("Empty encoding is not allowed. At least one of these valid keys should be specified:"+Object.values(Vn))}},{key:"_validateVideoSendSettings",value:function(a,u){var c=a==="screenVideo"?["default-screen-video","detail-optimized","motion-optimized","motion-and-detail-balanced"]:["default-video","bandwidth-optimized","bandwidth-and-quality-balanced","quality-optimized","adaptive-2-layers","adaptive-3-layers"],h="Video send settings should be either an object or one of the supported presets: ".concat(c.join());if(typeof u=="string"){if(!c.includes(u))throw new Error(h)}else{if(G(u)!=="object")throw new Error(h);if(!u.maxQuality&&!u.encodings&&u.allowAdaptiveLayers===void 0)throw new Error("Video send settings must contain at least maxQuality, allowAdaptiveLayers or encodings attribute");if(u.maxQuality&&["low","medium","high"].indexOf(u.maxQuality)===-1)throw new Error("maxQuality must be either low, medium or high");if(u.encodings){var m=!1;switch(Object.keys(u.encodings).length){case 1:m=!u.encodings.low;break;case 2:m=!u.encodings.low||!u.encodings.medium;break;case 3:m=!u.encodings.low||!u.encodings.medium||!u.encodings.high;break;default:m=!0}if(m)throw new Error("Encodings must be defined as: low, low and medium, or low, medium and high.");u.encodings.low&&this._validateEncodingLayerHasValidProperties(u.encodings.low),u.encodings.medium&&this._validateEncodingLayerHasValidProperties(u.encodings.medium),u.encodings.high&&this._validateEncodingLayerHasValidProperties(u.encodings.high)}}}},{key:"validateUpdateSendSettings",value:function(a){var u=this;if(!a||Object.keys(a).length===0)throw new Error("Send settings must contain at least information for one track!");Object.entries(a).forEach((function(c){var h=ie(c,2),m=h[0],k=h[1];u._validateVideoSendSettings(m,k)}))}},{key:"updateSendSettings",value:function(a){var u=this;return this.validateUpdateSendSettings(a),this.needsLoad()?(this._preloadCache.sendSettings=a,{sendSettings:this._preloadCache.sendSettings}):new Promise((function(c,h){u.sendMessageToCallMachine({action:"update-send-settings",sendSettings:a},(function(m){m.error?h(m.error):c(m.sendSettings)}))}))}},{key:"getSendSettings",value:function(){return this._sendSettings||this._preloadCache.sendSettings}},{key:"getLocalAudioLevel",value:function(){return this._localAudioLevel}},{key:"getRemoteParticipantsAudioLevel",value:function(){return this._remoteParticipantsAudioLevel}},{key:"getActiveSpeaker",value:function(){return B(),this._activeSpeaker}},{key:"setActiveSpeakerMode",value:function(a){return B(),this.sendMessageToCallMachine({action:"set-active-speaker-mode",enabled:a}),this}},{key:"activeSpeakerMode",value:function(){return B(),this._activeSpeakerMode}},{key:"subscribeToTracksAutomatically",value:function(){return this._preloadCache.subscribeToTracksAutomatically}},{key:"setSubscribeToTracksAutomatically",value:function(a){return W(this._callState,"setSubscribeToTracksAutomatically()","Use the subscribeToTracksAutomatically configuration property."),this._preloadCache.subscribeToTracksAutomatically=a,this.sendMessageToCallMachine({action:"daily-method-subscribe-to-tracks-automatically",enabled:a}),this}},{key:"enumerateDevices",value:(l=F((function*(){var a=this;if(this._callObjectMode){var u=yield navigator.mediaDevices.enumerateDevices();return it()==="Firefox"&&fn().major>115&&fn().major<123&&(u=u.filter((function(c){return c.kind!=="audiooutput"}))),{devices:u.map((function(c){var h=JSON.parse(JSON.stringify(c));if(!$()&&c.kind==="videoinput"&&c.getCapabilities){var m,k=c.getCapabilities();h.facing=(k==null||(m=k.facingMode)===null||m===void 0?void 0:m.length)>=1?k.facingMode[0]:void 0}return h}))}}return new Promise((function(c){a.sendMessageToCallMachine({action:"enumerate-devices"},(function(h){c({devices:h.devices})}))}))})),function(){return l.apply(this,arguments)})},{key:"sendAppMessage",value:function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"*";if(W(this._callState,"sendAppMessage()"),JSON.stringify(a).length>this._maxAppMessageSize)throw new Error("Message data too large. Max size is "+this._maxAppMessageSize);return this.sendMessageToCallMachine({action:"app-msg",data:a,to:u}),this}},{key:"addFakeParticipant",value:function(a){return B(),W(this._callState,"addFakeParticipant()"),this.sendMessageToCallMachine(N({action:"add-fake-participant"},a)),this}},{key:"setShowNamesMode",value:function(a){return ce(this._callObjectMode,"setShowNamesMode()"),B(),a&&a!=="always"&&a!=="never"?(console.error('setShowNamesMode argument should be "always", "never", or false'),this):(this.sendMessageToCallMachine({action:"set-show-names",mode:a}),this)}},{key:"setShowLocalVideo",value:function(){var a=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return ce(this._callObjectMode,"setShowLocalVideo()"),B(),W(this._callState,"setShowLocalVideo()"),typeof a!="boolean"?(console.error("setShowLocalVideo only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-local-video",show:a}),this._showLocalVideo=a,this)}},{key:"showLocalVideo",value:function(){return ce(this._callObjectMode,"showLocalVideo()"),B(),this._showLocalVideo}},{key:"setShowParticipantsBar",value:function(){var a=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return ce(this._callObjectMode,"setShowParticipantsBar()"),B(),W(this._callState,"setShowParticipantsBar()"),typeof a!="boolean"?(console.error("setShowParticipantsBar only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-participants-bar",show:a}),this._showParticipantsBar=a,this)}},{key:"showParticipantsBar",value:function(){return ce(this._callObjectMode,"showParticipantsBar()"),B(),this._showParticipantsBar}},{key:"customIntegrations",value:function(){return B(),ce(this._callObjectMode,"customIntegrations()"),this._customIntegrations}},{key:"setCustomIntegrations",value:function(a){return B(),ce(this._callObjectMode,"setCustomIntegrations()"),W(this._callState,"setCustomIntegrations()"),Is(a)?(this.sendMessageToCallMachine({action:"set-custom-integrations",integrations:a}),this._customIntegrations=a,this):this}},{key:"startCustomIntegrations",value:function(a){var u=this;if(B(),ce(this._callObjectMode,"startCustomIntegrations()"),W(this._callState,"startCustomIntegrations()"),Array.isArray(a)&&a.some((function(m){return typeof m!="string"}))||!Array.isArray(a)&&typeof a!="string")return console.error("startCustomIntegrations() only accepts string | string[]"),this;var c=typeof a=="string"?[a]:a,h=c.filter((function(m){return!(m in u._customIntegrations)}));return h.length?(console.error(`Can't find custom integration(s): "`.concat(h.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"start-custom-integrations",ids:c}),this)}},{key:"stopCustomIntegrations",value:function(a){var u=this;if(B(),ce(this._callObjectMode,"stopCustomIntegrations()"),W(this._callState,"stopCustomIntegrations()"),Array.isArray(a)&&a.some((function(m){return typeof m!="string"}))||!Array.isArray(a)&&typeof a!="string")return console.error("stopCustomIntegrations() only accepts string | string[]"),this;var c=typeof a=="string"?[a]:a,h=c.filter((function(m){return!(m in u._customIntegrations)}));return h.length?(console.error(`Can't find custom integration(s): "`.concat(h.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"stop-custom-integrations",ids:c}),this)}},{key:"customTrayButtons",value:function(){return ce(this._callObjectMode,"customTrayButtons()"),B(),this._customTrayButtons}},{key:"updateCustomTrayButtons",value:function(a){return ce(this._callObjectMode,"updateCustomTrayButtons()"),B(),W(this._callState,"updateCustomTrayButtons()"),Ps(a)?(this.sendMessageToCallMachine({action:"update-custom-tray-buttons",btns:a}),this._customTrayButtons=a,this):(console.error("updateCustomTrayButtons only accepts a dictionary of the type ".concat(JSON.stringify(gn))),this)}},{key:"theme",value:function(){return ce(this._callObjectMode,"theme()"),this.properties.theme}},{key:"setTheme",value:function(a){var u=this;return ce(this._callObjectMode,"setTheme()"),new Promise((function(c,h){try{u.validateProperties({theme:a}),u.properties.theme=N({},a),u.sendMessageToCallMachine({action:"set-theme",theme:u.properties.theme});try{u.emitDailyJSEvent({action:ma,theme:u.properties.theme})}catch(m){console.log("could not emit 'theme-updated'",m)}c(u.properties.theme)}catch(m){h(m)}}))}},{key:"requestFullscreen",value:(s=F((function*(){if(B(),this._iframe&&!document.fullscreenElement&&so())try{(yield this._iframe.requestFullscreen)?this._iframe.requestFullscreen():this._iframe.webkitRequestFullscreen()}catch(a){console.log("could not make video call fullscreen",a)}})),function(){return s.apply(this,arguments)})},{key:"exitFullscreen",value:function(){B(),document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen()}},{key:"getSidebarView",value:(i=F((function*(){var a=this;return this._callObjectMode?(console.error("getSidebarView is not available in callObject mode"),Promise.resolve(null)):new Promise((function(u){a.sendMessageToCallMachine({action:"get-sidebar-view"},(function(c){u(c.view)}))}))})),function(){return i.apply(this,arguments)})},{key:"setSidebarView",value:function(a){return this._callObjectMode?(console.error("setSidebarView is not available in callObject mode"),this):(this.sendMessageToCallMachine({action:"set-sidebar-view",view:a}),this)}},{key:"room",value:(r=F((function*(){var a=this,u=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).includeRoomConfigDefaults,c=u===void 0||u;return this._accessState.access===tn||this.needsLoad()?this.properties.url?{roomUrlPendingJoin:this.properties.url}:null:new Promise((function(h){a.sendMessageToCallMachine({action:"lib-room-info",includeRoomConfigDefaults:c},(function(m){delete m.action,delete m.callbackStamp,h(m)}))}))})),function(){return r.apply(this,arguments)})},{key:"geo",value:(o=F((function*(){try{var a=yield fetch("https://gs.daily.co/_ks_/x-swsl/:");return{current:(yield a.json()).geo}}catch(u){return console.error("geo lookup failed",u),{current:""}}})),function(){return o.apply(this,arguments)})},{key:"setNetworkTopology",value:(n=F((function*(a){var u=this;return B(),W(this._callState,"setNetworkTopology()"),new Promise((function(c,h){u.sendMessageToCallMachine({action:"set-network-topology",opts:a},(function(m){m.error?h({error:m.error}):c({workerId:m.workerId})}))}))})),function(a){return n.apply(this,arguments)})},{key:"getNetworkTopology",value:(e=F((function*(){var a=this;return new Promise((function(u,c){a.needsLoad()&&u({topology:"none"}),a.sendMessageToCallMachine({action:"get-network-topology"},(function(h){h.error?c({error:h.error}):u({topology:h.topology})}))}))})),function(){return e.apply(this,arguments)})},{key:"setPlayNewParticipantSound",value:function(a){if(B(),typeof a!="number"&&a!==!0&&a!==!1)throw new Error("argument to setShouldPlayNewParticipantSound should be true, false, or a number, but is ".concat(a));this.sendMessageToCallMachine({action:"daily-method-set-play-ding",arg:a})}},{key:"on",value:function(a,u){return Vt.prototype.on.call(this,a,u)}},{key:"once",value:function(a,u){return Vt.prototype.once.call(this,a,u)}},{key:"off",value:function(a,u){return Vt.prototype.off.call(this,a,u)}},{key:"validateProperties",value:function(a){var u,c;if(a!=null&&(u=a.dailyConfig)!==null&&u!==void 0&&u.userMediaAudioConstraints){var h,m;$()||console.warn("userMediaAudioConstraints is deprecated. You can override constraints with inputSettings.audio.settings, found in DailyCallOptions.");var k=a.inputSettings||{};k.audio=((h=a.inputSettings)===null||h===void 0?void 0:h.audio)||{},k.audio.settings=((m=a.inputSettings)===null||m===void 0||(m=m.audio)===null||m===void 0?void 0:m.settings)||{},k.audio.settings=N(N({},k.audio.settings),a.dailyConfig.userMediaAudioConstraints),a.inputSettings=k,delete a.dailyConfig.userMediaAudioConstraints}if(a!=null&&(c=a.dailyConfig)!==null&&c!==void 0&&c.userMediaVideoConstraints){var P,D;$()||console.warn("userMediaVideoConstraints is deprecated. You can override constraints with inputSettings.video.settings, found in DailyCallOptions.");var j=a.inputSettings||{};j.video=((P=a.inputSettings)===null||P===void 0?void 0:P.video)||{},j.video.settings=((D=a.inputSettings)===null||D===void 0||(D=D.video)===null||D===void 0?void 0:D.settings)||{},j.video.settings=N(N({},j.video.settings),a.dailyConfig.userMediaVideoConstraints),a.inputSettings=j,delete a.dailyConfig.userMediaVideoConstraints}for(var U in a)if(We[U]){if(We[U].validate&&!We[U].validate(a[U],this))throw new Error("property '".concat(U,"': ").concat(We[U].help))}else console.warn("Ignoring unrecognized property '".concat(U,"'")),delete a[U]}},{key:"assembleMeetingUrl",value:function(){var a,u,c=N(N({},this.properties),{},{emb:this.callClientId,embHref:encodeURIComponent(window.location.href),proxy:(a=this.properties.dailyConfig)!==null&&a!==void 0&&a.proxyUrl?encodeURIComponent((u=this.properties.dailyConfig)===null||u===void 0?void 0:u.proxyUrl):void 0}),h=c.url.match(/\?/)?"&":"?";return c.url+h+Object.keys(We).filter((function(m){return We[m].queryString&&c[m]!==void 0})).map((function(m){return"".concat(We[m].queryString,"=").concat(c[m])})).join("&")}},{key:"needsLoad",value:function(){return[lr,to,je,Ae].includes(this._callState)}},{key:"sendMessageToCallMachine",value:function(a,u){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");this._messageChannel.sendMessageToCallMachine(a,u,this.callClientId,this._iframe)}},{key:"forwardPackagedMessageToCallMachine",value:function(a){this._messageChannel.forwardPackagedMessageToCallMachine(a,this._iframe,this.callClientId)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(a){return this._messageChannel.addListenerForPackagedMessagesFromCallMachine(a,this.callClientId)}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(a){this._messageChannel.removeListenerForPackagedMessagesFromCallMachine(a)}},{key:"handleMessageFromCallMachine",value:function(a){switch(a.action){case ha:this.sendMessageToCallMachine(N({action:fa},this.properties));break;case"call-machine-initialized":this._callMachineInitialized=!0;var u={action:Wt,level:"log",code:1011,stats:{event:"bundle load",time:this._bundleLoadTime==="no-op"?0:this._bundleLoadTime,preLoaded:this._bundleLoadTime==="no-op",url:sn(this.properties.dailyConfig)}};this.sendMessageToCallMachine(u),this._delayDuplicateInstanceLog&&this._logDuplicateInstanceAttempt();break;case dr:this._loadedCallback&&(this._loadedCallback(),this._loadedCallback=null),this.emitDailyJSEvent(a);break;case wa:var c,h=N({},a);delete h.internal,this._maxAppMessageSize=((c=a.internal)===null||c===void 0?void 0:c._maxAppMessageSize)||xn,this._joinedCallback&&(this._joinedCallback(a.participants),this._joinedCallback=null),this.emitDailyJSEvent(h);break;case Ea:case ka:if(this._callState===je)return;if(a.participant&&a.participant.session_id){var m=a.participant.local?"local":a.participant.session_id;if(this._callObjectMode){var k=this._callMachine().store;mo(a.participant,k),go(a.participant,k),vo(a.participant,this._participants[m],k)}try{this.maybeParticipantTracksStopped(this._participants[m],a.participant),this.maybeParticipantTracksStarted(this._participants[m],a.participant),this.maybeEventRecordingStopped(this._participants[m],a.participant),this.maybeEventRecordingStarted(this._participants[m],a.participant)}catch(Ns){console.error("track events error",Ns)}this.compareEqualForParticipantUpdateEvent(a.participant,this._participants[m])||(this._participants[m]=N({},a.participant),this.toggleParticipantAudioBasedOnNativeAudioFocus(),this.emitDailyJSEvent(a))}break;case Ca:if(a.participant&&a.participant.session_id){var P=this._participants[a.participant.session_id];P&&this.maybeParticipantTracksStopped(P,null),delete this._participants[a.participant.session_id],this.emitDailyJSEvent(a)}break;case Ta:ae(this._participantCounts,a.participantCounts)||(this._participantCounts=a.participantCounts,this.emitDailyJSEvent(a));break;case Aa:var D={access:a.access};a.awaitingAccess&&(D.awaitingAccess=a.awaitingAccess),ae(this._accessState,D)||(this._accessState=D,this.emitDailyJSEvent(a));break;case Oa:if(a.meetingSession){this._meetingSessionSummary=a.meetingSession,this.emitDailyJSEvent(a);var j=N(N({},a),{},{action:"meeting-session-updated"});this.emitDailyJSEvent(j)}break;case gr:var U;this._iframe&&!a.preserveIframe&&(this._iframe.src=""),this._updateCallState(Ae),this.resetMeetingDependentVars(),this._loadedCallback&&(this._loadedCallback(a.errorMsg),this._loadedCallback=null),a.preserveIframe;var J=Kr(a,uu);J!=null&&(U=J.error)!==null&&U!==void 0&&U.details&&(J.error.details=JSON.parse(J.error.details)),this._maybeSendToSentry(a),this._joinedCallback&&(this._joinedCallback(null,J),this._joinedCallback=null),this.emitDailyJSEvent(J);break;case Sa:this._callState!==Ae&&this._updateCallState(je),this.resetMeetingDependentVars(),this._resolveLeave&&(this._resolveLeave(),this._resolveLeave=null),this.emitDailyJSEvent(a);break;case"selected-devices-updated":a.devices&&this.emitDailyJSEvent(a);break;case Xa:var Se=a.state,Je=a.threshold,yt=a.quality,X=Se.state,pe=Se.reasons;X===this._network.networkState&&ae(pe,this._network.networkStateReasons)&&Je===this._network.threshold&&yt===this._network.quality||(this._network.networkState=X,this._network.networkStateReasons=pe,this._network.quality=yt,this._network.threshold=Je,a.networkState=X,pe.length&&(a.networkStateReasons=pe),delete a.state,this.emitDailyJSEvent(a));break;case es:a&&a.cpuLoadState&&this.emitDailyJSEvent(a);break;case ts:a&&a.faceCounts!==void 0&&this.emitDailyJSEvent(a);break;case Ka:var Ge=a.activeSpeaker;this._activeSpeaker.peerId!==Ge.peerId&&(this._activeSpeaker.peerId=Ge.peerId,this.emitDailyJSEvent({action:a.action,activeSpeaker:this._activeSpeaker}));break;case"show-local-video-changed":if(this._callObjectMode)return;var bt=a.show;this._showLocalVideo=bt,this.emitDailyJSEvent({action:a.action,show:bt});break;case Qa:var Ft=a.enabled;this._activeSpeakerMode!==Ft&&(this._activeSpeakerMode=Ft,this.emitDailyJSEvent({action:a.action,enabled:this._activeSpeakerMode}));break;case Pa:case Ia:case Da:this._waitingParticipants=a.allWaitingParticipants,this.emitDailyJSEvent({action:a.action,participant:a.participant});break;case ss:ae(this._receiveSettings,a.receiveSettings)||(this._receiveSettings=a.receiveSettings,this.emitDailyJSEvent({action:a.action,receiveSettings:a.receiveSettings}));break;case fr:this._maybeUpdateInputSettings(a.inputSettings);break;case"send-settings-updated":ae(this._sendSettings,a.sendSettings)||(this._sendSettings=a.sendSettings,this._preloadCache.sendSettings=null,this.emitDailyJSEvent({action:a.action,sendSettings:a.sendSettings}));break;case"local-audio-level":this._localAudioLevel=a.audioLevel,this._preloadCache.localAudioLevelObserver=null,this.emitDailyJSEvent(a);break;case"remote-participants-audio-level":this._remoteParticipantsAudioLevel=a.participantsAudioLevel,this._preloadCache.remoteParticipantsAudioLevelObserver=null,this.emitDailyJSEvent(a);break;case Ja:var _t=a.session_id;this._rmpPlayerState[_t]=a.playerState,this.emitDailyJSEvent(a);break;case Ya:delete this._rmpPlayerState[a.session_id],this.emitDailyJSEvent(a);break;case Ga:var wt=a.session_id,Yr=this._rmpPlayerState[wt];Yr&&this.compareEqualForRMPUpdateEvent(Yr,a.remoteMediaPlayerState)||(this._rmpPlayerState[wt]=a.remoteMediaPlayerState,this.emitDailyJSEvent(a));break;case"custom-button-click":case"sidebar-view-changed":case"pip-started":case"pip-stopped":this.emitDailyJSEvent(a);break;case Ma:var js=this._meetingSessionState.topology!==(a.meetingSessionState&&a.meetingSessionState.topology);this._meetingSessionState=$n(a.meetingSessionState,this._callObjectMode),(this._callObjectMode||js)&&this.emitDailyJSEvent(a);break;case za:this._isScreenSharing=!0,this.emitDailyJSEvent(a);break;case Wa:case Ha:this._isScreenSharing=!1,this.emitDailyJSEvent(a);break;case pr:case hr:case Fa:case qa:case Va:case ja:case Na:case Ra:case ya:case ba:case Ba:case $a:case"test-completed":case Za:case Ua:case ns:case rs:case is:case os:case mr:case as:case"dialin-ready":case"dialin-connected":case"dialin-error":case"dialin-stopped":case"dialin-warning":case"dialout-connected":case"dialout-answered":case"dialout-error":case"dialout-stopped":case"dialout-warning":this.emitDailyJSEvent(a);break;case"request-fullscreen":this.requestFullscreen();break;case"request-exit-fullscreen":this.exitFullscreen()}}},{key:"maybeEventRecordingStopped",value:function(a,u){var c="record";a&&(u.local||u[c]!==!1||a[c]===u[c]||this.emitDailyJSEvent({action:hr}))}},{key:"maybeEventRecordingStarted",value:function(a,u){var c="record";a&&(u.local||u[c]!==!0||a[c]===u[c]||this.emitDailyJSEvent({action:pr}))}},{key:"_trackStatePlayable",value:function(a){return!(!a||a.state!==ca)}},{key:"_trackChanged",value:function(a,u){return a?.id!==u?.id}},{key:"maybeEventTrackStopped",value:function(a,u,c){var h,m,k=(h=u?.tracks[a])!==null&&h!==void 0?h:null,P=(m=c?.tracks[a])!==null&&m!==void 0?m:null,D=k?.track;if(D){var j=this._trackStatePlayable(k),U=this._trackStatePlayable(P),J=this._trackChanged(D,P?.track);j&&(U&&!J||this.emitDailyJSEvent({action:xa,track:D,participant:c??u,type:a}))}}},{key:"maybeEventTrackStarted",value:function(a,u,c){var h,m,k=(h=u?.tracks[a])!==null&&h!==void 0?h:null,P=(m=c?.tracks[a])!==null&&m!==void 0?m:null,D=P?.track;if(D){var j=this._trackStatePlayable(k),U=this._trackStatePlayable(P),J=this._trackChanged(k?.track,D);U&&(j&&!J||this.emitDailyJSEvent({action:La,track:D,participant:c,type:a}))}}},{key:"maybeParticipantTracksStopped",value:function(a,u){if(a)for(var c in a.tracks)this.maybeEventTrackStopped(c,a,u)}},{key:"maybeParticipantTracksStarted",value:function(a,u){if(u)for(var c in u.tracks)this.maybeEventTrackStarted(c,a,u)}},{key:"compareEqualForRMPUpdateEvent",value:function(a,u){var c,h;return a.state===u.state&&((c=a.settings)===null||c===void 0?void 0:c.volume)===((h=u.settings)===null||h===void 0?void 0:h.volume)}},{key:"emitDailyJSEvent",value:function(a){try{a.callClientId=this.callClientId,this.emit(a.action,a)}catch(u){console.log("could not emit",a,u)}}},{key:"compareEqualForParticipantUpdateEvent",value:function(a,u){return!!ae(a,u)&&(!a.videoTrack||!u.videoTrack||a.videoTrack.id===u.videoTrack.id&&a.videoTrack.muted===u.videoTrack.muted&&a.videoTrack.enabled===u.videoTrack.enabled)&&(!a.audioTrack||!u.audioTrack||a.audioTrack.id===u.audioTrack.id&&a.audioTrack.muted===u.audioTrack.muted&&a.audioTrack.enabled===u.audioTrack.enabled)}},{key:"nativeUtils",value:function(){return $()?typeof DailyNativeUtils>"u"?(console.warn("in React Native, DailyNativeUtils is expected to be available"),null):DailyNativeUtils:null}},{key:"updateIsPreparingToJoin",value:function(a){this._updateCallState(this._callState,a)}},{key:"_updateCallState",value:function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._isPreparingToJoin;if(a!==this._callState||u!==this._isPreparingToJoin){var c=this._callState,h=this._isPreparingToJoin;this._callState=a,this._isPreparingToJoin=u;var m=this._callState===Fe;this.updateShowAndroidOngoingMeetingNotification(m);var k=rn(c,h),P=rn(this._callState,this._isPreparingToJoin);k!==P&&(this.updateKeepDeviceAwake(P),this.updateDeviceAudioMode(P),this.updateNoOpRecordingEnsuringBackgroundContinuity(P))}}},{key:"resetMeetingDependentVars",value:function(){this._participants={},this._participantCounts=Mo,this._waitingParticipants={},this._activeSpeaker={},this._activeSpeakerMode=!1,this._didPreAuth=!1,this._accessState={access:tn},this._finalSummaryOfPrevSession=this._meetingSessionSummary,this._meetingSessionSummary={},this._meetingSessionState=$n(Oo,this._callObjectMode),this._isScreenSharing=!1,this._receiveSettings={},this._inputSettings=void 0,this._sendSettings={},this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this._maxAppMessageSize=xn,this._callMachineInitialized=!1,this._bundleLoadTime=void 0,this._preloadCache}},{key:"updateKeepDeviceAwake",value:function(a){$()&&this.nativeUtils().setKeepDeviceAwake(a,this.callClientId)}},{key:"updateDeviceAudioMode",value:function(a){if($()&&!this.disableReactNativeAutoDeviceManagement("audio")){var u=a?this._nativeInCallAudioMode:"idle";this.nativeUtils().setAudioMode(u)}}},{key:"updateShowAndroidOngoingMeetingNotification",value:function(a){if($()&&this.nativeUtils().setShowOngoingMeetingNotification){var u,c,h,m;if(this.properties.reactNativeConfig&&this.properties.reactNativeConfig.androidInCallNotification){var k=this.properties.reactNativeConfig.androidInCallNotification;u=k.title,c=k.subtitle,h=k.iconName,m=k.disableForCustomOverride}m&&(a=!1),this.nativeUtils().setShowOngoingMeetingNotification(a,u,c,h,this.callClientId)}}},{key:"updateNoOpRecordingEnsuringBackgroundContinuity",value:function(a){$()&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity(a)}},{key:"toggleParticipantAudioBasedOnNativeAudioFocus",value:function(){var a;if($()){var u=(a=this._callMachine())===null||a===void 0||(a=a.store)===null||a===void 0?void 0:a.getState();for(var c in u?.streams){var h=u.streams[c];h&&h.pendingTrack&&h.pendingTrack.kind==="audio"&&(h.pendingTrack.enabled=this._hasNativeAudioFocus)}}}},{key:"disableReactNativeAutoDeviceManagement",value:function(a){return this.properties.reactNativeConfig&&this.properties.reactNativeConfig.disableAutoDeviceManagement&&this.properties.reactNativeConfig.disableAutoDeviceManagement[a]}},{key:"absoluteUrl",value:function(a){if(a!==void 0){var u=document.createElement("a");return u.href=a,u.href}}},{key:"sayHello",value:function(){var a="hello, world.";return console.log(a),a}},{key:"_logUseAfterDestroy",value:function(){var a=Object.values(ze)[0];if(this.needsLoad())if(a&&!a.needsLoad()){var u={action:Wt,level:"error",code:this.strictMode?9995:9997};a.sendMessageToCallMachine(u)}else this.strictMode||console.error("You are are attempting to use a call instance that was previously destroyed, which is unsupported. Please remove `strictMode: false` from your constructor properties to enable strict mode to track down and fix this unsupported usage.");else{var c={action:Wt,level:"error",code:this.strictMode?9995:9997};this._messageChannel.sendMessageToCallMachine(c,null,this.callClientId,this._iframe)}}},{key:"_logDuplicateInstanceAttempt",value:function(){for(var a=0,u=Object.values(ze);a<u.length;a++){var c=u[a];c._callMachineInitialized?(c.sendMessageToCallMachine({action:Wt,level:"warn",code:this.allowMultipleCallInstances?9993:9992}),c._delayDuplicateInstanceLog=!1):c._delayDuplicateInstanceLog=!0}}},{key:"_maybeSendToSentry",value:function(a){var u,c,h,m;if(!((u=a.error)!==null&&u!==void 0&&u.type&&(![pa,da,ur].includes(a.error.type)||a.error.type===ur&&a.error.msg.includes("deleted")))){var k=(c=this.properties)!==null&&c!==void 0&&c.url?new URL(this.properties.url):void 0,P="production";k&&k.host.includes(".staging.daily")&&(P="staging");var D,j,U,J,Se,Je=(function(_t){const wt=[Lc(),Ic(),ol(),rl(),ul(),pl(),Rc(),dl()];return _t.autoSessionTracking!==!1&&wt.push(ll()),wt})({}).filter((function(_t){return!["BrowserApiErrors","Breadcrumbs","GlobalHandlers"].includes(_t.name)})),yt=new Gc({dsn:"https://f10f1c81e5d44a4098416c0867a8b740@o77906.ingest.sentry.io/168844",transport:Kc,stackParser:nl,integrations:Je,environment:P}),X=new Ve;if(X.setClient(yt),yt.init(),this.session_id&&X.setExtra("sessionId",this.session_id),this.properties){var pe=N({},this.properties);pe.userName=pe.userName?"[Filtered]":void 0,pe.userData=pe.userData?"[Filtered]":void 0,pe.token=pe.token?"[Filtered]":void 0,X.setExtra("properties",pe)}if(k){var Ge=k.searchParams.get("domain");if(!Ge){var bt=k.host.match(/(.*?)\./);Ge=bt&&bt[1]||""}Ge&&X.setTag("domain",Ge)}a.error&&(X.setTag("fatalErrorType",a.error.type),X.setExtra("errorDetails",a.error.details),!((D=a.error.details)===null||D===void 0)&&D.uri&&X.setTag("serverAddress",a.error.details.uri),!((j=a.error.details)===null||j===void 0)&&j.workerGroup&&X.setTag("workerGroup",a.error.details.workerGroup),!((U=a.error.details)===null||U===void 0)&&U.geoGroup&&X.setTag("geoGroup",a.error.details.geoGroup),!((J=a.error.details)===null||J===void 0)&&J.on&&X.setTag("connectionAttempt",a.error.details.on),(Se=a.error.details)!==null&&Se!==void 0&&Se.bundleUrl&&(X.setTag("bundleUrl",a.error.details.bundleUrl),X.setTag("bundleError",a.error.details.sourceError.type))),X.setTags({callMode:this._callObjectMode?$()?"reactNative":(h=this.properties)!==null&&h!==void 0&&(h=h.dailyConfig)!==null&&h!==void 0&&(h=h.callMode)!==null&&h!==void 0&&h.includes("prebuilt")?this.properties.dailyConfig.callMode:"custom":"prebuilt-frame",version:t.version()});var Ft=((m=a.error)===null||m===void 0?void 0:m.msg)||a.errorMsg;X.captureException(new Error(Ft))}}},{key:"_callMachine",value:function(){var a;return(a=window._daily)===null||a===void 0||(a=a.instances)===null||a===void 0||(a=a[this.callClientId])===null||a===void 0?void 0:a.callMachine}},{key:"_maybeUpdateInputSettings",value:function(a){if(!ae(this._inputSettings,a)){var u=this._getInputSettings();this._inputSettings=a;var c=this._getInputSettings();ae(u,c)||this.emitDailyJSEvent({action:fr,inputSettings:c})}}}],[{key:"supportedBrowser",value:function(){if($())return{supported:!0,mobile:!0,name:"React Native",version:null,supportsScreenShare:!0,supportsSfu:!0,supportsVideoProcessing:!1,supportsAudioProcessing:!1};var a=Zs.getParser(ge());return{supported:!!Rn(),mobile:a.getPlatformType()==="mobile",name:a.getBrowserName(),version:a.getBrowserVersion(),supportsFullscreen:!!so(),supportsScreenShare:!!ql(),supportsSfu:!!Rn(),supportsVideoProcessing:us(),supportsAudioProcessing:ds()}}},{key:"version",value:function(){return"0.84.0"}},{key:"createCallObject",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return a.layout="none",new t(null,a)}},{key:"wrap",value:function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(B(),!a||!a.contentWindow||typeof a.src!="string")throw new Error("DailyIframe::Wrap needs an iframe-like first argument");return u.layout||(u.customLayout?u.layout="custom-v1":u.layout="browser"),new t(a,u)}},{key:"createFrame",value:function(a,u){var c,h;B(),a&&u?(c=a,h=u):a&&a.append?(c=a,h={}):(c=document.body,h=a||{});var m=h.iframeStyle;m||(m=c===document.body?{position:"fixed",border:"1px solid black",backgroundColor:"white",width:"375px",height:"450px",right:"1em",bottom:"1em"}:{border:0,width:"100%",height:"100%"});var k=document.createElement("iframe");window.navigator&&window.navigator.userAgent.match(/Chrome\/61\./)?k.allow="microphone, camera":k.allow="microphone; camera; autoplay; display-capture; screen-wake-lock",k.style.visibility="hidden",c.appendChild(k),k.style.visibility=null,Object.keys(m).forEach((function(P){return k.style[P]=m[P]})),h.layout||(h.customLayout?h.layout="custom-v1":h.layout="browser");try{return new t(k,h)}catch(P){throw c.removeChild(k),P}}},{key:"createTransparentFrame",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};B();var u=document.createElement("iframe");return u.allow="microphone; camera; autoplay",u.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
      pointer-events: none;
    `,document.body.appendChild(u),a.layout||(a.layout="custom-v1"),t.wrap(u,a)}},{key:"getCallInstance",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;return a?ze[a]:Object.values(ze)[0]}}]);var e,n,o,r,i,s,l,d,p,g,b,y,_,v,f,E,C,M,I,w,S,T,L,A,q,R,H,ve,Ue,x,te,Be,$e,Ur,Br,$r,Jr,Gr})();function Do(t){if(t.extension){if(typeof t.extension!="string")throw new Error("Error starting dial out: extension must be a string");if(t.extension.length>20)throw new Error("Error starting dial out: extension length must be less than or equal to 20")}if(t.waitBeforeExtensionDialSec){if(typeof t.waitBeforeExtensionDialSec!="number")throw new Error("Error starting dial out: waitBeforeExtensionDialSec must be a number");if(t.waitBeforeExtensionDialSec>60)throw new Error("Error starting dial out: waitBeforeExtensionDialSec must be less than or equal to 60");if(!t.extension)throw new Error("Error starting dial out: waitBeforeExtensionDialSec requires a phoneNumber and extension")}}function ct(t,e){var n={};for(var o in t)if(t[o]instanceof MediaStreamTrack)console.warn("MediaStreamTrack found in props or cache.",o),n[o]=Ie;else if(o==="dailyConfig"){if(t[o].modifyLocalSdpHook){var r=window._daily.instances[e].customCallbacks||{};r.modifyLocalSdpHook=t[o].modifyLocalSdpHook,window._daily.instances[e].customCallbacks=r,delete t[o].modifyLocalSdpHook}if(t[o].modifyRemoteSdpHook){var i=window._daily.instances[e].customCallbacks||{};i.modifyRemoteSdpHook=t[o].modifyRemoteSdpHook,window._daily.instances[e].customCallbacks=i,delete t[o].modifyRemoteSdpHook}n[o]=t[o]}else n[o]=t[o];return n}function W(t){var e=arguments.length>2?arguments[2]:void 0;if(t!==Fe){var n="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," only supported after join.");throw e&&(n+=" ".concat(e)),console.error(n),new Error(n)}}function rn(t,e){return[hn,Fe].includes(t)||e}function Un(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"This daily-js method",o=arguments.length>3?arguments[3]:void 0;if(rn(t,e)){var r="".concat(n," not supported after joining a meeting.");throw o&&(r+=" ".concat(o)),console.error(r),new Error(r)}}function Qt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method",n=arguments.length>2?arguments[2]:void 0;if(!t){var o="".concat(e,arguments.length>3&&arguments[3]!==void 0&&arguments[3]?" requires preAuth() or startCamera() to initialize call state.":" requires preAuth(), startCamera(), or join() to initialize call state.");throw n&&(o+=" ".concat(n)),console.error(o),new Error(o)}}function Bn(t){if(t){var e="A pre-call quality test is in progress. Please try ".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," again once testing has completed. Use stopTestCallQuality() to end it early.");throw console.error(e),new Error(e)}}function ye(t){if(!t){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported on custom callObject instances");throw console.error(e),new Error(e)}}function ce(t){if(t){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported as part of Daily's Prebuilt");throw console.error(e),new Error(e)}}function B(){if($())throw new Error("This daily-js method is not currently supported in React Native")}function kt(){if(!$())throw new Error("This daily-js method is only supported in React Native")}function ks(t){if(t===void 0)return!0;var e;if(typeof t=="string")e=t;else try{e=JSON.stringify(t),ae(JSON.parse(e),t)||console.warn("The userData provided will be modified when serialized.")}catch(n){throw Error("userData must be serializable to JSON: ".concat(n))}if(e.length>4096)throw Error("userData is too large (".concat(e.length," characters). Maximum size suppported is ").concat(4096,"."));return!0}function Cs(t,e){for(var n=e.allowAllParticipantsKey,o=function(b){var y=["local"];return n||y.push("*"),b&&!y.includes(b)},r=function(b){return!!(b.layer===void 0||Number.isInteger(b.layer)&&b.layer>=0||b.layer==="inherit")},i=function(b){return!!b&&!(b.video&&!r(b.video))&&!(b.screenVideo&&!r(b.screenVideo))},s=0,l=Object.entries(t);s<l.length;s++){var d=ie(l[s],2),p=d[0],g=d[1];if(!o(p)||!i(g))return!1}return!0}function Ts(t){if(G(t)!=="object")return!1;for(var e=0,n=Object.entries(t);e<n.length;e++){var o=ie(n[e],2),r=o[0],i=o[1];switch(r){case"video":if(G(i)!=="object")return!1;for(var s=0,l=Object.entries(i);s<l.length;s++){var d=ie(l[s],2),p=d[0],g=d[1];switch(p){case"processor":if(!fu(g))return!1;break;case"settings":if(!Lo(g))return!1;break;default:return!1}}break;case"audio":if(G(i)!=="object")return!1;for(var b=0,y=Object.entries(i);b<y.length;b++){var _=ie(y[b],2),v=_[0],f=_[1];switch(v){case"processor":if(!hu(f))return!1;break;case"settings":if(!Lo(f))return!1;break;default:return!1}}break;default:return!1}}return!0}function As(t,e,n){var o,r=[];t.video&&t.video.processor&&(us((o=e?.useLegacyVideoProcessor)!==null&&o!==void 0&&o)||(t.video.settings?delete t.video.processor:delete t.video,r.push("video"))),t.audio&&t.audio.processor&&(ds()||(t.audio.settings?delete t.audio.processor:delete t.audio,r.push("audio"))),r.length>0&&console.error("Ignoring settings for browser- or platform-unsupported input processor(s): ".concat(r.join(", "))),t.audio&&t.audio.settings&&(t.audio.settings.customTrack?(n.audioTrack=t.audio.settings.customTrack,t.audio.settings={customTrack:Ie}):delete n.audioTrack),t.video&&t.video.settings&&(t.video.settings.customTrack?(n.videoTrack=t.video.settings.customTrack,t.video.settings={customTrack:Ie}):delete n.videoTrack)}function hu(t){if($())return console.warn("Video processing is not yet supported in React Native"),!1;var e=["type"];return!!t&&G(t)==="object"&&(Object.keys(t).filter((function(n){return!e.includes(n)})).forEach((function(n){console.warn("invalid key inputSettings -> audio -> processor : ".concat(n)),delete t[n]})),!!(function(n){return typeof n!="string"?!1:Object.values(cs).includes(n)?!0:(console.error("inputSettings audio processor type invalid"),!1)})(t.type))}function fu(t){if($())return console.warn("Video processing is not yet supported in React Native"),!1;var e=["type","config"];return!t||G(t)!=="object"||!(function(n){return typeof n!="string"?!1:Object.values(nn).includes(n)?!0:(console.error("inputSettings video processor type invalid"),!1)})(t.type)||t.config&&(G(t.config)!=="object"||!(function(n,o){var r=Object.keys(o);if(r.length===0)return!0;var i="invalid object in inputSettings -> video -> processor -> config";switch(n){case nn.BGBLUR:return r.length>1||r[0]!=="strength"?(console.error(i),!1):!(typeof o.strength!="number"||o.strength<=0||o.strength>1||isNaN(o.strength))||(console.error("".concat(i,"; expected: {0 < strength <= 1}, got: ").concat(o.strength)),!1);case nn.BGIMAGE:return!(o.source!==void 0&&!(function(s){if(s.source==="default")return s.type="default",!0;if(s.source instanceof ArrayBuffer)return!0;if(cn(s.source))return s.type="url",!!(function(p){var g=new URL(p),b=g.pathname;if(g.protocol==="data:")try{var y=b.substring(b.indexOf(":")+1,b.indexOf(";")).split("/")[1];return Nn.includes(y)}catch(v){return console.error("failed to deduce blob content type",v),!1}var _=b.split(".").at(-1).toLowerCase().trim();return Nn.includes(_)})(s.source)||(console.error("invalid image type; supported types: [".concat(Nn.join(", "),"]")),!1);return l=s.source,d=Number(l),isNaN(d)||!Number.isInteger(d)||d<=0||d>10?(console.error("invalid image selection; must be an int, > 0, <= ".concat(10)),!1):(s.type="daily-preselect",!0);var l,d})(o));default:return!0}})(t.type,t.config))?!1:(Object.keys(t).filter((function(n){return!e.includes(n)})).forEach((function(n){console.warn("invalid key inputSettings -> video -> processor : ".concat(n)),delete t[n]})),!0)}function Lo(t){return G(t)==="object"&&(!t.customTrack||t.customTrack instanceof MediaStreamTrack)}function Er(){var t=Object.values(nn).join(" | "),e=Object.values(cs).join(" | ");return"inputSettings must be of the form: { video?: { processor?: { type: [ ".concat(t," ], config?: {} } }, audio?: { processor: {type: [ ").concat(e," ] } } }")}function Os(t){var e=t.allowAllParticipantsKey;return"receiveSettings must be of the form { [<remote participant id> | ".concat(ua).concat(e?' | "'.concat("*",'"'):"","]: ")+'{ [video: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]], [screenVideo: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]] }}}'}function Ms(){return"customIntegrations should be an object of type ".concat(JSON.stringify(Sr),".")}function Ps(t){if(t&&G(t)!=="object"||Array.isArray(t))return console.error("customTrayButtons should be an Object of the type ".concat(JSON.stringify(gn),".")),!1;if(t)for(var e=0,n=Object.entries(t);e<n.length;e++)for(var o=ie(n[e],1)[0],r=0,i=Object.entries(t[o]);r<i.length;r++){var s=ie(i[r],2),l=s[0],d=s[1],p=gn.id[l];if(!p)return console.error("customTrayButton does not support key ".concat(l)),!1;switch(l){case"iconPath":case"iconPathDarkMode":if(!cn(d))return console.error("customTrayButton ".concat(l," should be a url.")),!1;break;case"visualState":if(!["default","sidebar-open","active"].includes(d))return console.error("customTrayButton ".concat(l," should be ").concat(p,". Got: ").concat(d)),!1;break;default:if(G(d)!==p)return console.error("customTrayButton ".concat(l," should be a ").concat(p,".")),!1}}return!0}function Is(t){if(!t||t&&G(t)!=="object"||Array.isArray(t))return console.error(Ms()),!1;for(var e=function(b){return"".concat(b," should be ").concat(Sr.id[b])},n=function(b,y){return console.error("customIntegration ".concat(b,": ").concat(y))},o=0,r=Object.entries(t);o<r.length;o++){var i=ie(r[o],1)[0];if(!("label"in t[i]))return n(i,"label is required"),!1;if(!("location"in t[i]))return n(i,"location is required"),!1;if(!("src"in t[i])&&!("srcdoc"in t[i]))return n(i,"src or srcdoc is required"),!1;for(var s=0,l=Object.entries(t[i]);s<l.length;s++){var d=ie(l[s],2),p=d[0],g=d[1];switch(p){case"allow":case"csp":case"name":case"referrerPolicy":case"sandbox":if(typeof g!="string")return n(i,e(p)),!1;break;case"iconURL":if(!cn(g))return n(i,"".concat(p," should be a url")),!1;break;case"src":if("srcdoc"in t[i])return n(i,"cannot have both src and srcdoc"),!1;if(!cn(g))return n(i,'src "'.concat(g,'" is not a valid URL')),!1;break;case"srcdoc":if("src"in t[i])return n(i,"cannot have both src and srcdoc"),!1;if(typeof g!="string")return n(i,e(p)),!1;break;case"location":if(!["main","sidebar"].includes(g))return n(i,e(p)),!1;break;case"controlledBy":if(g!=="*"&&g!=="owners"&&(!Array.isArray(g)||g.some((function(b){return typeof b!="string"}))))return n(i,e(p)),!1;break;case"shared":if((!Array.isArray(g)||g.some((function(b){return typeof b!="string"})))&&g!=="owners"&&typeof g!="boolean")return n(i,e(p)),!1;break;default:if(!Sr.id[p])return console.error("customIntegration does not support key ".concat(p)),!1}}}return!0}function Ds(t,e){if(e===void 0)return!1;switch(G(e)){case"string":return G(t)===e;case"object":if(G(t)!=="object")return!1;for(var n in t)if(!Ds(t[n],e[n]))return!1;return!0;default:return!1}}function xo(t,e){var n=t.sessionId,o=t.toEndPoint,r=t.callerId,i=t.useSipRefer;if(!n||!o)throw new Error("".concat(e,"() requires a sessionId and toEndPoint"));if(typeof n!="string"||typeof o!="string")throw new Error("Invalid paramater: sessionId and toEndPoint must be of type string");if(i&&!o.startsWith("sip:"))throw new Error('"toEndPoint" must be a "sip" address');if(!o.startsWith("sip:")&&!o.startsWith("+"))throw new Error("toEndPoint: ".concat(o,' must starts with either "sip:" or "+"'));if(r&&typeof r!="string")throw new Error("callerId must be of type string");if(r&&!o.startsWith("+"))throw new Error("callerId is only valid when transferring to a PSTN number")}function jo(t){if(G(t)!=="object")throw new Error('RemoteMediaPlayerSettings: must be "object" type');if(t.state&&!Object.values(vr).includes(t.state))throw new Error("Invalid value for RemoteMediaPlayerSettings.state, valid values are: "+JSON.stringify(vr));if(t.volume){if(typeof t.volume!="number")throw new Error('RemoteMediaPlayerSettings.volume: must be "number" type');if(t.volume<0||t.volume>2)throw new Error("RemoteMediaPlayerSettings.volume: must be between 0.0 - 2.0")}}function No(t,e,n){return!(typeof t!="number"||t<e||t>n)}function $n(t,e){return t&&!e&&delete t.data,t}const mu=Object.freeze(Object.defineProperty({__proto__:null,DAILY_ACCESS_LEVEL_FULL:la,DAILY_ACCESS_LEVEL_LOBBY:yl,DAILY_ACCESS_LEVEL_NONE:bl,DAILY_ACCESS_UNKNOWN:tn,DAILY_CAMERA_ERROR_CAM_AND_MIC_IN_USE:Pl,DAILY_CAMERA_ERROR_CAM_IN_USE:Ol,DAILY_CAMERA_ERROR_CONSTRAINTS:xl,DAILY_CAMERA_ERROR_MIC_IN_USE:Ml,DAILY_CAMERA_ERROR_NOT_FOUND:Ll,DAILY_CAMERA_ERROR_PERMISSIONS:Il,DAILY_CAMERA_ERROR_UNDEF_MEDIADEVICES:Dl,DAILY_CAMERA_ERROR_UNKNOWN:jl,DAILY_EVENT_ACCESS_STATE_UPDATED:Aa,DAILY_EVENT_ACTIVE_SPEAKER_CHANGE:Ka,DAILY_EVENT_ACTIVE_SPEAKER_MODE_CHANGE:Qa,DAILY_EVENT_APP_MSG:Ba,DAILY_EVENT_CAMERA_ERROR:ba,DAILY_EVENT_CPU_LOAD_CHANGE:es,DAILY_EVENT_ERROR:gr,DAILY_EVENT_EXIT_FULLSCREEN:Ot,DAILY_EVENT_FACE_COUNTS_UPDATED:ts,DAILY_EVENT_FULLSCREEN:At,DAILY_EVENT_IFRAME_LAUNCH_CONFIG:fa,DAILY_EVENT_IFRAME_READY_FOR_LAUNCH_CONFIG:ha,DAILY_EVENT_INPUT_SETTINGS_UPDATED:fr,DAILY_EVENT_JOINED_MEETING:wa,DAILY_EVENT_JOINING_MEETING:_a,DAILY_EVENT_LANG_UPDATED:as,DAILY_EVENT_LEFT_MEETING:Sa,DAILY_EVENT_LIVE_STREAMING_ERROR:os,DAILY_EVENT_LIVE_STREAMING_STARTED:ns,DAILY_EVENT_LIVE_STREAMING_STOPPED:is,DAILY_EVENT_LIVE_STREAMING_UPDATED:rs,DAILY_EVENT_LOADED:dr,DAILY_EVENT_LOADING:ga,DAILY_EVENT_LOAD_ATTEMPT_FAILED:va,DAILY_EVENT_LOCAL_SCREEN_SHARE_CANCELED:Ha,DAILY_EVENT_LOCAL_SCREEN_SHARE_STARTED:za,DAILY_EVENT_LOCAL_SCREEN_SHARE_STOPPED:Wa,DAILY_EVENT_MEETING_SESSION_DATA_ERROR:Nl,DAILY_EVENT_MEETING_SESSION_STATE_UPDATED:Ma,DAILY_EVENT_MEETING_SESSION_SUMMARY_UPDATED:Oa,DAILY_EVENT_NETWORK_CONNECTION:Za,DAILY_EVENT_NETWORK_QUALITY_CHANGE:Xa,DAILY_EVENT_NONFATAL_ERROR:mr,DAILY_EVENT_PARTICIPANT_COUNTS_UPDATED:Ta,DAILY_EVENT_PARTICIPANT_JOINED:Ea,DAILY_EVENT_PARTICIPANT_LEFT:Ca,DAILY_EVENT_PARTICIPANT_UPDATED:ka,DAILY_EVENT_RECEIVE_SETTINGS_UPDATED:ss,DAILY_EVENT_RECORDING_DATA:Ua,DAILY_EVENT_RECORDING_ERROR:qa,DAILY_EVENT_RECORDING_STARTED:pr,DAILY_EVENT_RECORDING_STATS:Fa,DAILY_EVENT_RECORDING_STOPPED:hr,DAILY_EVENT_RECORDING_UPLOAD_COMPLETED:Va,DAILY_EVENT_REMOTE_MEDIA_PLAYER_STARTED:Ja,DAILY_EVENT_REMOTE_MEDIA_PLAYER_STOPPED:Ya,DAILY_EVENT_REMOTE_MEDIA_PLAYER_UPDATED:Ga,DAILY_EVENT_STARTED_CAMERA:ya,DAILY_EVENT_THEME_UPDATED:ma,DAILY_EVENT_TRACK_STARTED:La,DAILY_EVENT_TRACK_STOPPED:xa,DAILY_EVENT_TRANSCRIPTION_ERROR:Ra,DAILY_EVENT_TRANSCRIPTION_MSG:$a,DAILY_EVENT_TRANSCRIPTION_STARTED:ja,DAILY_EVENT_TRANSCRIPTION_STOPPED:Na,DAILY_EVENT_WAITING_PARTICIPANT_ADDED:Pa,DAILY_EVENT_WAITING_PARTICIPANT_REMOVED:Da,DAILY_EVENT_WAITING_PARTICIPANT_UPDATED:Ia,DAILY_FATAL_ERROR_CONNECTION:pa,DAILY_FATAL_ERROR_EJECTED:wl,DAILY_FATAL_ERROR_EOL:da,DAILY_FATAL_ERROR_EXP_ROOM:kl,DAILY_FATAL_ERROR_EXP_TOKEN:Cl,DAILY_FATAL_ERROR_MEETING_FULL:Tl,DAILY_FATAL_ERROR_NBF_ROOM:Sl,DAILY_FATAL_ERROR_NBF_TOKEN:El,DAILY_FATAL_ERROR_NOT_ALLOWED:Al,DAILY_FATAL_ERROR_NO_ROOM:ur,DAILY_RECEIVE_SETTINGS_ALL_PARTICIPANTS_KEY:_l,DAILY_RECEIVE_SETTINGS_BASE_KEY:ua,DAILY_STATE_ERROR:Ae,DAILY_STATE_JOINED:Fe,DAILY_STATE_JOINING:hn,DAILY_STATE_LEFT:je,DAILY_STATE_NEW:lr,DAILY_TRACK_STATE_BLOCKED:hl,DAILY_TRACK_STATE_INTERRUPTED:vl,DAILY_TRACK_STATE_LOADING:gl,DAILY_TRACK_STATE_OFF:fl,DAILY_TRACK_STATE_PLAYABLE:ca,DAILY_TRACK_STATE_SENDABLE:ml,default:pu},Symbol.toStringTag,{value:"Module"})),gu=Ys(mu);var Xt={exports:{}},Ro;function vu(){if(Ro)return Xt.exports;Ro=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(S,T,L){return Function.prototype.apply.call(S,T,L)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:n=function(S){return Object.getOwnPropertyNames(S)};function o(w){console&&console.warn&&console.warn(w)}var r=Number.isNaN||function(S){return S!==S};function i(){i.init.call(this)}Xt.exports=i,Xt.exports.once=C,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var s=10;function l(w){if(typeof w!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof w)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(w){if(typeof w!="number"||w<0||r(w))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+w+".");s=w}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||r(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function d(w){return w._maxListeners===void 0?i.defaultMaxListeners:w._maxListeners}i.prototype.getMaxListeners=function(){return d(this)},i.prototype.emit=function(S){for(var T=[],L=1;L<arguments.length;L++)T.push(arguments[L]);var A=S==="error",q=this._events;if(q!==void 0)A=A&&q.error===void 0;else if(!A)return!1;if(A){var R;if(T.length>0&&(R=T[0]),R instanceof Error)throw R;var H=new Error("Unhandled error."+(R?" ("+R.message+")":""));throw H.context=R,H}var ve=q[S];if(ve===void 0)return!1;if(typeof ve=="function")e(ve,this,T);else for(var Ue=ve.length,x=v(ve,Ue),L=0;L<Ue;++L)e(x[L],this,T);return!0};function p(w,S,T,L){var A,q,R;if(l(T),q=w._events,q===void 0?(q=w._events=Object.create(null),w._eventsCount=0):(q.newListener!==void 0&&(w.emit("newListener",S,T.listener?T.listener:T),q=w._events),R=q[S]),R===void 0)R=q[S]=T,++w._eventsCount;else if(typeof R=="function"?R=q[S]=L?[T,R]:[R,T]:L?R.unshift(T):R.push(T),A=d(w),A>0&&R.length>A&&!R.warned){R.warned=!0;var H=new Error("Possible EventEmitter memory leak detected. "+R.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");H.name="MaxListenersExceededWarning",H.emitter=w,H.type=S,H.count=R.length,o(H)}return w}i.prototype.addListener=function(S,T){return p(this,S,T,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(S,T){return p(this,S,T,!0)};function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function b(w,S,T){var L={fired:!1,wrapFn:void 0,target:w,type:S,listener:T},A=g.bind(L);return A.listener=T,L.wrapFn=A,A}i.prototype.once=function(S,T){return l(T),this.on(S,b(this,S,T)),this},i.prototype.prependOnceListener=function(S,T){return l(T),this.prependListener(S,b(this,S,T)),this},i.prototype.removeListener=function(S,T){var L,A,q,R,H;if(l(T),A=this._events,A===void 0)return this;if(L=A[S],L===void 0)return this;if(L===T||L.listener===T)--this._eventsCount===0?this._events=Object.create(null):(delete A[S],A.removeListener&&this.emit("removeListener",S,L.listener||T));else if(typeof L!="function"){for(q=-1,R=L.length-1;R>=0;R--)if(L[R]===T||L[R].listener===T){H=L[R].listener,q=R;break}if(q<0)return this;q===0?L.shift():f(L,q),L.length===1&&(A[S]=L[0]),A.removeListener!==void 0&&this.emit("removeListener",S,H||T)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(S){var T,L,A;if(L=this._events,L===void 0)return this;if(L.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):L[S]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete L[S]),this;if(arguments.length===0){var q=Object.keys(L),R;for(A=0;A<q.length;++A)R=q[A],R!=="removeListener"&&this.removeAllListeners(R);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(T=L[S],typeof T=="function")this.removeListener(S,T);else if(T!==void 0)for(A=T.length-1;A>=0;A--)this.removeListener(S,T[A]);return this};function y(w,S,T){var L=w._events;if(L===void 0)return[];var A=L[S];return A===void 0?[]:typeof A=="function"?T?[A.listener||A]:[A]:T?E(A):v(A,A.length)}i.prototype.listeners=function(S){return y(this,S,!0)},i.prototype.rawListeners=function(S){return y(this,S,!1)},i.listenerCount=function(w,S){return typeof w.listenerCount=="function"?w.listenerCount(S):_.call(w,S)},i.prototype.listenerCount=_;function _(w){var S=this._events;if(S!==void 0){var T=S[w];if(typeof T=="function")return 1;if(T!==void 0)return T.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function v(w,S){for(var T=new Array(S),L=0;L<S;++L)T[L]=w[L];return T}function f(w,S){for(;S+1<w.length;S++)w[S]=w[S+1];w.pop()}function E(w){for(var S=new Array(w.length),T=0;T<S.length;++T)S[T]=w[T].listener||w[T];return S}function C(w,S){return new Promise(function(T,L){function A(R){w.removeListener(S,q),L(R)}function q(){typeof w.removeListener=="function"&&w.removeListener("error",A),T([].slice.call(arguments))}I(w,S,q,{once:!0}),S!=="error"&&M(w,A,{once:!0})})}function M(w,S,T){typeof w.on=="function"&&I(w,"error",S,T)}function I(w,S,T,L){if(typeof w.on=="function")L.once?w.once(S,T):w.on(S,T);else if(typeof w.addEventListener=="function")w.addEventListener(S,function A(q){L.once&&w.removeEventListener(S,A),T(q)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof w)}return Xt.exports}var Ct={},Te={},Fo;function yu(){if(Fo)return Te;Fo=1,Object.defineProperty(Te,"__esModule",{value:!0}),Te.Api=Te.HttpClient=Te.ContentType=void 0;var t;(function(o){o.Json="application/json",o.JsonApi="application/vnd.api+json",o.FormData="multipart/form-data",o.UrlEncoded="application/x-www-form-urlencoded",o.Text="text/plain"})(t||(Te.ContentType=t={}));class e{baseUrl="https://api.vapi.ai";securityData=null;securityWorker;abortControllers=new Map;customFetch=(...r)=>fetch(...r);baseApiParams={credentials:"same-origin",headers:{},redirect:"follow",referrerPolicy:"no-referrer"};constructor(r={}){Object.assign(this,r)}setSecurityData=r=>{this.securityData=r};encodeQueryParam(r,i){return`${encodeURIComponent(r)}=${encodeURIComponent(typeof i=="number"?i:`${i}`)}`}addQueryParam(r,i){return this.encodeQueryParam(i,r[i])}addArrayQueryParam(r,i){return r[i].map(l=>this.encodeQueryParam(i,l)).join("&")}toQueryString(r){const i=r||{};return Object.keys(i).filter(l=>typeof i[l]<"u").map(l=>Array.isArray(i[l])?this.addArrayQueryParam(i,l):this.addQueryParam(i,l)).join("&")}addQueryParams(r){const i=this.toQueryString(r);return i?`?${i}`:""}contentFormatters={[t.Json]:r=>r!==null&&(typeof r=="object"||typeof r=="string")?JSON.stringify(r):r,[t.JsonApi]:r=>r!==null&&(typeof r=="object"||typeof r=="string")?JSON.stringify(r):r,[t.Text]:r=>r!==null&&typeof r!="string"?JSON.stringify(r):r,[t.FormData]:r=>r instanceof FormData?r:Object.keys(r||{}).reduce((i,s)=>{const l=r[s];return i.append(s,l instanceof Blob?l:typeof l=="object"&&l!==null?JSON.stringify(l):`${l}`),i},new FormData),[t.UrlEncoded]:r=>this.toQueryString(r)};mergeRequestParams(r,i){return{...this.baseApiParams,...r,...i||{},headers:{...this.baseApiParams.headers||{},...r.headers||{},...i&&i.headers||{}}}}createAbortSignal=r=>{if(this.abortControllers.has(r)){const s=this.abortControllers.get(r);return s?s.signal:void 0}const i=new AbortController;return this.abortControllers.set(r,i),i.signal};abortRequest=r=>{const i=this.abortControllers.get(r);i&&(i.abort(),this.abortControllers.delete(r))};request=async({body:r,secure:i,path:s,type:l,query:d,format:p,baseUrl:g,cancelToken:b,...y})=>{const _=(typeof i=="boolean"?i:this.baseApiParams.secure)&&this.securityWorker&&await this.securityWorker(this.securityData)||{},v=this.mergeRequestParams(y,_),f=d&&this.toQueryString(d),E=this.contentFormatters[l||t.Json],C=p||v.format;return this.customFetch(`${g||this.baseUrl||""}${s}${f?`?${f}`:""}`,{...v,headers:{...v.headers||{},...l&&l!==t.FormData?{"Content-Type":l}:{}},signal:(b?this.createAbortSignal(b):v.signal)||null,body:typeof r>"u"||r===null?null:E(r)}).then(async M=>{const I=M;I.data=null,I.error=null;const w=C?M.clone():M,S=C?await w[C]().then(T=>(I.ok?I.data=T:I.error=T,I)).catch(T=>(I.error=T,I)):I;if(b&&this.abortControllers.delete(b),!M.ok)throw S;return S})}}Te.HttpClient=e;class n extends e{assistant={assistantControllerCreate:(r,i={})=>this.request({path:"/assistant",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i}),assistantControllerFindAll:(r,i={})=>this.request({path:"/assistant",method:"GET",query:r,secure:!0,format:"json",...i}),assistantControllerFindOne:(r,i={})=>this.request({path:`/assistant/${r}`,method:"GET",secure:!0,format:"json",...i}),assistantControllerUpdate:(r,i,s={})=>this.request({path:`/assistant/${r}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...s}),assistantControllerReplace:(r,i,s={})=>this.request({path:`/assistant/${r}`,method:"PUT",body:i,secure:!0,type:t.Json,format:"json",...s}),assistantControllerRemove:(r,i={})=>this.request({path:`/assistant/${r}`,method:"DELETE",secure:!0,format:"json",...i}),assistantControllerFindVersions:(r,i,s={})=>this.request({path:`/assistant/${r}/version`,method:"GET",query:i,secure:!0,format:"json",...s})};v2={assistantControllerFindAllPaginated:(r,i={})=>this.request({path:"/v2/assistant",method:"GET",query:r,secure:!0,format:"json",...i}),callControllerCallsExport:(r,i={})=>this.request({path:"/v2/call/export",method:"GET",query:r,secure:!0,...i}),callControllerFindAllPaginated:(r,i={})=>this.request({path:"/v2/call",method:"GET",query:r,secure:!0,format:"json",...i}),callControllerFindAllMetadataPaginated:(r,i={})=>this.request({path:"/v2/call/metadata",method:"GET",query:r,secure:!0,format:"json",...i}),phoneNumberControllerFindAllPaginated:(r,i={})=>this.request({path:"/v2/phone-number",method:"GET",query:r,secure:!0,format:"json",...i})};squad={squadControllerCreate:(r,i={})=>this.request({path:"/squad",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i}),squadControllerFindAll:(r,i={})=>this.request({path:"/squad",method:"GET",query:r,secure:!0,format:"json",...i}),squadControllerFindOne:(r,i={})=>this.request({path:`/squad/${r}`,method:"GET",secure:!0,format:"json",...i}),squadControllerUpdate:(r,i,s={})=>this.request({path:`/squad/${r}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...s}),squadControllerRemove:(r,i={})=>this.request({path:`/squad/${r}`,method:"DELETE",secure:!0,format:"json",...i})};workflow={workflowControllerFindAll:(r={})=>this.request({path:"/workflow",method:"GET",secure:!0,format:"json",...r}),workflowControllerCreate:(r,i={})=>this.request({path:"/workflow",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i}),workflowControllerFindOne:(r,i={})=>this.request({path:`/workflow/${r}`,method:"GET",secure:!0,format:"json",...i}),workflowControllerDelete:(r,i={})=>this.request({path:`/workflow/${r}`,method:"DELETE",secure:!0,format:"json",...i}),workflowControllerUpdate:(r,i,s={})=>this.request({path:`/workflow/${r}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...s})};call={callControllerCreate:(r,i={})=>this.request({path:"/call",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i}),callControllerFindAll:(r,i={})=>this.request({path:"/call",method:"GET",query:r,secure:!0,format:"json",...i}),callControllerFindOne:(r,i={})=>this.request({path:`/call/${r}`,method:"GET",secure:!0,format:"json",...i}),callControllerUpdate:(r,i,s={})=>this.request({path:`/call/${r}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...s}),callControllerDeleteCallData:(r,i={})=>this.request({path:`/call/${r}`,method:"DELETE",secure:!0,format:"json",...i}),callControllerCreatePhoneCall:(r,i={})=>this.request({path:"/call/phone",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i}),callControllerCreateWebCall:(r,i={})=>this.request({path:"/call/web",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i})};chat={chatControllerListChats:(r,i={})=>this.request({path:"/chat",method:"GET",query:r,secure:!0,format:"json",...i}),chatControllerCreateChat:(r,i={})=>this.request({path:"/chat",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i}),chatControllerGetChat:(r,i={})=>this.request({path:`/chat/${r}`,method:"GET",secure:!0,format:"json",...i}),chatControllerDeleteChat:(r,i={})=>this.request({path:`/chat/${r}`,method:"DELETE",secure:!0,format:"json",...i}),chatControllerCreateOpenAiChat:(r,i={})=>this.request({path:"/chat/responses",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i}),chatControllerCreateWebChat:(r,i={})=>this.request({path:"/chat/web",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i}),chatControllerCreateOpenAiWebChat:(r,i={})=>this.request({path:"/chat/web/responses",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i})};campaign={campaignControllerCreate:(r,i={})=>this.request({path:"/campaign",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i}),campaignControllerFindAll:(r,i={})=>this.request({path:"/campaign",method:"GET",query:r,secure:!0,format:"json",...i}),campaignControllerFindOne:(r,i={})=>this.request({path:`/campaign/${r}`,method:"GET",secure:!0,format:"json",...i}),campaignControllerUpdate:(r,i,s={})=>this.request({path:`/campaign/${r}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...s}),campaignControllerRemove:(r,i={})=>this.request({path:`/campaign/${r}`,method:"DELETE",secure:!0,format:"json",...i})};session={sessionControllerCreate:(r,i={})=>this.request({path:"/session",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i}),sessionControllerFindAllPaginated:(r,i={})=>this.request({path:"/session",method:"GET",query:r,secure:!0,format:"json",...i}),sessionControllerFindOne:(r,i={})=>this.request({path:`/session/${r}`,method:"GET",secure:!0,format:"json",...i}),sessionControllerUpdate:(r,i,s={})=>this.request({path:`/session/${r}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...s}),sessionControllerRemove:(r,i={})=>this.request({path:`/session/${r}`,method:"DELETE",secure:!0,format:"json",...i})};phoneNumber={phoneNumberControllerImportTwilio:(r,i={})=>this.request({path:"/phone-number/import/twilio",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i}),phoneNumberControllerImportVonage:(r,i={})=>this.request({path:"/phone-number/import/vonage",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i}),phoneNumberControllerCreate:(r,i={})=>this.request({path:"/phone-number",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i}),phoneNumberControllerFindAll:(r,i={})=>this.request({path:"/phone-number",method:"GET",query:r,secure:!0,format:"json",...i}),phoneNumberControllerFindOne:(r,i={})=>this.request({path:`/phone-number/${r}`,method:"GET",secure:!0,format:"json",...i}),phoneNumberControllerUpdate:(r,i,s={})=>this.request({path:`/phone-number/${r}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...s}),phoneNumberControllerRemove:(r,i={})=>this.request({path:`/phone-number/${r}`,method:"DELETE",secure:!0,format:"json",...i})};tool={toolControllerCreate:(r,i={})=>this.request({path:"/tool",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i}),toolControllerFindAll:(r,i={})=>this.request({path:"/tool",method:"GET",query:r,secure:!0,format:"json",...i}),toolControllerFindOne:(r,i={})=>this.request({path:`/tool/${r}`,method:"GET",secure:!0,format:"json",...i}),toolControllerUpdate:(r,i,s={})=>this.request({path:`/tool/${r}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...s}),toolControllerRemove:(r,i={})=>this.request({path:`/tool/${r}`,method:"DELETE",secure:!0,format:"json",...i})};file={fileControllerCreateDeprecated:(r,i={})=>this.request({path:"/file/upload",method:"POST",body:r,secure:!0,type:t.FormData,format:"json",...i}),fileControllerCreate:(r,i={})=>this.request({path:"/file",method:"POST",body:r,secure:!0,type:t.FormData,format:"json",...i}),fileControllerFindAll:(r={})=>this.request({path:"/file",method:"GET",secure:!0,format:"json",...r}),fileControllerFindOne:(r,i={})=>this.request({path:`/file/${r}`,method:"GET",secure:!0,format:"json",...i}),fileControllerUpdate:(r,i,s={})=>this.request({path:`/file/${r}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...s}),fileControllerRemove:(r,i={})=>this.request({path:`/file/${r}`,method:"DELETE",secure:!0,format:"json",...i})};knowledgeBase={knowledgeBaseControllerCreate:(r,i={})=>this.request({path:"/knowledge-base",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i}),knowledgeBaseControllerFindAll:(r,i={})=>this.request({path:"/knowledge-base",method:"GET",query:r,secure:!0,format:"json",...i}),knowledgeBaseControllerFindOne:(r,i={})=>this.request({path:`/knowledge-base/${r}`,method:"GET",secure:!0,format:"json",...i}),knowledgeBaseControllerUpdate:(r,i,s={})=>this.request({path:`/knowledge-base/${r}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...s}),knowledgeBaseControllerRemove:(r,i={})=>this.request({path:`/knowledge-base/${r}`,method:"DELETE",secure:!0,format:"json",...i})};structuredOutput={structuredOutputControllerFindAll:(r,i={})=>this.request({path:"/structured-output",method:"GET",query:r,secure:!0,format:"json",...i}),structuredOutputControllerCreate:(r,i={})=>this.request({path:"/structured-output",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i}),structuredOutputControllerFindOne:(r,i={})=>this.request({path:`/structured-output/${r}`,method:"GET",secure:!0,format:"json",...i}),structuredOutputControllerUpdate:(r,i,s,l={})=>this.request({path:`/structured-output/${r}`,method:"PATCH",query:i,body:s,secure:!0,type:t.Json,format:"json",...l}),structuredOutputControllerRemove:(r,i={})=>this.request({path:`/structured-output/${r}`,method:"DELETE",secure:!0,format:"json",...i})};testSuite={testSuiteControllerFindAllPaginated:(r,i={})=>this.request({path:"/test-suite",method:"GET",query:r,secure:!0,format:"json",...i}),testSuiteControllerCreate:(r,i={})=>this.request({path:"/test-suite",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i}),testSuiteControllerFindOne:(r,i={})=>this.request({path:`/test-suite/${r}`,method:"GET",secure:!0,format:"json",...i}),testSuiteControllerUpdate:(r,i,s={})=>this.request({path:`/test-suite/${r}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...s}),testSuiteControllerRemove:(r,i={})=>this.request({path:`/test-suite/${r}`,method:"DELETE",secure:!0,format:"json",...i}),testSuiteTestControllerFindAllPaginated:(r,i,s={})=>this.request({path:`/test-suite/${r}/test`,method:"GET",query:i,secure:!0,format:"json",...s}),testSuiteTestControllerCreate:(r,i,s={})=>this.request({path:`/test-suite/${r}/test`,method:"POST",body:i,secure:!0,type:t.Json,format:"json",...s}),testSuiteTestControllerFindOne:(r,i,s={})=>this.request({path:`/test-suite/${r}/test/${i}`,method:"GET",secure:!0,format:"json",...s}),testSuiteTestControllerUpdate:(r,i,s,l={})=>this.request({path:`/test-suite/${r}/test/${i}`,method:"PATCH",body:s,secure:!0,type:t.Json,format:"json",...l}),testSuiteTestControllerRemove:(r,i,s={})=>this.request({path:`/test-suite/${r}/test/${i}`,method:"DELETE",secure:!0,format:"json",...s}),testSuiteRunControllerFindAllPaginated:(r,i,s={})=>this.request({path:`/test-suite/${r}/run`,method:"GET",query:i,secure:!0,format:"json",...s}),testSuiteRunControllerCreate:(r,i,s={})=>this.request({path:`/test-suite/${r}/run`,method:"POST",body:i,secure:!0,type:t.Json,format:"json",...s}),testSuiteRunControllerFindOne:(r,i,s={})=>this.request({path:`/test-suite/${r}/run/${i}`,method:"GET",secure:!0,format:"json",...s}),testSuiteRunControllerUpdate:(r,i,s,l={})=>this.request({path:`/test-suite/${r}/run/${i}`,method:"PATCH",body:s,secure:!0,type:t.Json,format:"json",...l}),testSuiteRunControllerRemove:(r,i,s={})=>this.request({path:`/test-suite/${r}/run/${i}`,method:"DELETE",secure:!0,format:"json",...s})};eval={evalControllerCreate:(r,i={})=>this.request({path:"/eval",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i}),evalControllerGetPaginated:(r,i={})=>this.request({path:"/eval",method:"GET",query:r,secure:!0,format:"json",...i}),evalControllerUpdate:(r,i,s={})=>this.request({path:`/eval/${r}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...s}),evalControllerRemove:(r,i={})=>this.request({path:`/eval/${r}`,method:"DELETE",secure:!0,format:"json",...i}),evalControllerGet:(r,i={})=>this.request({path:`/eval/${r}`,method:"GET",secure:!0,format:"json",...i}),evalControllerRemoveRun:(r,i={})=>this.request({path:`/eval/run/${r}`,method:"DELETE",secure:!0,format:"json",...i}),evalControllerGetRun:(r,i={})=>this.request({path:`/eval/run/${r}`,method:"GET",secure:!0,format:"json",...i}),evalControllerRun:(r,i={})=>this.request({path:"/eval/run",method:"POST",body:r,secure:!0,type:t.Json,...i}),evalControllerGetRunsPaginated:(r,i={})=>this.request({path:"/eval/run",method:"GET",query:r,secure:!0,format:"json",...i})};org={orgControllerCreate:(r,i={})=>this.request({path:"/org",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i}),orgControllerFindAll:(r={})=>this.request({path:"/org",method:"GET",secure:!0,format:"json",...r}),orgControllerFeatureFlagEnabled:(r,i={})=>this.request({path:"/org/feature-flag",method:"GET",query:r,secure:!0,format:"json",...i}),orgControllerFindOne:(r,i={})=>this.request({path:`/org/${r}`,method:"GET",secure:!0,format:"json",...i}),orgControllerUpdate:(r,i,s={})=>this.request({path:`/org/${r}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...s}),orgControllerDeleteOrg:(r,i={})=>this.request({path:`/org/${r}`,method:"DELETE",secure:!0,...i}),orgControllerFindAllUsers:(r,i={})=>this.request({path:`/org/${r}/user`,method:"GET",secure:!0,format:"json",...i}),orgControllerOrgLeave:(r,i={})=>this.request({path:`/org/${r}/leave`,method:"DELETE",secure:!0,...i}),orgControllerOrgRemoveUser:(r,i,s={})=>this.request({path:`/org/${r}/member/${i}/leave`,method:"DELETE",secure:!0,...s}),orgControllerUsersInvite:(r,i,s={})=>this.request({path:`/org/${r}/invite`,method:"POST",body:i,secure:!0,type:t.Json,...s}),orgControllerUserUpdate:(r,i,s={})=>this.request({path:`/org/${r}/role`,method:"PATCH",body:i,secure:!0,type:t.Json,...s}),orgControllerOrgToken:(r,i={})=>this.request({path:`/org/${r}/auth`,method:"GET",secure:!0,format:"json",...i})};token={tokenControllerCreate:(r,i={})=>this.request({path:"/token",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i}),tokenControllerFindAll:(r,i={})=>this.request({path:"/token",method:"GET",query:r,secure:!0,format:"json",...i}),tokenControllerFindOne:(r,i={})=>this.request({path:`/token/${r}`,method:"GET",secure:!0,format:"json",...i}),tokenControllerUpdate:(r,i,s={})=>this.request({path:`/token/${r}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...s}),tokenControllerRemove:(r,i={})=>this.request({path:`/token/${r}`,method:"DELETE",secure:!0,format:"json",...i})};credential={credentialControllerCreate:(r,i={})=>this.request({path:"/credential",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i}),credentialControllerFindAll:(r,i={})=>this.request({path:"/credential",method:"GET",query:r,secure:!0,format:"json",...i}),credentialControllerFindOne:(r,i={})=>this.request({path:`/credential/${r}`,method:"GET",secure:!0,format:"json",...i}),credentialControllerUpdate:(r,i,s={})=>this.request({path:`/credential/${r}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...s}),credentialControllerRemove:(r,i={})=>this.request({path:`/credential/${r}`,method:"DELETE",secure:!0,format:"json",...i}),credentialControllerGenerateSession:(r,i={})=>this.request({path:"/credential/session",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i}),credentialControllerHandleWebhook:(r,i={})=>this.request({path:"/credential/webhook",method:"POST",body:r,type:t.Json,...i}),credentialControllerTriggerCredentialAction:(r,i={})=>this.request({path:"/credential/trigger",method:"POST",body:r,secure:!0,type:t.Json,...i})};template={templateControllerCreate:(r,i={})=>this.request({path:"/template",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i}),templateControllerFindAll:(r,i={})=>this.request({path:"/template",method:"GET",query:r,secure:!0,format:"json",...i}),templateControllerFindAllPinned:(r={})=>this.request({path:"/template/pinned",method:"GET",secure:!0,format:"json",...r}),templateControllerFindOne:(r,i={})=>this.request({path:`/template/${r}`,method:"GET",secure:!0,format:"json",...i}),templateControllerUpdate:(r,i,s={})=>this.request({path:`/template/${r}`,method:"PATCH",body:i,secure:!0,type:t.Json,format:"json",...s}),templateControllerRemove:(r,i={})=>this.request({path:`/template/${r}`,method:"DELETE",secure:!0,format:"json",...i})};voiceLibrary={voiceLibraryControllerVoiceGetByProvider:(r,i,s={})=>this.request({path:`/voice-library/${r}`,method:"GET",query:i,secure:!0,format:"json",...s}),voiceLibraryControllerVoiceGetAccentsByProvider:(r,i={})=>this.request({path:`/voice-library/${r}/accents`,method:"GET",secure:!0,format:"json",...i}),voiceLibraryControllerVoiceLibrarySyncByProvider:(r,i={})=>this.request({path:`/voice-library/sync/${r}`,method:"POST",secure:!0,format:"json",...i}),voiceLibraryControllerVoiceLibrarySyncDefaultVoices:(r,i={})=>this.request({path:"/voice-library/sync",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i}),voiceLibraryControllerVoiceLibraryCreateSesameVoice:(r,i={})=>this.request({path:"/voice-library/create-sesame-voice",method:"POST",body:r,secure:!0,type:t.Json,...i})};provider={providerResourceControllerCreateProviderResource:(r,i,s={})=>this.request({path:`/provider/${r}/${i}`,method:"POST",secure:!0,format:"json",...s}),providerResourceControllerGetProviderResourcesPaginated:(r,i,s,l={})=>this.request({path:`/provider/${r}/${i}`,method:"GET",query:s,secure:!0,format:"json",...l}),providerResourceControllerGetProviderResource:(r,i,s,l={})=>this.request({path:`/provider/${r}/${i}/${s}`,method:"GET",secure:!0,format:"json",...l}),providerResourceControllerDeleteProviderResource:(r,i,s,l={})=>this.request({path:`/provider/${r}/${i}/${s}`,method:"DELETE",secure:!0,format:"json",...l}),providerResourceControllerUpdateProviderResource:(r,i,s,l={})=>this.request({path:`/provider/${r}/${i}/${s}`,method:"PATCH",secure:!0,format:"json",...l}),providerControllerGetWorkflows:(r,i,s={})=>this.request({path:`/${r}/workflows`,method:"GET",query:i,secure:!0,format:"json",...s}),providerControllerGetWorkflowTriggerHook:(r,i,s={})=>this.request({path:`/${r}/workflows/${i}/hooks`,method:"GET",secure:!0,format:"json",...s}),providerControllerGetLocations:(r,i={})=>this.request({path:`/${r}/locations`,method:"GET",secure:!0,format:"json",...i}),voiceProviderControllerSearchVoices:(r,i,s={})=>this.request({path:`/${r}/voices/search`,method:"GET",query:i,secure:!0,format:"json",...s}),voiceProviderControllerSearchVoice:(r,i,s={})=>this.request({path:`/${r}/voice/search`,method:"GET",query:i,secure:!0,format:"json",...s}),voiceProviderControllerAddVoices:(r,i,s={})=>this.request({path:`/${r}/voices/add`,method:"POST",body:i,secure:!0,type:t.Json,format:"json",...s}),voiceProviderControllerAddVoice:(r,i,s={})=>this.request({path:`/${r}/voice/add`,method:"POST",body:i,secure:!0,type:t.Json,format:"json",...s})};v11Labs={voiceProviderControllerCloneVoices:(r,i={})=>this.request({path:"/11labs/voice/clone",method:"POST",body:r,secure:!0,type:t.FormData,...i})};analytics={analyticsControllerQuery:(r,i={})=>this.request({path:"/analytics",method:"POST",body:r,secure:!0,type:t.Json,format:"json",...i})}}return Te.Api=n,Te}var qo;function bu(){if(qo)return Ct;qo=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.client=void 0;const t=yu(),e=new t.Api({baseUrl:"https://api.vapi.ai",baseApiParams:{secure:!0},securityWorker:async n=>{if(n)return{headers:{Authorization:`Bearer ${n}`}}}});return Ct.client=e,Ct}var He={},Vo;function _u(){if(Vo)return He;Vo=1,Object.defineProperty(He,"__esModule",{value:!0}),He.createSafeDailyConfig=t,He.safeSetLocalAudio=e,He.safeSetInputDevicesAsync=n,He.createSafeDailyFactoryOptions=o;function t(r){if(!r)return{};const{alwaysIncludeMicInPermissionPrompt:i,...s}=r;return i===!1?(console.warn("[Vapi] alwaysIncludeMicInPermissionPrompt:false detected. This can cause Chrome 140+ issues. Removing the property."),s):r}function e(r,i){if(!r)throw new Error("Call object is not available.");r.setLocalAudio(i)}async function n(r,i){if(!r)throw new Error("Call object is not available.");if("audioSource"in i&&i.audioSource===!1){console.warn("[Vapi] setInputDevicesAsync with audioSource:false detected. This can cause Chrome 140+ issues. Using default device instead.");const{audioSource:s,...l}=i;await r.setInputDevicesAsync(l);return}await r.setInputDevicesAsync(i)}function o(r){return r?r.audioSource===!1?(console.warn("[Vapi] audioSource:false detected in factory options. This can cause Chrome 140+ issues. Defaulting to true."),{...r,audioSource:!0}):r:{}}return He}var Uo;function wu(){if(Uo)return st;Uo=1;var t=st&&st.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(st,"__esModule",{value:!0});const e=t(gu),n=t(vu()),o=bu(),r=_u();async function i(b,y){b.muted=!1,b.autoplay=!0,y!=null&&(b.srcObject=new MediaStream([y]),await b.play())}async function s(b,y){const _=document.createElement("audio");return _.dataset.participantId=y,document.body.appendChild(_),await i(_,b),_}function l(b){document.querySelector(`audio[data-participant-id="${b}"]`)?.remove()}function d(b,y,_,v){b.participant.local||y.updateParticipant(b.participant.session_id,{setSubscribedTracks:{audio:!0,video:_||v}})}class p extends n.default{on(y,_){return super.on(y,_),this}once(y,_){return super.once(y,_),this}emit(y,..._){return super.emit(y,..._)}removeListener(y,_){return super.removeListener(y,_),this}removeAllListeners(y){return super.removeAllListeners(y),this}}class g extends p{started=!1;call=null;speakingTimeout=null;dailyCallConfig={};dailyCallObject={};hasEmittedCallEndedStatus=!1;constructor(y,_,v,f){super(),o.client.baseUrl=_??"https://api.vapi.ai",o.client.setSecurityData(y),this.dailyCallConfig=(0,r.createSafeDailyConfig)(v),this.dailyCallObject=(0,r.createSafeDailyFactoryOptions)(f)}async cleanup(){this.started=!1,this.hasEmittedCallEndedStatus=!1,this.call&&(await this.call.destroy(),this.call=null),this.speakingTimeout=null}isMobileDevice(){if(typeof navigator>"u")return!1;const y=navigator.userAgent;return/android|iphone|ipad|ipod|iemobile|blackberry|bada/i.test(y.toLowerCase())}async sleep(y){return new Promise(_=>setTimeout(_,y))}async start(y,_,v,f,E,C){const M=Date.now();if(!y&&!v&&!f){const I=new Error("Assistant or Squad or Workflow must be provided.");throw this.emit("error",{type:"validation-error",stage:"input-validation",message:I.message,timestamp:new Date().toISOString()}),I}if(this.started)return this.emit("call-start-progress",{stage:"validation",status:"failed",timestamp:new Date().toISOString(),metadata:{reason:"already-started"}}),null;this.emit("call-start-progress",{stage:"initialization",status:"started",timestamp:new Date().toISOString(),metadata:{hasAssistant:!!y,hasSquad:!!v,hasWorkflow:!!f}}),this.started=!0;try{this.emit("call-start-progress",{stage:"web-call-creation",status:"started",timestamp:new Date().toISOString()});const I=Date.now(),w=(await o.client.call.callControllerCreateWebCall({assistant:typeof y=="string"?void 0:y,assistantId:typeof y=="string"?y:void 0,assistantOverrides:_,squad:typeof v=="string"?void 0:v,squadId:typeof v=="string"?v:void 0,workflow:typeof f=="string"?void 0:f,workflowId:typeof f=="string"?f:void 0,workflowOverrides:E,roomDeleteOnUserLeaveEnabled:C?.roomDeleteOnUserLeaveEnabled})).data,S=Date.now()-I;this.emit("call-start-progress",{stage:"web-call-creation",status:"completed",duration:S,timestamp:new Date().toISOString(),metadata:{callId:w?.id||"unknown",videoRecordingEnabled:w?.artifactPlan?.videoRecordingEnabled??!1,voiceProvider:w?.assistant?.voice?.provider||"unknown"}}),this.call&&(this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"started",timestamp:new Date().toISOString(),metadata:{action:"cleanup-existing"}}),await this.cleanup());const T=w?.artifactPlan?.videoRecordingEnabled??!1,L=w?.assistant?.voice?.provider==="tavus";this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"started",timestamp:new Date().toISOString(),metadata:{audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??T,isVideoRecordingEnabled:T,isVideoEnabled:L}});const A=Date.now();try{this.call=e.default.createCallObject({audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??T,dailyConfig:this.dailyCallConfig});const x=Date.now()-A;this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"completed",duration:x,timestamp:new Date().toISOString()})}catch(x){const te=Date.now()-A;throw this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"failed",duration:te,timestamp:new Date().toISOString(),metadata:{error:x?.toString()}}),this.emit("error",{type:"daily-call-object-creation-error",stage:"daily-call-object-creation",error:x,timestamp:new Date().toISOString()}),x}this.call.iframe()?.style.setProperty("display","none"),this.call.on("left-meeting",()=>{this.emit("call-end"),this.hasEmittedCallEndedStatus||(this.emit("message",{type:"status-update",status:"ended",endedReason:"customer-ended-call"}),this.hasEmittedCallEndedStatus=!0),T&&this.call?.stopRecording(),this.cleanup().catch(console.error)}),this.call.on("error",x=>{this.emit("error",x),T&&this.call?.stopRecording()}),this.call.on("camera-error",x=>{this.emit("camera-error",x)}),this.call.on("network-quality-change",x=>{this.emit("network-quality-change",x)}),this.call.on("network-connection",x=>{this.emit("network-connection",x)}),this.call.on("track-started",async x=>{!x||!x.participant||x.participant?.local||x.participant?.user_name==="Vapi Speaker"&&(x.track.kind==="video"&&this.emit("video",x.track),x.track.kind==="audio"&&await s(x.track,x.participant.session_id),this.call?.sendAppMessage("playable"))}),this.call.on("participant-joined",x=>{!x||!this.call||d(x,this.call,T,L)}),this.call.on("participant-updated",x=>{x&&this.emit("daily-participant-updated",x.participant)}),this.call.on("participant-left",x=>{x&&l(x.participant.session_id)});const q=this.isMobileDevice();if(this.emit("call-start-progress",{stage:"mobile-permissions",status:"started",timestamp:new Date().toISOString(),metadata:{isMobile:q}}),q){const x=Date.now();await this.sleep(1e3);const te=Date.now()-x;this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",duration:te,timestamp:new Date().toISOString(),metadata:{action:"permissions-wait"}})}else this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-mobile"}});this.emit("call-start-progress",{stage:"daily-call-join",status:"started",timestamp:new Date().toISOString()});const R=Date.now();try{await this.call.join({url:w.webCallUrl,subscribeToTracksAutomatically:!1});const x=Date.now()-R;this.emit("call-start-progress",{stage:"daily-call-join",status:"completed",duration:x,timestamp:new Date().toISOString()})}catch(x){const te=Date.now()-R;throw this.emit("call-start-progress",{stage:"daily-call-join",status:"failed",duration:te,timestamp:new Date().toISOString(),metadata:{error:x?.toString()}}),this.emit("error",{type:"daily-call-join-error",stage:"daily-call-join",error:x,duration:te,timestamp:new Date().toISOString()}),x}if(T){this.emit("call-start-progress",{stage:"video-recording-setup",status:"started",timestamp:new Date().toISOString()});const x=new Date().getTime(),te=Date.now();try{this.call.startRecording({width:1280,height:720,backgroundColor:"#FF1F2D3D",layout:{preset:"default"}});const Be=Date.now()-te;this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",duration:Be,timestamp:new Date().toISOString()}),this.call.on("recording-started",()=>{const $e=(new Date().getTime()-x)/1e3;this.emit("call-start-progress",{stage:"video-recording-started",status:"completed",timestamp:new Date().toISOString(),metadata:{delaySeconds:$e}}),this.send({type:"control",control:"say-first-message",videoRecordingStartDelaySeconds:$e})})}catch(Be){const $e=Date.now()-te;this.emit("call-start-progress",{stage:"video-recording-setup",status:"failed",duration:$e,timestamp:new Date().toISOString(),metadata:{error:Be?.toString()}}),this.emit("error",{type:"video-recording-setup-error",stage:"video-recording-setup",error:Be,timestamp:new Date().toISOString()})}}else this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-enabled"}});this.emit("call-start-progress",{stage:"audio-observer-setup",status:"started",timestamp:new Date().toISOString()});const H=Date.now();try{this.call.startRemoteParticipantsAudioLevelObserver(100);const x=Date.now()-H;this.emit("call-start-progress",{stage:"audio-observer-setup",status:"completed",duration:x,timestamp:new Date().toISOString()})}catch(x){const te=Date.now()-H;this.emit("call-start-progress",{stage:"audio-observer-setup",status:"failed",duration:te,timestamp:new Date().toISOString(),metadata:{error:x?.toString()}}),this.emit("error",{type:"audio-observer-setup-error",stage:"audio-observer-setup",error:x,timestamp:new Date().toISOString()})}this.call.on("remote-participants-audio-level",x=>{x&&this.handleRemoteParticipantsAudioLevel(x)}),this.call.on("app-message",x=>this.onAppMessage(x)),this.call.on("nonfatal-error",x=>{x?.type==="audio-processor-error"&&this.call?.updateInputSettings({audio:{processor:{type:"none"}}}).then(()=>{(0,r.safeSetLocalAudio)(this.call,!0)})}),this.emit("call-start-progress",{stage:"audio-processing-setup",status:"started",timestamp:new Date().toISOString()});const ve=Date.now();try{this.call.updateInputSettings({audio:{processor:{type:"noise-cancellation"}}});const x=Date.now()-ve;this.emit("call-start-progress",{stage:"audio-processing-setup",status:"completed",duration:x,timestamp:new Date().toISOString()})}catch(x){const te=Date.now()-ve;this.emit("call-start-progress",{stage:"audio-processing-setup",status:"failed",duration:te,timestamp:new Date().toISOString(),metadata:{error:x?.toString()}}),this.emit("error",{type:"audio-processing-setup-error",stage:"audio-processing-setup",error:x,timestamp:new Date().toISOString()})}const Ue=Date.now()-M;return this.emit("call-start-success",{totalDuration:Ue,callId:w?.id||"unknown",timestamp:new Date().toISOString()}),w}catch(I){const w=Date.now()-M;return this.emit("call-start-failed",{stage:"unknown",totalDuration:w,error:I?.toString()||"Unknown error occurred",errorStack:I instanceof Error?I.stack:"No stack trace available",timestamp:new Date().toISOString(),context:{hasAssistant:!!y,hasSquad:!!v,hasWorkflow:!!f,isMobile:this.isMobileDevice()}}),this.emit("error",{type:"start-method-error",stage:"unknown",error:I,totalDuration:w,timestamp:new Date().toISOString(),context:{hasAssistant:!!y,hasSquad:!!v,hasWorkflow:!!f,isMobile:this.isMobileDevice()}}),await this.cleanup(),null}}onAppMessage(y){if(y)try{if(y.data==="listening")return this.emit("call-start");try{const _=JSON.parse(y.data);this.emit("message",_),_&&"type"in _&&"status"in _&&_.type==="status-update"&&_.status==="ended"&&(this.hasEmittedCallEndedStatus=!0)}catch(_){console.log("Error parsing message data: ",_)}}catch(_){console.error(_)}}handleRemoteParticipantsAudioLevel(y){const _=Object.values(y.participantsAudioLevel).reduce((f,E)=>f+E,0);this.emit("volume-level",Math.min(1,_/.15)),_>.01&&(this.speakingTimeout?(clearTimeout(this.speakingTimeout),this.speakingTimeout=null):this.emit("speech-start"),this.speakingTimeout=setTimeout(()=>{this.emit("speech-end"),this.speakingTimeout=null},1e3))}async stop(){this.started=!1,this.call&&(await this.call.destroy(),this.call=null),this.speakingTimeout=null}send(y){this.call?.sendAppMessage(JSON.stringify(y))}setMuted(y){(0,r.safeSetLocalAudio)(this.call,!y)}isMuted(){return this.call?this.call.localAudio()===!1:!1}say(y,_,v,f){this.send({type:"say",message:y,endCallAfterSpoken:_,interruptionsEnabled:v??!1,interruptAssistantEnabled:f??!1})}end(){this.send({type:"end-call"}),this.stop()}setInputDevicesAsync(y){return(0,r.safeSetInputDevicesAsync)(this.call,y)}async increaseMicLevel(y){if(!this.call)throw new Error("Call object is not available.");try{const _=await navigator.mediaDevices.getUserMedia({audio:!0}),v=new AudioContext,f=v.createMediaStreamSource(_),E=v.createGain();E.gain.value=y,f.connect(E);const C=v.createMediaStreamDestination();E.connect(C);const[M]=C.stream.getAudioTracks();await(0,r.safeSetInputDevicesAsync)(this.call,{audioSource:M})}catch(_){console.error("Error adjusting microphone level:",_)}}setOutputDeviceAsync(y){this.call?.setOutputDeviceAsync(y)}getDailyCallObject(){return this.call}startScreenSharing(y,_){this.call?.startScreenShare({displayMediaOptions:y,screenVideoSendSettings:_})}stopScreenSharing(){this.call?.stopScreenShare()}async reconnect(y){const _=Date.now();if(this.started)throw new Error("Cannot reconnect while a call is already in progress. Call stop() first.");if(!y.webCallUrl)throw new Error("webCallUrl is required for reconnection.");this.emit("call-start-progress",{stage:"reconnect-initialization",status:"started",timestamp:new Date().toISOString(),metadata:{callId:y.id||"unknown",hasVideoRecording:!!y?.artifactPlan?.videoRecordingEnabled,voiceProvider:y?.assistant?.voice?.provider||"unknown"}}),this.started=!0;try{this.call&&(this.emit("call-start-progress",{stage:"cleanup-existing-call",status:"started",timestamp:new Date().toISOString()}),await this.cleanup(),this.emit("call-start-progress",{stage:"cleanup-existing-call",status:"completed",timestamp:new Date().toISOString()}));const v=y?.artifactPlan?.videoRecordingEnabled??!1,f=y?.assistant?.voice?.provider==="tavus";this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"started",timestamp:new Date().toISOString(),metadata:{audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??v,isVideoRecordingEnabled:v,isVideoEnabled:f}});const E=Date.now();this.call=e.default.createCallObject({audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??v,dailyConfig:this.dailyCallConfig});const C=Date.now()-E;this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"completed",duration:C,timestamp:new Date().toISOString()}),this.call.iframe()?.style.setProperty("display","none"),this.call.on("left-meeting",()=>{this.emit("call-end"),this.hasEmittedCallEndedStatus||(this.emit("message",{type:"status-update",status:"ended",endedReason:"customer-ended-call"}),this.hasEmittedCallEndedStatus=!0),v&&this.call?.stopRecording(),this.cleanup().catch(console.error)}),this.call.on("error",A=>{this.emit("error",A),v&&this.call?.stopRecording()}),this.call.on("camera-error",A=>{this.emit("camera-error",A)}),this.call.on("network-quality-change",A=>{this.emit("network-quality-change",A)}),this.call.on("network-connection",A=>{this.emit("network-connection",A)}),this.call.on("track-started",async A=>{!A||!A.participant||A.participant?.local||A.participant?.user_name==="Vapi Speaker"&&(A.track.kind==="video"&&this.emit("video",A.track),A.track.kind==="audio"&&await s(A.track,A.participant.session_id),this.call?.sendAppMessage("playable"))}),this.call.on("participant-joined",A=>{!A||!this.call||d(A,this.call,v,f)}),this.call.on("participant-updated",A=>{A&&this.emit("daily-participant-updated",A.participant)}),this.call.on("participant-left",A=>{A&&l(A.participant.session_id)}),this.call.on("remote-participants-audio-level",A=>{A&&this.handleRemoteParticipantsAudioLevel(A)}),this.call.on("app-message",A=>this.onAppMessage(A)),this.call.on("nonfatal-error",A=>{A?.type==="audio-processor-error"&&this.call?.updateInputSettings({audio:{processor:{type:"none"}}}).then(()=>{(0,r.safeSetLocalAudio)(this.call,!0)})});const M=this.isMobileDevice();if(this.emit("call-start-progress",{stage:"mobile-permissions",status:"started",timestamp:new Date().toISOString(),metadata:{isMobile:M}}),M){const A=Date.now();await this.sleep(1e3);const q=Date.now()-A;this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",duration:q,timestamp:new Date().toISOString(),metadata:{action:"permissions-wait"}})}else this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-mobile"}});this.emit("call-start-progress",{stage:"daily-call-join",status:"started",timestamp:new Date().toISOString()});const I=Date.now();await this.call.join({url:y.webCallUrl,subscribeToTracksAutomatically:!1});const w=Date.now()-I;if(this.emit("call-start-progress",{stage:"daily-call-join",status:"completed",duration:w,timestamp:new Date().toISOString()}),v){this.emit("call-start-progress",{stage:"video-recording-setup",status:"started",timestamp:new Date().toISOString()});const A=Date.now(),q=new Date().getTime();try{this.call.startRecording({width:1280,height:720,backgroundColor:"#FF1F2D3D",layout:{preset:"default"}});const R=Date.now()-A;this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",duration:R,timestamp:new Date().toISOString()}),this.call.on("recording-started",()=>{const H=(new Date().getTime()-q)/1e3;this.emit("call-start-progress",{stage:"video-recording-started",status:"completed",timestamp:new Date().toISOString(),metadata:{delaySeconds:H}}),this.send({type:"control",control:"say-first-message",videoRecordingStartDelaySeconds:H})})}catch(R){const H=Date.now()-A;this.emit("call-start-progress",{stage:"video-recording-setup",status:"failed",duration:H,timestamp:new Date().toISOString(),metadata:{error:R?.toString()}})}}else this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-enabled"}});this.emit("call-start-progress",{stage:"audio-observer-setup",status:"started",timestamp:new Date().toISOString()});const S=Date.now();try{this.call.startRemoteParticipantsAudioLevelObserver(100);const A=Date.now()-S;this.emit("call-start-progress",{stage:"audio-observer-setup",status:"completed",duration:A,timestamp:new Date().toISOString()})}catch(A){const q=Date.now()-S;this.emit("call-start-progress",{stage:"audio-observer-setup",status:"failed",duration:q,timestamp:new Date().toISOString(),metadata:{error:A?.toString()}})}this.emit("call-start-progress",{stage:"audio-processing-setup",status:"started",timestamp:new Date().toISOString()});const T=Date.now();try{this.call.updateInputSettings({audio:{processor:{type:"noise-cancellation"}}});const A=Date.now()-T;this.emit("call-start-progress",{stage:"audio-processing-setup",status:"completed",duration:A,timestamp:new Date().toISOString()})}catch(A){const q=Date.now()-T;this.emit("call-start-progress",{stage:"audio-processing-setup",status:"failed",duration:q,timestamp:new Date().toISOString(),metadata:{error:A?.toString()}})}const L=Date.now()-_;this.emit("call-start-success",{totalDuration:L,callId:y?.id||"unknown",timestamp:new Date().toISOString()}),this.emit("call-start")}catch(v){const f=Date.now()-_;throw this.emit("call-start-failed",{stage:"reconnect",totalDuration:f,error:v?.toString()||"Unknown error occurred",errorStack:v instanceof Error?v.stack:"No stack trace available",timestamp:new Date().toISOString(),context:{isReconnect:!0,callId:y?.id||"unknown",hasVideoRecording:!!y?.artifactPlan?.videoRecordingEnabled,voiceProvider:y?.assistant?.voice?.provider||"unknown",isMobile:this.isMobileDevice()}}),this.emit("error",{type:"reconnect-error",error:v,totalDuration:f,timestamp:new Date().toISOString(),context:{isReconnect:!0,callId:y?.id||"unknown",hasVideoRecording:!!y?.artifactPlan?.videoRecordingEnabled,voiceProvider:y?.assistant?.voice?.provider||"unknown",isMobile:this.isMobileDevice()}}),await this.cleanup(),v}}}return st.default=g,st}var Su=wu();const Eu=Gs(Su),ne={whatsappPhone:"5493465432688",whatsappMessage:"Hola, vengo desde el sitio de SER AGRO",vapiPublicKey:"5a29292f-d9cc-4a21-bb7e-ff8df74763cd",vapiAssistantId:"776543a0-f4a2-4ed7-ad7a-f1fe0f6fd4d4",dIdClientKey:"Z29vZ2xlLW9hdXRoMnwxMTczNjE5MjY1MDM0NDgwNjY0ODE6cG92c2R4SXZfRjFQOGJvbXlLc3Ew",dIdAgentId:"v2_agt_GvlTAw-a",primaryColor:"#2E7D32",secondaryColor:"#1B5E20",whatsappColor:"#25D366",videoCallColor:"#9C27B0"};let Jn=!1,Re=null,on=!1,kr=!1;/Android/i.test(navigator.userAgent)&&(document.body?document.body.classList.add("is-android"):document.addEventListener("DOMContentLoaded",()=>{document.body.classList.add("is-android")}));function Ls(){return Re||(Re=new Eu(ne.vapiPublicKey),Re.on("call-start",()=>{console.log("✅ Llamada iniciada"),on=!0,ku()}),Re.on("call-end",()=>{console.log("✅ Llamada finalizada"),on=!1,Cr()}),Re.on("error",t=>{console.error("❌ Error en Vapi:",t),alert("Ocurrió un error durante la llamada. Por favor, intentá de nuevo."),on=!1,Cr()}),console.log("✅ Cliente Vapi inicializado")),Re}function ku(){const t=document.getElementById("call-indicator"),e=document.getElementById("call-overlay"),n=document.getElementById("unified-contact-button");t&&(t.classList.add("active"),t.style.display="flex"),e&&e.classList.add("active"),n&&(n.style.display="none"),document.body.style.overflow="hidden"}function Cr(){const t=document.getElementById("call-indicator"),e=document.getElementById("call-overlay"),n=document.getElementById("unified-contact-button");t&&(t.classList.remove("active"),t.style.display="none"),e&&e.classList.remove("active"),n&&(n.style.display="flex"),document.body.style.overflow=""}function xs(){const t=document.getElementById("unified-contact-button");t&&(t.style.opacity="0",t.style.pointerEvents="none")}function Cu(){const t=document.getElementById("unified-contact-button");t&&(t.style.opacity="1",t.style.pointerEvents="all")}window.UnifiedContact={hide:xs,show:Cu};function Tu(){"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(function(t){for(let e of t)e.unregister()}),"caches"in window&&caches.keys().then(function(t){for(let e of t)caches.delete(e)})}function Au(){if(document.getElementById("did-video-modal").classList.add("active"),document.body.style.overflow="hidden",kr){console.log("✅ D-ID ya estaba cargado");return}const e=document.createElement("script");e.type="module",e.src="https://agent.d-id.com/v2/index.js",e.setAttribute("data-mode","full"),e.setAttribute("data-client-key",ne.dIdClientKey),e.setAttribute("data-agent-id",ne.dIdAgentId),e.setAttribute("data-name","did-agent"),e.setAttribute("data-monitor","true"),e.setAttribute("data-target-id","did-agent-container"),e.onload=()=>{console.log("✅ D-ID Agent cargado"),kr=!0},e.onerror=()=>{console.error("❌ Error al cargar D-ID"),Tr(),alert("Error al cargar videollamada. Intentá nuevamente.")},document.body.appendChild(e)}function Tr(){const t=document.getElementById("did-video-modal"),e=document.getElementById("did-agent-container");if(document.querySelectorAll('script[src*="d-id.com"], script[data-name="did-agent"]').forEach(o=>o.remove()),e){const o=e.parentNode,r=document.createElement("div");r.id="did-agent-container",r.className="did-agent-container",o.replaceChild(r,e)}kr=!1,t.classList.remove("active"),document.body.style.overflow="",console.log("✅ D-ID Agent destruido completamente")}function Ou(){const t=document.createElement("button");t.id="unified-contact-button",t.className="unified-contact-main-button",t.innerHTML=`
        <svg width="24" height="24" viewBox="0 0 24 24" fill="white" style="flex-shrink: 0;">
            <circle cx="8" cy="12" r="1.5"/>
            <circle cx="12" cy="12" r="1.5"/>
            <circle cx="16" cy="12" r="1.5"/>
            <path d="M12 2C6.48 2 2 6.48 2 12C2 13.93 2.60 15.72 3.64 17.19L2.5 21.5L7.08 20.38C8.46 21.24 10.17 21.75 12 21.75C17.52 21.75 22 17.27 22 11.75C22 6.23 17.52 2 12 2Z" opacity="0.3"/>
        </svg>
        <span>Hablá con nosotros</span>
    `,t.addEventListener("click",Rt),document.body.appendChild(t)}function Mu(){const t=document.createElement("div");t.id="unified-contact-menu",t.className="unified-contact-menu";const e=document.createElement("button");e.className="contact-option whatsapp-option",e.innerHTML=`
        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
        </svg>
        <span>WhatsApp</span>
    `,e.addEventListener("click",xu);const n=document.createElement("button");n.className="contact-option chat-option",n.innerHTML=`
        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
            <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/>
            <circle cx="9" cy="10" r="1.5"/>
            <circle cx="12" cy="10" r="1.5"/>
            <circle cx="15" cy="10" r="1.5"/>
        </svg>
        <span>Chat</span>
    `,n.addEventListener("click",ju);const o=document.createElement("button");o.className="contact-option call-option",o.innerHTML=`
        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
            <path d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"/>
        </svg>
        <span>Llamar</span>
    `,o.addEventListener("click",Nu);const r=document.createElement("button");r.className="contact-option videocall-option",r.innerHTML=`
        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
            <path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"/>
        </svg>
        <span>Videollamada</span>
    `,r.addEventListener("click",Ru),t.appendChild(e),t.appendChild(n),t.appendChild(o),t.appendChild(r),document.body.appendChild(t)}function Pu(){const t=navigator.userAgent;return/Android/i.test(t)||/Pixel/i.test(t)}function Iu(){const t=document.createElement("div");t.id="call-overlay",t.className="call-overlay";const e=document.createElement("div");e.id="call-indicator",e.className="call-indicator",Pu()?e.innerHTML=`
            <div class="call-animation">
                <svg width="30" height="30" viewBox="0 0 24 24" fill="white">
                    <path d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"/>
                </svg>
            </div>
            <div class="call-status">En llamada...</div>
            <button class="end-call-btn end-call-btn-circular" id="end-call-btn" aria-label="Colgar llamada">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                    <path d="M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08c-.18-.17-.29-.42-.29-.7 0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28-.79-.74-1.69-1.36-2.67-1.85-.33-.16-.56-.5-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"/>
                </svg>
            </button>
        `:e.innerHTML=`
            <div class="call-animation">
                <svg width="30" height="30" viewBox="0 0 24 24" fill="white">
                    <path d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"/>
                </svg>
            </div>
            <div class="call-status">En llamada...</div>
            <button class="end-call-btn" id="end-call-btn">Colgar</button>
        `,document.body.appendChild(t),document.body.appendChild(e),document.getElementById("end-call-btn").addEventListener("click",Fu)}function Du(){const t=document.createElement("div");t.id="did-video-modal",t.className="did-video-modal",t.innerHTML=`
        <div class="did-modal-content">
            <button class="did-close-btn" id="did-close-btn">✕</button>
            <div id="did-agent-container" class="did-agent-container"></div>
        </div>
    `,document.body.appendChild(t),document.getElementById("did-close-btn").addEventListener("click",Tr),t.addEventListener("click",e=>{e.target===t&&Tr()})}function Lu(){const t=`
        .unified-contact-main-button {
            position: fixed;
            bottom: calc(100px + env(safe-area-inset-bottom, 0px));
            right: 35px;
            background: linear-gradient(135deg, ${ne.primaryColor} 0%, ${ne.secondaryColor} 100%);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 16px 28px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(46, 125, 50, 0.4);
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 9998;
            font-family: 'Open Sans', sans-serif;
            animation: subtlePulse 2s ease-in-out infinite;
        }

        .unified-contact-main-button span {
            flex: 0 0 auto;
        }

        @keyframes subtlePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes subtlePulseMobile {
            0%, 100% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.05); }
        }

        .unified-contact-main-button:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 6px 30px rgba(46, 125, 50, 0.5);
            animation: none;
        }

        .unified-contact-main-button.menu-open {
            background: linear-gradient(135deg, ${ne.secondaryColor} 0%, #0d3f10 100%);
        }

        .unified-contact-menu {
            position: fixed;
            bottom: calc(180px + env(safe-area-inset-bottom, 0px));
            right: 35px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            opacity: 0;
            pointer-events: none;
            transform: translateY(20px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 9997;
        }

        .unified-contact-menu.show {
            opacity: 1;
            pointer-events: all;
            transform: translateY(0);
        }

        .contact-option {
            background: white;
            border: none;
            border-radius: 50px;
            padding: 14px 24px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: 'Open Sans', sans-serif;
            opacity: 0;
        }

        .contact-option span {
            flex: 0 0 auto;
        }

        .unified-contact-menu.show .contact-option {
            animation: slideIn 0.4s ease-out forwards;
        }

        .unified-contact-menu.show .contact-option:nth-child(1) {
            animation-delay: 0.05s;
        }

        .unified-contact-menu.show .contact-option:nth-child(2) {
            animation-delay: 0.1s;
        }

        .unified-contact-menu.show .contact-option:nth-child(3) {
            animation-delay: 0.15s;
        }

        .unified-contact-menu.show .contact-option:nth-child(4) {
            animation-delay: 0.2s;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .contact-option:hover {
            transform: translateX(-5px) scale(1.05);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.2);
        }

        .whatsapp-option {
            color: ${ne.whatsappColor};
        }

        .whatsapp-option svg {
            fill: ${ne.whatsappColor};
        }

        .chat-option {
            color: ${ne.primaryColor};
        }

        .chat-option svg {
            fill: ${ne.primaryColor};
        }

        .call-option {
            color: #1976D2;
        }

        .call-option svg {
            fill: #1976D2;
        }

        .videocall-option {
            color: ${ne.videoCallColor};
        }

        .videocall-option svg {
            fill: ${ne.videoCallColor};
        }

        .did-video-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 100000;
            justify-content: center;
            align-items: center;
        }

        .did-video-modal.active {
            display: flex;
        }

        .did-modal-content {
            position: relative;
            width: 90%;
            max-width: 900px;
            height: 85vh;
            background: #000;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .did-agent-container {
            width: 100%;
            height: 100%;
        }

        .did-close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 28px;
            z-index: 100001;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 300;
        }

        .did-close-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: rotate(90deg);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .call-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            z-index: 99998;
            display: none;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }

        .call-overlay.active {
            display: block;
        }

        /* 🎯 DISEÑO PERFECTO DEL INDICADOR DE LLAMADA (del segundo archivo) */
        .call-indicator {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 20px;
            padding: 30px 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            z-index: 99999;
            display: none;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            min-width: 300px;
        }

        .call-indicator.active {
            display: flex;
        }

        .call-status {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            text-align: center;
        }

        .call-animation {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: ${ne.primaryColor};
            animation: pulse 1.5s ease-in-out infinite;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.1);
                opacity: 0.8;
            }
        }

        /* 🎯 Botón Colgar - PC e iPhone (rectangular blanco con texto) */
        .end-call-btn {
            padding: 12px 30px;
            background: white;
            color: #f44336;
            border: 2px solid #f44336;
            border-radius: 25px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 0.5px;
            font-family: 'Open Sans', sans-serif;
        }

        .end-call-btn:hover {
            background: #f5f5f5;
            transform: scale(1.05);
        }

        /* 🎯 Botón Colgar - Android (circular rojo con ícono) - DISEÑO PERFECTO */
        .end-call-btn-circular {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #f44336;
            color: white;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(244, 67, 54, 0.4);
        }

        .end-call-btn-circular:hover {
            background: #d32f2f;
            transform: scale(1.05);
        }

        .vapi-btn {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            pointer-events: none !important;
        }

        @media (max-width: 768px) {
            .unified-contact-main-button {
                bottom: calc(100px + env(safe-area-inset-bottom, 0px));
                left: 50%;
                right: auto;
                transform: translateX(-50%);
                padding: 14px 24px;
                font-size: 20px;
                box-sizing: border-box;
                width: auto;
                max-width: calc(100vw - 40px);
                white-space: nowrap;
                animation: subtlePulseMobile 2s ease-in-out infinite;
            }

            .unified-contact-main-button:hover {
                transform: translateX(-50%) translateY(-3px) scale(1.05);
            }

            .unified-contact-menu {
                bottom: calc(180px + env(safe-area-inset-bottom, 0px));
                left: 50%;
                right: auto;
                transform: translateX(-50%);
                gap: 10px;
                align-items: center;
                box-sizing: border-box;
                width: auto;
                max-width: calc(100vw - 40px);
            }

            .unified-contact-menu.show {
                transform: translateX(-50%) translateY(0);
            }

            .contact-option {
                padding: 13px 22px;
                font-size: 14px;
                gap: 10px;
                width: 100%;
                max-width: 280px;
                justify-content: center;
            }

            .unified-contact-menu.show .contact-option {
                transform: translateX(0);
                animation: fadeIn 0.4s ease-out forwards;
            }

            .contact-option:hover {
                transform: scale(1.03);
            }

            .did-modal-content {
                width: 92%;
                height: 75vh;
                max-height: 600px;
                border-radius: 12px;
            }

            .did-close-btn {
                top: 15px;
                right: 15px;
                width: 44px;
                height: 44px;
                font-size: 24px;
            }

            .call-indicator {
                padding: 25px 30px;
                min-width: 280px;
            }

            .call-status {
                font-size: 16px;
            }

            .end-call-btn {
                font-size: 16px;
                padding: 10px 25px;
            }

            .end-call-btn-circular {
                width: 55px;
                height: 55px;
            }

            .end-call-btn-circular svg {
                width: 22px;
                height: 22px;
            }
        }

        @media (max-width: 480px) {
            .call-indicator {
                padding: 20px 25px;
                min-width: 260px;
            }

            .call-status {
                font-size: 15px;
            }

            .call-animation {
                width: 50px;
                height: 50px;
            }

            .end-call-btn {
                font-size: 15px;
                padding: 9px 20px;
            }

            .end-call-btn-circular {
                width: 50px;
                height: 50px;
            }

            .end-call-btn-circular svg {
                width: 20px;
                height: 20px;
            }

            .did-modal-content {
                width: 95%;
                height: 70vh;
                max-height: 550px;
                border-radius: 8px;
            }

            .did-close-btn {
                top: 10px;
                right: 10px;
                width: 40px;
                height: 40px;
                font-size: 20px;
            }

            .contact-option {
                max-width: 260px;
            }
        }
    `,e=document.createElement("style");e.textContent=t,document.head.appendChild(e)}function Rt(){const t=document.getElementById("unified-contact-button"),e=document.getElementById("unified-contact-menu");Jn=!Jn,Jn?(e.classList.add("show"),t.classList.add("menu-open")):(e.classList.remove("show"),t.classList.remove("menu-open"))}function xu(){const t=`https://api.whatsapp.com/send?phone=${ne.whatsappPhone}&text=${encodeURIComponent(ne.whatsappMessage)}`;window.open(t,"_blank"),Rt()}function ju(){Rt(),xs(),window.MavildaChat&&typeof window.MavildaChat.open=="function"&&window.MavildaChat.open()}async function Nu(){Rt();try{const t=Ls();console.log("🎯 Iniciando llamada con Vapi..."),await t.start(ne.vapiAssistantId)}catch(t){console.error("❌ Error al iniciar llamada:",t),alert("No se pudo iniciar la llamada. Por favor, intentá de nuevo."),Cr()}}function Ru(){Rt(),Au()}function Fu(){if(Re&&on)try{Re.stop(),console.log("✅ Llamada detenida por el usuario")}catch(t){console.error("❌ Error al detener llamada:",t)}}function qu(){const t=navigator.userAgent,e=/Android/i.test(t)||/Pixel/i.test(t);console.log("🔍 Detectando dispositivo..."),console.log("User Agent completo:",t),console.log("¿Es Android/Pixel?:",e);const n=/Mobile/i.test(t);n&&console.log("📱 Vista móvil detectada"),(e||n)&&(document.documentElement.classList.add("is-android"),console.log("✅ Clase 'is-android' agregada al HTML"))}function Bo(){Tu(),qu(),Ou(),Mu(),Iu(),Du(),Lu(),Ls(),console.log("✅ Sistema de comunicación unificado cargado correctamente")}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Bo):Bo();console.log("✅ UNIFIED CONTACT - CON VIDEOLLAMADA D-ID");console.log("📱 User Agent:",navigator.userAgent);console.log("🔍 Android/Pixel detectado:",/Android|Pixel/i.test(navigator.userAgent));(window.location.hostname.includes("replit")||window.location.hostname.includes("repl"))&&console.log("⚠️ Detectado entorno Replit - Activando modo debug");
